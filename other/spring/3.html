<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.60" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://mister-hope.github.io/other/spring/3.html"><meta property="og:site_name" content="åšå®¢æ¼”ç¤º"><meta property="og:title" content="spring"><meta property="og:description" content="image-20230710170222399 èµ°è¿›SpringBootä¸€ç«™å¼å¼€å‘ å‰ç½®è¯¾ç¨‹ï¼šã€ŠSpring6æ ¸å¿ƒå†…å®¹ã€‹ã€ŠSpringMvc6ã€‹ã€ŠSpringSecurity6ã€‹ã€ŠJava-9-17æ–°ç‰¹æ€§ç¯‡ã€‹"><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="article:author" content="xss"><meta property="article:tag" content="spring"><meta property="article:published_time" content="2023-12-11T00:00:00.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"spring","image":[""],"datePublished":"2023-12-11T00:00:00.000Z","dateModified":null,"author":[{"@type":"Person","name":"xss"}]}</script><title>spring | åšå®¢æ¼”ç¤º</title><meta name="description" content="image-20230710170222399 èµ°è¿›SpringBootä¸€ç«™å¼å¼€å‘ å‰ç½®è¯¾ç¨‹ï¼šã€ŠSpring6æ ¸å¿ƒå†…å®¹ã€‹ã€ŠSpringMvc6ã€‹ã€ŠSpringSecurity6ã€‹ã€ŠJava-9-17æ–°ç‰¹æ€§ç¯‡ã€‹">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-81142974.css" as="style"><link rel="stylesheet" href="/assets/style-81142974.css">
    <link rel="modulepreload" href="/assets/app-65819ca9.js"><link rel="modulepreload" href="/assets/framework-56e099cb.js"><link rel="modulepreload" href="/assets/3.html-9f848163.js"><link rel="modulepreload" href="/assets/3.html-27955bdb.js"><link rel="prefetch" href="/assets/intro.html-bb34d506.js" as="script"><link rel="prefetch" href="/assets/index.html-bd8e567b.js" as="script"><link rel="prefetch" href="/assets/slides.html-91eae00f.js" as="script"><link rel="prefetch" href="/assets/disable.html-d991dcc6.js" as="script"><link rel="prefetch" href="/assets/encrypt.html-d4addaf5.js" as="script"><link rel="prefetch" href="/assets/markdown.html-ac8fc095.js" as="script"><link rel="prefetch" href="/assets/page.html-5c7c0c98.js" as="script"><link rel="prefetch" href="/assets/index.html-d254e2c7.js" as="script"><link rel="prefetch" href="/assets/cherry.html-ee5208e8.js" as="script"><link rel="prefetch" href="/assets/dragonfruit.html-43901547.js" as="script"><link rel="prefetch" href="/assets/strawberry.html-7fcae4a6.js" as="script"><link rel="prefetch" href="/assets/tomato.html-c4aceadb.js" as="script"><link rel="prefetch" href="/assets/1.html-b6f3fcc4.js" as="script"><link rel="prefetch" href="/assets/2.html-c9ae7c85.js" as="script"><link rel="prefetch" href="/assets/1.html-ce45317a.js" as="script"><link rel="prefetch" href="/assets/3.html-5c3117a0.js" as="script"><link rel="prefetch" href="/assets/4.html-cf222a9d.js" as="script"><link rel="prefetch" href="/assets/1.html-f6694eac.js" as="script"><link rel="prefetch" href="/assets/2.html-e736ad93.js" as="script"><link rel="prefetch" href="/assets/3.html-9a1b29e9.js" as="script"><link rel="prefetch" href="/assets/1.html-be824815.js" as="script"><link rel="prefetch" href="/assets/2.html-5aee2181.js" as="script"><link rel="prefetch" href="/assets/3.html-86389910.js" as="script"><link rel="prefetch" href="/assets/4.html-5bdfd862.js" as="script"><link rel="prefetch" href="/assets/5.html-db5b0433.js" as="script"><link rel="prefetch" href="/assets/6.html-32adee7b.js" as="script"><link rel="prefetch" href="/assets/7.html-32c3df90.js" as="script"><link rel="prefetch" href="/assets/3.html-0a1d56c4.js" as="script"><link rel="prefetch" href="/assets/4.html-080ee21f.js" as="script"><link rel="prefetch" href="/assets/5.html-fba91577.js" as="script"><link rel="prefetch" href="/assets/6.html-869a548e.js" as="script"><link rel="prefetch" href="/assets/lua.html-bcb6edc5.js" as="script"><link rel="prefetch" href="/assets/1.html-2e327d5f.js" as="script"><link rel="prefetch" href="/assets/2.html-df478210.js" as="script"><link rel="prefetch" href="/assets/3.html-07277b50.js" as="script"><link rel="prefetch" href="/assets/4.html-502c67e8.js" as="script"><link rel="prefetch" href="/assets/1.html-bdeb03a3.js" as="script"><link rel="prefetch" href="/assets/2.html-6ee78e95.js" as="script"><link rel="prefetch" href="/assets/3.html-5f16e39f.js" as="script"><link rel="prefetch" href="/assets/4.html-dd788c19.js" as="script"><link rel="prefetch" href="/assets/1.html-2f20aba0.js" as="script"><link rel="prefetch" href="/assets/2.html-41285371.js" as="script"><link rel="prefetch" href="/assets/4.html-e5f4d4be.js" as="script"><link rel="prefetch" href="/assets/5.html-8d353327.js" as="script"><link rel="prefetch" href="/assets/6.html-cfdef71b.js" as="script"><link rel="prefetch" href="/assets/1.html-e269eed0.js" as="script"><link rel="prefetch" href="/assets/2.html-02ea2ec3.js" as="script"><link rel="prefetch" href="/assets/3.html-f08193e4.js" as="script"><link rel="prefetch" href="/assets/404.html-594f5d63.js" as="script"><link rel="prefetch" href="/assets/index.html-63127f1b.js" as="script"><link rel="prefetch" href="/assets/index.html-f1cafae0.js" as="script"><link rel="prefetch" href="/assets/index.html-aea6ce29.js" as="script"><link rel="prefetch" href="/assets/index.html-92ebbfa3.js" as="script"><link rel="prefetch" href="/assets/index.html-c8e5f742.js" as="script"><link rel="prefetch" href="/assets/index.html-f31b87b3.js" as="script"><link rel="prefetch" href="/assets/index.html-4dd07785.js" as="script"><link rel="prefetch" href="/assets/index.html-5346bf93.js" as="script"><link rel="prefetch" href="/assets/index.html-1d33e339.js" as="script"><link rel="prefetch" href="/assets/index.html-f8ac348a.js" as="script"><link rel="prefetch" href="/assets/index.html-24e480c2.js" as="script"><link rel="prefetch" href="/assets/index.html-6615e7c0.js" as="script"><link rel="prefetch" href="/assets/index.html-32253992.js" as="script"><link rel="prefetch" href="/assets/index.html-223571c2.js" as="script"><link rel="prefetch" href="/assets/index.html-ba87fae4.js" as="script"><link rel="prefetch" href="/assets/index.html-8039de1b.js" as="script"><link rel="prefetch" href="/assets/index.html-8c3331b6.js" as="script"><link rel="prefetch" href="/assets/index.html-cdbc646b.js" as="script"><link rel="prefetch" href="/assets/index.html-6b83a438.js" as="script"><link rel="prefetch" href="/assets/index.html-2e755d47.js" as="script"><link rel="prefetch" href="/assets/index.html-b423562e.js" as="script"><link rel="prefetch" href="/assets/index.html-d392d90e.js" as="script"><link rel="prefetch" href="/assets/index.html-136d0764.js" as="script"><link rel="prefetch" href="/assets/index.html-8080d7ae.js" as="script"><link rel="prefetch" href="/assets/index.html-b92b8256.js" as="script"><link rel="prefetch" href="/assets/index.html-beff99f7.js" as="script"><link rel="prefetch" href="/assets/index.html-253ae200.js" as="script"><link rel="prefetch" href="/assets/index.html-5850ee6d.js" as="script"><link rel="prefetch" href="/assets/index.html-b67256d4.js" as="script"><link rel="prefetch" href="/assets/index.html-7387caf7.js" as="script"><link rel="prefetch" href="/assets/index.html-a2695403.js" as="script"><link rel="prefetch" href="/assets/index.html-577f766d.js" as="script"><link rel="prefetch" href="/assets/index.html-044ee318.js" as="script"><link rel="prefetch" href="/assets/index.html-da618871.js" as="script"><link rel="prefetch" href="/assets/index.html-8afb0b28.js" as="script"><link rel="prefetch" href="/assets/index.html-a8217b62.js" as="script"><link rel="prefetch" href="/assets/index.html-56a017de.js" as="script"><link rel="prefetch" href="/assets/index.html-6b3fbd60.js" as="script"><link rel="prefetch" href="/assets/index.html-d26acfc0.js" as="script"><link rel="prefetch" href="/assets/index.html-a8eac30e.js" as="script"><link rel="prefetch" href="/assets/index.html-096a9aee.js" as="script"><link rel="prefetch" href="/assets/index.html-883630ec.js" as="script"><link rel="prefetch" href="/assets/index.html-043e87d8.js" as="script"><link rel="prefetch" href="/assets/index.html-0844533a.js" as="script"><link rel="prefetch" href="/assets/index.html-e191a1f5.js" as="script"><link rel="prefetch" href="/assets/index.html-9273cef8.js" as="script"><link rel="prefetch" href="/assets/index.html-2ddc49d2.js" as="script"><link rel="prefetch" href="/assets/index.html-c0b8f8a5.js" as="script"><link rel="prefetch" href="/assets/index.html-6ce5bf3b.js" as="script"><link rel="prefetch" href="/assets/index.html-1a6c71c2.js" as="script"><link rel="prefetch" href="/assets/index.html-8e1b5509.js" as="script"><link rel="prefetch" href="/assets/index.html-3a34de06.js" as="script"><link rel="prefetch" href="/assets/index.html-11a6913a.js" as="script"><link rel="prefetch" href="/assets/index.html-96aca4dd.js" as="script"><link rel="prefetch" href="/assets/index.html-052bdcb6.js" as="script"><link rel="prefetch" href="/assets/index.html-1c3e70ce.js" as="script"><link rel="prefetch" href="/assets/index.html-ea39b9d1.js" as="script"><link rel="prefetch" href="/assets/index.html-31ffea44.js" as="script"><link rel="prefetch" href="/assets/index.html-1af26993.js" as="script"><link rel="prefetch" href="/assets/index.html-5523b710.js" as="script"><link rel="prefetch" href="/assets/index.html-cfec62d4.js" as="script"><link rel="prefetch" href="/assets/index.html-55f3d75b.js" as="script"><link rel="prefetch" href="/assets/index.html-88385ae3.js" as="script"><link rel="prefetch" href="/assets/index.html-b882fd17.js" as="script"><link rel="prefetch" href="/assets/index.html-454f0094.js" as="script"><link rel="prefetch" href="/assets/index.html-ccfb09d0.js" as="script"><link rel="prefetch" href="/assets/intro.html-d46efe19.js" as="script"><link rel="prefetch" href="/assets/index.html-ae90b228.js" as="script"><link rel="prefetch" href="/assets/slides.html-9ff0f488.js" as="script"><link rel="prefetch" href="/assets/disable.html-5302060c.js" as="script"><link rel="prefetch" href="/assets/encrypt.html-5a62243f.js" as="script"><link rel="prefetch" href="/assets/markdown.html-7524b5a8.js" as="script"><link rel="prefetch" href="/assets/page.html-d4bdbacc.js" as="script"><link rel="prefetch" href="/assets/index.html-3136f752.js" as="script"><link rel="prefetch" href="/assets/cherry.html-814ba7d2.js" as="script"><link rel="prefetch" href="/assets/dragonfruit.html-7e8c50c8.js" as="script"><link rel="prefetch" href="/assets/strawberry.html-2a3ba0cf.js" as="script"><link rel="prefetch" href="/assets/tomato.html-9f64990f.js" as="script"><link rel="prefetch" href="/assets/1.html-7c137e39.js" as="script"><link rel="prefetch" href="/assets/2.html-4fbb532a.js" as="script"><link rel="prefetch" href="/assets/1.html-5b41c3c2.js" as="script"><link rel="prefetch" href="/assets/3.html-054222d0.js" as="script"><link rel="prefetch" href="/assets/4.html-2e0cde1c.js" as="script"><link rel="prefetch" href="/assets/1.html-bd837d03.js" as="script"><link rel="prefetch" href="/assets/2.html-0075e625.js" as="script"><link rel="prefetch" href="/assets/3.html-83f6317a.js" as="script"><link rel="prefetch" href="/assets/1.html-8eda1949.js" as="script"><link rel="prefetch" href="/assets/2.html-e8f420a5.js" as="script"><link rel="prefetch" href="/assets/3.html-24a29a23.js" as="script"><link rel="prefetch" href="/assets/4.html-f030151e.js" as="script"><link rel="prefetch" href="/assets/5.html-71882f49.js" as="script"><link rel="prefetch" href="/assets/6.html-f050a962.js" as="script"><link rel="prefetch" href="/assets/7.html-6a9875f3.js" as="script"><link rel="prefetch" href="/assets/3.html-dcbc8604.js" as="script"><link rel="prefetch" href="/assets/4.html-d18eff7d.js" as="script"><link rel="prefetch" href="/assets/5.html-228e2f1c.js" as="script"><link rel="prefetch" href="/assets/6.html-e68e0fbb.js" as="script"><link rel="prefetch" href="/assets/lua.html-a03ee98d.js" as="script"><link rel="prefetch" href="/assets/1.html-eb34e197.js" as="script"><link rel="prefetch" href="/assets/2.html-1340c28b.js" as="script"><link rel="prefetch" href="/assets/3.html-ba6e2311.js" as="script"><link rel="prefetch" href="/assets/4.html-df171fe9.js" as="script"><link rel="prefetch" href="/assets/1.html-34571615.js" as="script"><link rel="prefetch" href="/assets/2.html-b3e831b7.js" as="script"><link rel="prefetch" href="/assets/3.html-053b2c52.js" as="script"><link rel="prefetch" href="/assets/4.html-fcf19978.js" as="script"><link rel="prefetch" href="/assets/1.html-c9ee7335.js" as="script"><link rel="prefetch" href="/assets/2.html-d5581402.js" as="script"><link rel="prefetch" href="/assets/4.html-401b3ed3.js" as="script"><link rel="prefetch" href="/assets/5.html-72317d24.js" as="script"><link rel="prefetch" href="/assets/6.html-222372ff.js" as="script"><link rel="prefetch" href="/assets/1.html-370bc013.js" as="script"><link rel="prefetch" href="/assets/2.html-e544c3a3.js" as="script"><link rel="prefetch" href="/assets/3.html-09b5943f.js" as="script"><link rel="prefetch" href="/assets/404.html-86880e56.js" as="script"><link rel="prefetch" href="/assets/index.html-909fd19f.js" as="script"><link rel="prefetch" href="/assets/index.html-aa02e084.js" as="script"><link rel="prefetch" href="/assets/index.html-c89b4649.js" as="script"><link rel="prefetch" href="/assets/index.html-d7b31a9f.js" as="script"><link rel="prefetch" href="/assets/index.html-9ee39423.js" as="script"><link rel="prefetch" href="/assets/index.html-aef2c4d7.js" as="script"><link rel="prefetch" href="/assets/index.html-c899b66d.js" as="script"><link rel="prefetch" href="/assets/index.html-ae412a73.js" as="script"><link rel="prefetch" href="/assets/index.html-6b1a6506.js" as="script"><link rel="prefetch" href="/assets/index.html-5c6d41ca.js" as="script"><link rel="prefetch" href="/assets/index.html-8e8993c4.js" as="script"><link rel="prefetch" href="/assets/index.html-547aa497.js" as="script"><link rel="prefetch" href="/assets/index.html-bf705354.js" as="script"><link rel="prefetch" href="/assets/index.html-89ae4dc2.js" as="script"><link rel="prefetch" href="/assets/index.html-83ee3e10.js" as="script"><link rel="prefetch" href="/assets/index.html-cd52b940.js" as="script"><link rel="prefetch" href="/assets/index.html-b1892d98.js" as="script"><link rel="prefetch" href="/assets/index.html-ff895244.js" as="script"><link rel="prefetch" href="/assets/index.html-2c60f979.js" as="script"><link rel="prefetch" href="/assets/index.html-b3d104f5.js" as="script"><link rel="prefetch" href="/assets/index.html-e94510f8.js" as="script"><link rel="prefetch" href="/assets/index.html-ed0e00e2.js" as="script"><link rel="prefetch" href="/assets/index.html-b9653855.js" as="script"><link rel="prefetch" href="/assets/index.html-659338d5.js" as="script"><link rel="prefetch" href="/assets/index.html-cece619f.js" as="script"><link rel="prefetch" href="/assets/index.html-4154a9cf.js" as="script"><link rel="prefetch" href="/assets/index.html-e5500cc6.js" as="script"><link rel="prefetch" href="/assets/index.html-11a5542f.js" as="script"><link rel="prefetch" href="/assets/index.html-ffe20159.js" as="script"><link rel="prefetch" href="/assets/index.html-8239ccca.js" as="script"><link rel="prefetch" href="/assets/index.html-25d84c29.js" as="script"><link rel="prefetch" href="/assets/index.html-8656cfdc.js" as="script"><link rel="prefetch" href="/assets/index.html-274602dd.js" as="script"><link rel="prefetch" href="/assets/index.html-56ad4c37.js" as="script"><link rel="prefetch" href="/assets/index.html-bc2a07cd.js" as="script"><link rel="prefetch" href="/assets/index.html-39eb48a5.js" as="script"><link rel="prefetch" href="/assets/index.html-64d124ec.js" as="script"><link rel="prefetch" href="/assets/index.html-fcf1ba21.js" as="script"><link rel="prefetch" href="/assets/index.html-45036084.js" as="script"><link rel="prefetch" href="/assets/index.html-5e5e2c88.js" as="script"><link rel="prefetch" href="/assets/index.html-bc9a2a05.js" as="script"><link rel="prefetch" href="/assets/index.html-a2414e8f.js" as="script"><link rel="prefetch" href="/assets/index.html-47a711aa.js" as="script"><link rel="prefetch" href="/assets/index.html-5507e2fe.js" as="script"><link rel="prefetch" href="/assets/index.html-03b95d1c.js" as="script"><link rel="prefetch" href="/assets/index.html-e0f68783.js" as="script"><link rel="prefetch" href="/assets/index.html-77f532f3.js" as="script"><link rel="prefetch" href="/assets/index.html-154c2652.js" as="script"><link rel="prefetch" href="/assets/index.html-00c28cc5.js" as="script"><link rel="prefetch" href="/assets/index.html-a0dbca5b.js" as="script"><link rel="prefetch" href="/assets/index.html-2369335a.js" as="script"><link rel="prefetch" href="/assets/index.html-36eef8a7.js" as="script"><link rel="prefetch" href="/assets/index.html-ae2a0170.js" as="script"><link rel="prefetch" href="/assets/index.html-722413a8.js" as="script"><link rel="prefetch" href="/assets/index.html-81c1e196.js" as="script"><link rel="prefetch" href="/assets/index.html-15fd02f5.js" as="script"><link rel="prefetch" href="/assets/index.html-81b86823.js" as="script"><link rel="prefetch" href="/assets/index.html-0c66c52a.js" as="script"><link rel="prefetch" href="/assets/index.html-d284248d.js" as="script"><link rel="prefetch" href="/assets/index.html-f7a380a2.js" as="script"><link rel="prefetch" href="/assets/index.html-046592f8.js" as="script"><link rel="prefetch" href="/assets/index.html-85fd1156.js" as="script"><link rel="prefetch" href="/assets/index.html-2e4728b6.js" as="script"><link rel="prefetch" href="/assets/index.html-a52c2961.js" as="script"><link rel="prefetch" href="/assets/index.html-ad0e1292.js" as="script"><link rel="prefetch" href="/assets/index.html-d6efb8e5.js" as="script"><link rel="prefetch" href="/assets/Catalog-22320f60.js" as="script"><link rel="prefetch" href="/assets/giscus-0b7adcf8.js" as="script"><link rel="prefetch" href="/assets/auto-6adc87e8.js" as="script"><link rel="prefetch" href="/assets/index-70dce5ac.js" as="script"><link rel="prefetch" href="/assets/flowchart-d65a1d8e.js" as="script"><link rel="prefetch" href="/assets/mermaid.esm.min-67083af4.js" as="script"><link rel="prefetch" href="/assets/mermaid-mindmap.esm.min-d62ec99d.js" as="script"><link rel="prefetch" href="/assets/highlight.esm-75b11b9d.js" as="script"><link rel="prefetch" href="/assets/markdown.esm-30be9ea9.js" as="script"><link rel="prefetch" href="/assets/math.esm-70a288c8.js" as="script"><link rel="prefetch" href="/assets/notes.esm-a106bb2c.js" as="script"><link rel="prefetch" href="/assets/reveal.esm-6e84c481.js" as="script"><link rel="prefetch" href="/assets/search.esm-7e6792e2.js" as="script"><link rel="prefetch" href="/assets/zoom.esm-b83b91d0.js" as="script"><link rel="prefetch" href="/assets/VuePlayground-e1d721ef.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-0c95cb0f.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><!--[--><div class="theme-container has-toc"><!--[--><header class="navbar" id="navbar"><div class="navbar-start"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/" class="brand"><img class="logo" src="/xss.svg" alt="åšå®¢æ¼”ç¤º"><!----><span class="site-name hide-in-pad">åšå®¢æ¼”ç¤º</span></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/" class="nav-link" aria-label="åšå®¢ä¸»é¡µ"><span class="font-icon icon iconfont icon-home" style=""></span>åšå®¢ä¸»é¡µ<!----></a></div><div class="nav-item hide-in-mobile"><a href="/demo/" class="nav-link" aria-label="æ¼”ç¤º"><span class="font-icon icon iconfont icon-discover" style=""></span>æ¼”ç¤º<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="å¸–å­"><span class="title"><span class="font-icon icon iconfont icon-edit" style=""></span>å¸–å­</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>MQ</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/other/mq/1.html" class="nav-link" aria-label="mq1"><span class="font-icon icon iconfont icon-edit" style=""></span>mq1<!----></a></li><li class="dropdown-subitem"><a href="/other/mq/2.html" class="nav-link" aria-label="mq2"><span class="font-icon icon iconfont icon-edit" style=""></span>mq2<!----></a></li><li class="dropdown-subitem"><a href="/other/mq/3.html" class="nav-link" aria-label="MQ"><span class="font-icon icon iconfont icon-page" style=""></span>MQ<!----></a></li><li class="dropdown-subitem"><a href="/other/mq/4.html" class="nav-link" aria-label="MQ"><span class="font-icon icon iconfont icon-page" style=""></span>MQ<!----></a></li><li class="dropdown-subitem"><a href="/other/mq/5.html" class="nav-link" aria-label="MQ"><span class="font-icon icon iconfont icon-page" style=""></span>MQ<!----></a></li><li class="dropdown-subitem"><a href="/other/mq/6.html" class="nav-link" aria-label="MQ"><span class="font-icon icon iconfont icon-page" style=""></span>MQ<!----></a></li><li class="dropdown-subitem"><a href="/other/mq/7.html" class="nav-link" aria-label="MQ"><span class="font-icon icon iconfont icon-page" style=""></span>MQ<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>demo</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/other/demo/1.html" class="nav-link" aria-label="demo1"><span class="font-icon icon iconfont icon-edit" style=""></span>demo1<!----></a></li><li class="dropdown-subitem"><a href="/other/demo/2.html" class="nav-link" aria-label="demo2"><span class="font-icon icon iconfont icon-edit" style=""></span>demo2<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>git</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/other/git/1.html" class="nav-link" aria-label="git"><span class="font-icon icon iconfont icon-edit" style=""></span>git<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>io</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/other/io/1.html" class="nav-link" aria-label="io 1"><span class="font-icon icon iconfont icon-edit" style=""></span>io 1<!----></a></li><li class="dropdown-subitem"><a href="/other/io/2.html" class="nav-link" aria-label="io 2"><span class="font-icon icon iconfont icon-edit" style=""></span>io 2<!----></a></li><li class="dropdown-subitem"><a href="/other/io/3.html" class="nav-link" aria-label="æ•°æ®åº“"><span class="font-icon icon iconfont icon-page" style=""></span>æ•°æ®åº“<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>linux</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/other/linux/4.html" class="nav-link" aria-label="linux 1"><span class="font-icon icon iconfont icon-edit" style=""></span>linux 1<!----></a></li><li class="dropdown-subitem"><a href="/other/linux/5" class="nav-link" aria-label="linux 1"><span class="font-icon icon iconfont icon-edit" style=""></span>linux 1<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>lua</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/other/lua/lua.html" class="nav-link" aria-label="lua 1"><span class="font-icon icon iconfont icon-edit" style=""></span>lua 1<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>mybatis</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/other/mybatis/3.html" class="nav-link" aria-label="mybatis 3"><span class="font-icon icon iconfont icon-edit" style=""></span>mybatis 3<!----></a></li><li class="dropdown-subitem"><a href="/other/mybatis/4.html" class="nav-link" aria-label="mybatis 4"><span class="font-icon icon iconfont icon-edit" style=""></span>mybatis 4<!----></a></li><li class="dropdown-subitem"><a href="/other/mybatis/5.html" class="nav-link" aria-label="mybatis 5"><span class="font-icon icon iconfont icon-edit" style=""></span>mybatis 5<!----></a></li><li class="dropdown-subitem"><a href="/other/mybatis/6.html" class="nav-link" aria-label="mybatis 6"><span class="font-icon icon iconfont icon-edit" style=""></span>mybatis 6<!----></a></li><li class="dropdown-subitem"><a href="/other/mybatis/7" class="nav-link" aria-label="mybatis 7"><span class="font-icon icon iconfont icon-edit" style=""></span>mybatis 7<!----></a></li><li class="dropdown-subitem"><a href="/other/mybatis/8" class="nav-link" aria-label="mybatis 8"><span class="font-icon icon iconfont icon-edit" style=""></span>mybatis 8<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>mysql</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/other/mysql/1.html" class="nav-link" aria-label="mysql 1"><span class="font-icon icon iconfont icon-edit" style=""></span>mysql 1<!----></a></li><li class="dropdown-subitem"><a href="/other/mysql/2.html" class="nav-link" aria-label="mysql 2"><span class="font-icon icon iconfont icon-edit" style=""></span>mysql 2<!----></a></li><li class="dropdown-subitem"><a href="/other/mysql/3.html" class="nav-link" aria-label="æ•°æ®åº“"><span class="font-icon icon iconfont icon-page" style=""></span>æ•°æ®åº“<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>redis</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/other/redis/1" class="nav-link" aria-label="redis 1"><span class="font-icon icon iconfont icon-edit" style=""></span>redis 1<!----></a></li><li class="dropdown-subitem"><a href="/other/redis/2" class="nav-link" aria-label="redis 2"><span class="font-icon icon iconfont icon-edit" style=""></span>redis 2<!----></a></li><li class="dropdown-subitem"><a href="/other/redis/3" class="nav-link" aria-label="/other/redis/3"><!---->/other/redis/3<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>spring</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/other/spring/1.html" class="nav-link" aria-label="spring 1"><span class="font-icon icon iconfont icon-edit" style=""></span>spring 1<!----></a></li><li class="dropdown-subitem"><a href="/other/spring/2.html" class="nav-link" aria-label="spring 2"><span class="font-icon icon iconfont icon-edit" style=""></span>spring 2<!----></a></li><li class="dropdown-subitem"><a aria-current="page" href="/other/spring/3.html" class="router-link-active router-link-exact-active nav-link active" aria-label="spring"><span class="font-icon icon iconfont icon-page" style=""></span>spring<!----></a></li><li class="dropdown-subitem"><a href="/other/spring/4.html" class="nav-link" aria-label="spring"><span class="font-icon icon iconfont icon-page" style=""></span>spring<!----></a></li><li class="dropdown-subitem"><a href="/other/spring/5.html" class="nav-link" aria-label="spring"><span class="font-icon icon iconfont icon-page" style=""></span>spring<!----></a></li><li class="dropdown-subitem"><a href="/other/spring/6.html" class="nav-link" aria-label="spring"><span class="font-icon icon iconfont icon-page" style=""></span>spring<!----></a></li></ul></li><li class="dropdown-item"><a href="/other/cherry" class="nav-link" aria-label="æ¨±æ¡ƒ"><span class="font-icon icon iconfont icon-edit" style=""></span>æ¨±æ¡ƒ<!----></a></li><li class="dropdown-item"><a href="/other/dragonfruit" class="nav-link" aria-label="ç«é¾™æœ"><span class="font-icon icon iconfont icon-edit" style=""></span>ç«é¾™æœ<!----></a></li><li class="dropdown-item"><a href="/other/tomato" class="nav-link" aria-label="/other/tomato"><!---->/other/tomato<!----></a></li><li class="dropdown-item"><a href="/other/strawberry" class="nav-link" aria-label="/other/strawberry"><!---->/other/strawberry<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="https://theme-hope.vuejs.vuepress/zh/" rel="noopener noreferrer" target="_blank" aria-label="V2 æ–‡æ¡£" class="nav-link"><span class="font-icon icon iconfont icon-note" style=""></span>V2 æ–‡æ¡£<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div></nav><!--[--><!----><!--]--></div><div class="navbar-end"><!--[--><!----><!--]--><!----><div class="nav-item"><a class="repo-link" href="https://github.com/vuepress-theme-hope/vuepress-theme-hope" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--[--><!----><!--]--><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar" id="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><a href="/" class="nav-link sidebar-link sidebar-page" aria-label="åšå®¢ä¸»é¡µ"><span class="font-icon icon iconfont icon-home" style=""></span>åšå®¢ä¸»é¡µ<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><section class="sidebar-group"><p class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-creative" style=""></span><a href="/guide/" class="title">å¦‚ä½•ä½¿ç”¨</a><!----></p><ul class="sidebar-links"></ul></section></li><li><section class="sidebar-group"><p class="sidebar-heading active"><span class="font-icon icon iconfont icon-note" style=""></span><span class="title">æ–‡æ¡£</span><!----></p><ul class="sidebar-links"><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Demo</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Git</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Io</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Linux</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Lua</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Mq</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Mybatis</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Mysql</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable active"><!----><span class="title">Spring</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a href="/other/spring/1.html" class="nav-link sidebar-link sidebar-page" aria-label="spring"><span class="font-icon icon iconfont icon-page" style=""></span>spring<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/other/spring/2.html" class="nav-link sidebar-link sidebar-page" aria-label="spring"><span class="font-icon icon iconfont icon-page" style=""></span>spring<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/other/spring/3.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="spring"><span class="font-icon icon iconfont icon-page" style=""></span>spring<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/other/spring/3.html#å¿«é€Ÿä¸Šæ‰‹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å¿«é€Ÿä¸Šæ‰‹"><!---->å¿«é€Ÿä¸Šæ‰‹<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/other/spring/3.html#æé€Ÿåˆ›å»ºé¡¹ç›®" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æé€Ÿåˆ›å»ºé¡¹ç›®"><!---->æé€Ÿåˆ›å»ºé¡¹ç›®<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/other/spring/3.html#å¸¸ç”¨æ¨¡å—å¿«é€Ÿæ•´åˆ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å¸¸ç”¨æ¨¡å—å¿«é€Ÿæ•´åˆ"><!---->å¸¸ç”¨æ¨¡å—å¿«é€Ÿæ•´åˆ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/other/spring/3.html#è‡ªå®šä¹‰è¿è¡Œå™¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="è‡ªå®šä¹‰è¿è¡Œå™¨"><!---->è‡ªå®šä¹‰è¿è¡Œå™¨<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/other/spring/3.html#é…ç½®æ–‡ä»¶ä»‹ç»" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="é…ç½®æ–‡ä»¶ä»‹ç»"><!---->é…ç½®æ–‡ä»¶ä»‹ç»<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/other/spring/3.html#è½»æ¾æ‰“åŒ…è¿è¡Œ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="è½»æ¾æ‰“åŒ…è¿è¡Œ"><!---->è½»æ¾æ‰“åŒ…è¿è¡Œ<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/other/spring/3.html#æ—¥å¿—ç³»ç»Ÿä»‹ç»" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ—¥å¿—ç³»ç»Ÿä»‹ç»"><!---->æ—¥å¿—ç³»ç»Ÿä»‹ç»<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/other/spring/3.html#æ—¥å¿—é—¨é¢å’Œæ—¥å¿—å®ç°" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ—¥å¿—é—¨é¢å’Œæ—¥å¿—å®ç°"><!---->æ—¥å¿—é—¨é¢å’Œæ—¥å¿—å®ç°<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/other/spring/3.html#æ‰“å°é¡¹ç›®æ—¥å¿—ä¿¡æ¯" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ‰“å°é¡¹ç›®æ—¥å¿—ä¿¡æ¯"><!---->æ‰“å°é¡¹ç›®æ—¥å¿—ä¿¡æ¯<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/other/spring/3.html#é…ç½®logbackæ—¥å¿—" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="é…ç½®Logbackæ—¥å¿—"><!---->é…ç½®Logbackæ—¥å¿—<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/other/spring/3.html#è‡ªå®šä¹‰bannerå±•ç¤º" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="è‡ªå®šä¹‰Bannerå±•ç¤º"><!---->è‡ªå®šä¹‰Bannerå±•ç¤º<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/other/spring/3.html#å¤šç¯å¢ƒé…ç½®" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å¤šç¯å¢ƒé…ç½®"><!---->å¤šç¯å¢ƒé…ç½®<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/other/spring/3.html#å¸¸ç”¨æ¡†æ¶ä»‹ç»" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å¸¸ç”¨æ¡†æ¶ä»‹ç»"><!---->å¸¸ç”¨æ¡†æ¶ä»‹ç»<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/other/spring/3.html#é‚®ä»¶å‘é€æ¨¡å—" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="é‚®ä»¶å‘é€æ¨¡å—"><!---->é‚®ä»¶å‘é€æ¨¡å—<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/other/spring/3.html#æ¥å£è§„åˆ™æ ¡éªŒ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ¥å£è§„åˆ™æ ¡éªŒ"><!---->æ¥å£è§„åˆ™æ ¡éªŒ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/other/spring/3.html#æ¥å£æ–‡æ¡£ç”Ÿæˆ-é€‰å­¦" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ¥å£æ–‡æ¡£ç”Ÿæˆï¼ˆé€‰å­¦ï¼‰"><!---->æ¥å£æ–‡æ¡£ç”Ÿæˆï¼ˆé€‰å­¦ï¼‰<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/other/spring/3.html#é¡¹ç›®è¿è¡Œç›‘æ§-é€‰å­¦" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="é¡¹ç›®è¿è¡Œç›‘æ§ï¼ˆé€‰å­¦ï¼‰"><!---->é¡¹ç›®è¿è¡Œç›‘æ§ï¼ˆé€‰å­¦ï¼‰<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/other/spring/3.html#å®ç°åŸç†æ¢ç©¶-é€‰å­¦" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å®ç°åŸç†æ¢ç©¶ï¼ˆé€‰å­¦ï¼‰"><!---->å®ç°åŸç†æ¢ç©¶ï¼ˆé€‰å­¦ï¼‰<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/other/spring/3.html#å¯åŠ¨åŸç†ä¸å®ç°" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å¯åŠ¨åŸç†ä¸å®ç°"><!---->å¯åŠ¨åŸç†ä¸å®ç°<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/other/spring/3.html#è‡ªåŠ¨é…ç½®åŸç†" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="è‡ªåŠ¨é…ç½®åŸç†"><!---->è‡ªåŠ¨é…ç½®åŸç†<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/other/spring/3.html#è‡ªå®šä¹‰starteré¡¹ç›®" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="è‡ªå®šä¹‰Starteré¡¹ç›®"><!---->è‡ªå®šä¹‰Starteré¡¹ç›®<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li><li><!--[--><a href="/other/spring/4.html" class="nav-link sidebar-link sidebar-page" aria-label="spring"><span class="font-icon icon iconfont icon-page" style=""></span>spring<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/other/spring/5.html" class="nav-link sidebar-link sidebar-page" aria-label="spring"><span class="font-icon icon iconfont icon-page" style=""></span>spring<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/other/spring/6.html" class="nav-link sidebar-link sidebar-page" aria-label="spring"><span class="font-icon icon iconfont icon-page" style=""></span>spring<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li></ul></section></li><li><!--[--><a href="/intro.html" class="nav-link sidebar-link sidebar-page" aria-label="ä¸ªäººä¿¡æ¯"><span class="font-icon icon iconfont icon-info" style=""></span>ä¸ªäººä¿¡æ¯<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/slides.html" class="nav-link sidebar-link sidebar-page" aria-label="å¹»ç¯ç‰‡é¡µ"><span class="font-icon icon iconfont icon-slides" style=""></span>å¹»ç¯ç‰‡é¡µ<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><section class="sidebar-group"><p class="sidebar-heading"><span class="font-icon icon iconfont icon-note" style=""></span><span class="title">æµ‹è¯•å‘ç–¯</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/strawberry.html" class="nav-link sidebar-link sidebar-page" aria-label="è‰è“"><span class="font-icon icon iconfont icon-edit" style=""></span>è‰è“<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/tomato.html" class="nav-link sidebar-link sidebar-page" aria-label="ç•ªèŒ„"><span class="font-icon icon iconfont icon-edit" style=""></span>ç•ªèŒ„<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/dragonfruit.html" class="nav-link sidebar-link sidebar-page" aria-label="ç«é¾™æœ"><span class="font-icon icon iconfont icon-edit" style=""></span>ç«é¾™æœ<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/cherry.html" class="nav-link sidebar-link sidebar-page" aria-label="æ¨±æ¡ƒ"><span class="font-icon icon iconfont icon-edit" style=""></span>æ¨±æ¡ƒ<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Apple</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">Banana</span><span class="arrow right"></span></button><!----></section></li></ul></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><span class="font-icon icon iconfont icon-page" style=""></span>spring</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">xss</span></span><span property="author" content="xss"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-12-11T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 67 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT67M"></span><span class="page-category-info" aria-label="åˆ†ç±»ğŸŒˆ" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><span class="page-category-item category5 clickable" role="navigation">spring</span><meta property="articleSection" content="spring"></span><span class="page-tag-info" aria-label="æ ‡ç­¾ğŸ·" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><span class="page-tag-item tag5 clickable" role="navigation">spring</span><meta property="keywords" content="spring"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">æ­¤é¡µå†…å®¹<button class="print-button" title="print"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/other/spring/3.html#å¿«é€Ÿä¸Šæ‰‹" class="router-link-active router-link-exact-active toc-link level2">å¿«é€Ÿä¸Šæ‰‹</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/other/spring/3.html#æé€Ÿåˆ›å»ºé¡¹ç›®" class="router-link-active router-link-exact-active toc-link level3">æé€Ÿåˆ›å»ºé¡¹ç›®</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/other/spring/3.html#å¸¸ç”¨æ¨¡å—å¿«é€Ÿæ•´åˆ" class="router-link-active router-link-exact-active toc-link level3">å¸¸ç”¨æ¨¡å—å¿«é€Ÿæ•´åˆ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/other/spring/3.html#è‡ªå®šä¹‰è¿è¡Œå™¨" class="router-link-active router-link-exact-active toc-link level3">è‡ªå®šä¹‰è¿è¡Œå™¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/other/spring/3.html#é…ç½®æ–‡ä»¶ä»‹ç»" class="router-link-active router-link-exact-active toc-link level3">é…ç½®æ–‡ä»¶ä»‹ç»</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/other/spring/3.html#è½»æ¾æ‰“åŒ…è¿è¡Œ" class="router-link-active router-link-exact-active toc-link level3">è½»æ¾æ‰“åŒ…è¿è¡Œ</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/other/spring/3.html#æ—¥å¿—ç³»ç»Ÿä»‹ç»" class="router-link-active router-link-exact-active toc-link level2">æ—¥å¿—ç³»ç»Ÿä»‹ç»</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/other/spring/3.html#æ—¥å¿—é—¨é¢å’Œæ—¥å¿—å®ç°" class="router-link-active router-link-exact-active toc-link level3">æ—¥å¿—é—¨é¢å’Œæ—¥å¿—å®ç°</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/other/spring/3.html#æ‰“å°é¡¹ç›®æ—¥å¿—ä¿¡æ¯" class="router-link-active router-link-exact-active toc-link level3">æ‰“å°é¡¹ç›®æ—¥å¿—ä¿¡æ¯</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/other/spring/3.html#é…ç½®logbackæ—¥å¿—" class="router-link-active router-link-exact-active toc-link level3">é…ç½®Logbackæ—¥å¿—</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/other/spring/3.html#è‡ªå®šä¹‰bannerå±•ç¤º" class="router-link-active router-link-exact-active toc-link level3">è‡ªå®šä¹‰Bannerå±•ç¤º</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/other/spring/3.html#å¤šç¯å¢ƒé…ç½®" class="router-link-active router-link-exact-active toc-link level2">å¤šç¯å¢ƒé…ç½®</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/other/spring/3.html#å¸¸ç”¨æ¡†æ¶ä»‹ç»" class="router-link-active router-link-exact-active toc-link level2">å¸¸ç”¨æ¡†æ¶ä»‹ç»</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/other/spring/3.html#é‚®ä»¶å‘é€æ¨¡å—" class="router-link-active router-link-exact-active toc-link level3">é‚®ä»¶å‘é€æ¨¡å—</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/other/spring/3.html#æ¥å£è§„åˆ™æ ¡éªŒ" class="router-link-active router-link-exact-active toc-link level3">æ¥å£è§„åˆ™æ ¡éªŒ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/other/spring/3.html#æ¥å£æ–‡æ¡£ç”Ÿæˆ-é€‰å­¦" class="router-link-active router-link-exact-active toc-link level3">æ¥å£æ–‡æ¡£ç”Ÿæˆï¼ˆé€‰å­¦ï¼‰</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/other/spring/3.html#é¡¹ç›®è¿è¡Œç›‘æ§-é€‰å­¦" class="router-link-active router-link-exact-active toc-link level3">é¡¹ç›®è¿è¡Œç›‘æ§ï¼ˆé€‰å­¦ï¼‰</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/other/spring/3.html#å®ç°åŸç†æ¢ç©¶-é€‰å­¦" class="router-link-active router-link-exact-active toc-link level2">å®ç°åŸç†æ¢ç©¶ï¼ˆé€‰å­¦ï¼‰</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/other/spring/3.html#å¯åŠ¨åŸç†ä¸å®ç°" class="router-link-active router-link-exact-active toc-link level3">å¯åŠ¨åŸç†ä¸å®ç°</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/other/spring/3.html#è‡ªåŠ¨é…ç½®åŸç†" class="router-link-active router-link-exact-active toc-link level3">è‡ªåŠ¨é…ç½®åŸç†</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/other/spring/3.html#è‡ªå®šä¹‰starteré¡¹ç›®" class="router-link-active router-link-exact-active toc-link level3">è‡ªå®šä¹‰Starteré¡¹ç›®</a></li><!----><!--]--></ul><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><figure><img src="https://s2.loli.net/2023/07/10/VBkHuWr83jzpnXe.png" alt="image-20230710170222399" tabindex="0" loading="lazy"><figcaption>image-20230710170222399</figcaption></figure><h1 id="èµ°è¿›springbootä¸€ç«™å¼å¼€å‘" tabindex="-1"><a class="header-anchor" href="#èµ°è¿›springbootä¸€ç«™å¼å¼€å‘" aria-hidden="true">#</a> èµ°è¿›SpringBootä¸€ç«™å¼å¼€å‘</h1><p><strong>å‰ç½®è¯¾ç¨‹ï¼š</strong>ã€ŠSpring6æ ¸å¿ƒå†…å®¹ã€‹ã€ŠSpringMvc6ã€‹ã€ŠSpringSecurity6ã€‹ã€ŠJava-9-17æ–°ç‰¹æ€§ç¯‡ã€‹</p><p>**æé†’ï¼š**æœ‰äº›å°ä¼™ä¼´å¥½å¥‡èƒ½ä¸èƒ½ä¸å­¦SSMç›´æ¥SpringBootï¼Œè¿™é‡Œå£°æ˜ä¸€ä¸‹ï¼ŒSpringBootåªæ˜¯ç”¨äºå¿«é€Ÿåˆ›å»ºSSMé¡¹ç›®çš„è„šæ‰‹æ¶ï¼Œå°±åƒæ˜¯ä¸ªå¤–å£³ä¸€æ ·ï¼Œç¦»å¼€äº†SSMæ ¸å¿ƒå†…å®¹å°±æ˜¯ä¸ªç©ºå£³ï¼Œä¸è¦æœ¬æœ«å€’ç½®äº†ã€‚</p><p>Spring Bootè®©æ‚¨å¯ä»¥è½»æ¾åœ°åˆ›å»ºç‹¬ç«‹çš„ã€ç”Ÿäº§çº§åˆ«çš„Springåº”ç”¨ç¨‹åºï¼Œå¹¶â€œç›´æ¥è¿è¡Œâ€è¿™äº›åº”ç”¨ç¨‹åºã€‚SpringBootä¸ºå¤§é‡çš„ç¬¬ä¸‰æ–¹åº“æ·»åŠ äº†æ”¯æŒï¼Œèƒ½å¤Ÿåšåˆ°å¼€ç®±å³ç”¨ï¼Œç®€åŒ–å¤§é‡ç¹çé…ç½®ï¼Œç”¨æœ€å°‘çš„é…ç½®å¿«é€Ÿæ„å»ºä½ æƒ³è¦çš„é¡¹ç›®ã€‚åœ¨2023å¹´ï¼ŒSpringBootè¿æ¥äº†å®ƒçš„ç¬¬ä¸‰ä¸ªå¤§ç‰ˆæœ¬ï¼Œéšç€SpringBoot 3çš„æ­£å¼å‘å¸ƒï¼Œæ•´ä¸ªç”Ÿæ€ä¹Ÿè¿æ¥äº†ä¸€æ¬¡é‡å¤§é©æ–°ã€‚</p><p>ç›®å‰çš„æœ€æ–°ç‰ˆæœ¬ä»¥åŠå¯¹åº”çš„ç»´æŠ¤æƒ…å†µï¼š</p><figure><img src="https://s2.loli.net/2023/07/10/qnjY5MdRrOemFaQ.png" alt="image-20230710174659973" tabindex="0" loading="lazy"><figcaption>image-20230710174659973</figcaption></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œæ›¾ç»çš„SpringBoot 2.5ç‰ˆæœ¬å°†ä¼šåœ¨2023å¹´8æœˆåº•ç»ˆæ­¢å•†ä¸šæ”¯æŒï¼Œå±Šæ—¶å°†ä¸ä¼šå†å¯¹è¿™ç±»æ—§ç‰ˆæœ¬è¿›è¡Œä»»ä½•ç»´æŠ¤ï¼Œå› æ­¤ï¼Œå°†æˆ‘ä»¬çš„è€ç‰ˆæœ¬SpringBooté¡¹ç›®è¿›è¡Œå‡çº§å·²ç»è¿«åœ¨çœ‰ç«ï¼Œç›®å‰æœ€å¼ºçš„3.1æ­£å¼ç‰ˆä¼šç»´æŠ¤åˆ°2025å¹´ä¸­æ—¬ã€‚</p><p>åœ¨3.Xä¹‹åçš„å˜åŒ–ç›¸æ¯”2.Xå¯ä»¥è¯´æ˜¯ç›¸å½“å¤§ï¼Œå°¤å…¶æ˜¯å…¶ç”Ÿæ€ä¸‹çš„SpringSecurityæ¡†æ¶ï¼Œæ—§ç‰ˆæœ¬é¡¹ç›®åœ¨å‡çº§ä¹‹åAPIå·²ç»å®Œå…¨å‘ç”Ÿæ”¹å˜ï¼›ä»¥åŠå†…ç½®TomcatæœåŠ¡å™¨çš„å‡çº§ï¼ŒServletä¹Ÿå‡çº§åˆ°5ä»¥ä¸Šï¼Œä»<code>javax</code>å…¨æ–°å‡çº§åˆ°<code>jakarta</code>æ–°åŒ…åï¼›åŒ…æ‹¬åœ¨3.Xå¾—åˆ°çš„å¤§é‡æ–°ç‰¹æ€§ï¼Œå¦‚æ”¯æŒGraalVMæ‰“åŒ…æœ¬åœ°é•œåƒè¿è¡Œç­‰ï¼›å¹¶ä¸”Javaç‰ˆæœ¬ä¹Ÿå¼ºåˆ¶è¦æ±‚ä¸º17ç‰ˆæœ¬ã€‚è¿ç§»åˆ°æ–°ç‰ˆæœ¬ä¸ä»…å¯ä»¥äº«å—åˆ°å…è´¹ç»´æŠ¤æ”¯æŒï¼Œä¹Ÿå¯ä»¥æ„Ÿå—Java17å¸¦æ¥çš„å…¨æ–°ä½“éªŒã€‚</p><p>ä»‹ç»äº†è¿™ä¹ˆå¤šï¼Œæˆ‘ä»¬é¦–å…ˆè¿˜æ˜¯æ¥çœ‹çœ‹SpringBootåŠŸèƒ½æœ‰å“ªäº›ï¼š</p><ul><li>èƒ½å¤Ÿåˆ›å»ºç‹¬ç«‹çš„Springåº”ç”¨ç¨‹åº</li><li>å†…åµŒTomcatã€Jettyæˆ–UndertowæœåŠ¡å™¨ï¼ˆæ— éœ€å•ç‹¬éƒ¨ç½²WARåŒ…ï¼Œæ‰“åŒ…æˆJaræœ¬èº«å°±æ˜¯ä¸€ä¸ªå¯ä»¥è¿è¡Œçš„åº”ç”¨ç¨‹åºï¼‰</li><li>æä¾›ä¸€ç«™å¼çš„â€œstarterâ€ä¾èµ–é¡¹ï¼Œä»¥ç®€åŒ–Mavené…ç½®ï¼ˆéœ€è¦æ•´åˆä»€ä¹ˆæ¡†æ¶ï¼Œç›´æ¥å¯¼å¯¹åº”æ¡†æ¶çš„starterä¾èµ–ï¼‰</li><li>å°½å¯èƒ½è‡ªåŠ¨é…ç½®Springå’Œç¬¬ä¸‰æ–¹åº“ï¼ˆé™¤éç‰¹æ®Šæƒ…å†µï¼Œå¦åˆ™å‡ ä¹ä¸éœ€è¦è¿›è¡Œä»»ä½•é…ç½®ï¼‰</li><li>æä¾›ç”Ÿäº§ç¯å¢ƒä¸‹ç›¸å…³åŠŸèƒ½ï¼Œå¦‚æŒ‡æ ‡ã€è¿è¡ŒçŠ¶å†µæ£€æŸ¥å’Œå¤–éƒ¨åŒ–é…ç½®</li><li>æ²¡æœ‰ä»»ä½•ä»£ç ç”Ÿæˆï¼Œä¹Ÿä¸éœ€è¦ä»»ä½•XMLé…ç½®ï¼ˆXMLæ˜¯ä»€ä¹ˆï¼Œå¥½åƒå—ï¼‰</li></ul><p>SpringBootæ˜¯ç°åœ¨æœ€ä¸»æµçš„å¼€å‘æ¡†æ¶ï¼Œå›½å†…çš„å…¬å¸åŸºæœ¬éƒ½åœ¨ä½¿ç”¨ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬å‡ºå»æ‰¾å·¥ä½œä¸€å®šè¦ä¼šçš„æ¡†æ¶ï¼Œå®ƒæä¾›äº†ä¸€ç«™å¼çš„å¼€å‘ä½“éªŒï¼Œèƒ½å¤Ÿå¤§å¹…åº¦æé«˜æˆ‘ä»¬çš„å¼€å‘æ•ˆç‡ã€‚</p><figure><img src="https://s2.loli.net/2022/11/22/hDGo7m9uBlgVn5A.png" alt="image-20221122175719997" tabindex="0" loading="lazy"><figcaption>image-20221122175719997</figcaption></figure><p>åœ¨SSMé˜¶æ®µï¼Œå½“æˆ‘ä»¬éœ€è¦æ­å»ºä¸€ä¸ªåŸºäºSpringå…¨å®¶æ¡¶çš„Webåº”ç”¨ç¨‹åºæ—¶ï¼Œæˆ‘ä»¬ä¸å¾—ä¸åšå¤§é‡çš„ä¾èµ–å¯¼å…¥å’Œæ¡†æ¶æ•´åˆç›¸å…³çš„Beanå®šä¹‰ï¼Œå…‰æ˜¯æ•´åˆæ¡†æ¶å°±èŠ±è´¹äº†æˆ‘ä»¬å¤§é‡çš„æ—¶é—´ï¼Œä½†æ˜¯å®é™…ä¸Šæˆ‘ä»¬å‘ç°ï¼Œæ•´åˆæ¡†æ¶å…¶å®åŸºæœ¬éƒ½æ˜¯ä¸€äº›å›ºå®šæµç¨‹ï¼Œæˆ‘ä»¬æ¯åˆ›å»ºä¸€ä¸ªæ–°çš„Webåº”ç”¨ç¨‹åºï¼ŒåŸºæœ¬éƒ½ä¼šä½¿ç”¨åŒæ ·çš„æ–¹å¼å»æ•´åˆæ¡†æ¶ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥å°†ä¸€äº›é‡å¤çš„é…ç½®ä½œä¸ºçº¦å®šï¼Œåªè¦æ¡†æ¶éµå®ˆè¿™ä¸ªçº¦å®šï¼Œä¸ºæˆ‘ä»¬æä¾›é»˜è®¤çš„é…ç½®å°±å¥½ï¼Œè¿™æ ·å°±ä¸ç”¨æˆ‘ä»¬å†å»é…ç½®äº†ï¼Œçº¦å®šä¼˜äºé…ç½®ï¼</p><p>è€ŒSpringBootæ­£æ˜¯å°†è¿™äº›è¿‡ç¨‹å¤§å¹…åº¦è¿›è¡Œäº†ç®€åŒ–ï¼Œå®ƒå¯ä»¥è‡ªåŠ¨è¿›è¡Œé…ç½®ï¼Œæˆ‘ä»¬åªéœ€è¦å¯¼å…¥å¯¹åº”çš„å¯åŠ¨å™¨ï¼ˆstarterï¼‰ä¾èµ–å³å¯ã€‚</p><hr><p>å®Œæˆæœ¬é˜¶æ®µçš„å­¦ä¹ ï¼ŒåŸºæœ¬èƒ½å¤Ÿèƒœä»»éƒ¨åˆ†ç½‘ç«™ç³»ç»Ÿçš„åç«¯å¼€å‘å·¥ä½œï¼Œä¹Ÿå»ºè®®åŒå­¦ä»¬å­¦ä¹ å®ŒSpringBootä¹‹åå¯»æ‰¾åˆé€‚çš„é˜Ÿå‹å»å‚åŠ è®¡ç®—æœºç›¸å…³çš„é«˜æ ¡ç«èµ›ï¼Œè¿™é‡Œæœ‰ä¸€äº›æ¨èï¼š</p><p><strong>é¡¹ç›®ç±»ï¼š</strong></p><p>**å»ºè®®ï¼š**æŒ‰ç…§ç›®å‰å›½å†…çš„ç¯å¢ƒï¼Œé¡¹ç›®ç±»ç«èµ›å¹¶ä¸ä¼šæ³¨é‡ä½ ç¼–ç æ°´å¹³æœ‰å¤šç‰›ï¼Œä¹Ÿä¸ä¼šæ³¨é‡ä½ çš„é¡¹ç›®ç”¨åˆ°äº†å¤šç‰›çš„æŠ€æœ¯ï¼Œè¿™äº›è¯„å§”è€å¸ˆæŠ€æœ¯æ€ä¹ˆæ ·æˆ‘ä¸å¤šè¯´ï¼Œä»–ä»¬åªä¼šåœ¨ä¹ä½ é¡¹ç›®åˆ¶ä½œçš„åŠŸèƒ½æ€ä¹ˆæ ·ï¼Œå±•ç¤ºæ•ˆæœæ€ä¹ˆæ ·ï¼Œæœ‰æ²¡æœ‰ä»€ä¹ˆåˆ›æ–°ç‚¹ï¼Œè‡³äºå…¶ä»–çš„ï¼Œå“ªæ€•ä»£ç å†™æˆä¸€å¨å±éƒ½ä¸ä¼šç®¡ä½ ã€‚å¹¶ä¸”é¡¹ç›®æœ€å¥½æ˜¯æœ‰ä¸“åˆ©è¯ä¹¦æˆ–è€…è½¯è‘—ï¼Œå°¤å…¶æ˜¯ä¼ä¸šåˆä½œé¡¹ç›®ï¼Œå·²ç»æŠ•å…¥ç”Ÿäº§çš„ï¼Œç‰¹åˆ«åƒé¦™ã€‚å¦‚æœä½ æ˜¯ç™½æ‰‹èµ·å®¶çš„é¡¹ç›®ï¼Œå³ä½¿ä½ å†åŠªåŠ›åœ°å»åšï¼Œä¹Ÿä¸å¯èƒ½æ‰“å¾—è¿‡äººå®¶å¼ºå¤§çš„é¡¹ç›®èƒŒæ™¯ã€‚</p><table><thead><tr><th>æ¯”èµ›åç§°</th><th>éš¾åº¦</th><th>å«é‡‘é‡</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>åˆ›æ–°åˆ›ä¸šå¤§èµ›</td><td>â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸</td><td>â­ï¸â­ï¸â­ï¸â­ï¸</td><td>è¿™æ¯”èµ›æ²¡ç‚¹èƒŒæ™¯å¾ˆéš¾ï¼Œæœ€å¥½æ˜¯ä¸“åˆ©é¡¹ç›®æˆ–æ˜¯ä¼ä¸šåˆä½œé¡¹ç›®</td></tr><tr><td>æŒ‘æˆ˜æ¯</td><td>â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸</td><td>â­ï¸â­ï¸â­ï¸â­ï¸</td><td>ç½‘ä¼ è¿™æ˜¯PPTå¤§èµ›ï¼Œä¸çŸ¥çœŸå®æ€§å¦‚ä½•</td></tr><tr><td>ä¸­å›½å¤§å­¦ç”Ÿè®¡ç®—æœºè®¾è®¡å¤§èµ›</td><td>â­ï¸â­ï¸â­ï¸</td><td>â­ï¸â­ï¸â­ï¸</td><td>è¿™ä¸ªæ¯”èµ›ç›¸å¯¹æ¥è¯´æ¯”è¾ƒå¥½æ‹¿å¥–ï¼Œé¡¹ç›®ä¸€å®šè¦æœ‰äº®ç‚¹</td></tr></tbody></table><p><strong>ç®—æ³•ç±»ï¼š</strong></p><p>**å»ºè®®ï¼š**è¿™ç§ç«èµ›è¶Šæ—©å¼€å§‹åŸ¹å…»è¶Šå¥½ï¼Œå› ä¸ºè¦èƒŒå¾ˆå¤šçš„é¢˜æ¿å’Œç®—æ³•ï¼Œå¾ˆå¤šäººéƒ½æ˜¯åˆä¸­æˆ–è€…é«˜ä¸­å°±å¼€å§‹æ‰“ç«èµ›äº†ï¼Œåƒå›¢é˜Ÿç±»å‹çš„ç«èµ›ï¼Œå¦‚æœè‡ªå·±æ¯”è¾ƒèœï¼Œå°±å»æ‰¾å¤§ä½¬æŠ±å¤§è…¿å§ï¼Œåä¸ªè‡­çš®åŒ éƒ½é¡¶ä¸äº†è¯¸è‘›äº®ï¼›ä¸ªäººç±»å‹çš„ç«èµ›ä¹Ÿè¦å¤šåˆ·åŠ›æ‰£ï¼Œå¤šèƒŒç®—æ³•é¢˜ï¼Œä¸´æ—¶æŠ±ä½›è„šä¹Ÿæ˜¯æ²¡æœ‰ç”¨çš„ã€‚</p><table><thead><tr><th>æ¯”èµ›åç§°</th><th>éš¾åº¦</th><th>å«é‡‘é‡</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>è“æ¡¥æ¯</td><td>â­ï¸â­ï¸â­ï¸</td><td>â­ï¸â­ï¸â­ï¸</td><td>è“æ¡¥æ¯å»ºè®®å‚åŠ å‰ç«¯/Javaç»„ï¼Œç¨å¾®ç®€å•ä¸€ç‚¹ï¼Œå»C++å°±æ˜¯æ‰¾æ­»</td></tr><tr><td>CCPC å¤©æ¢¯èµ›</td><td>â­ï¸â­ï¸â­ï¸â­ï¸</td><td>â­ï¸â­ï¸â­ï¸â­ï¸</td><td>ä¸å¤šè¯´</td></tr><tr><td>ICPC ACM å¤§å­¦ç”Ÿç¨‹åºè®¾è®¡ç«èµ›</td><td>â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸</td><td>â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸</td><td>è¿™ä¸ªéš¾åº¦éå¸¸å¤§ï¼Œæœ€å¥½æ˜¯æœ‰å¤§ä½¬å¸¦ï¼Œé è‡ªå·±æ…¢æ…¢å»å­¦å¾ˆéš¾</td></tr></tbody></table><p>æ‰“ç«èµ›çš„è¿‡ç¨‹æ˜¯å¾ˆè¾›è‹¦çš„ï¼Œä»˜å‡ºå¾ˆæœ‰å¯èƒ½æ²¡æœ‰å›æŠ¥ï¼Œå¾ˆå¤šç«èµ›æ²¡æœ‰ç»å¯¹çš„å…¬å¹³ï¼Œå¤šå¤šå°‘å°‘æœ‰ä¸€äº›åˆ©ç›Šå…³ç³»åœ¨é‡Œé¢ï¼Œä½†æ˜¯å¤šå‚åŠ ä¸€äº›ç«èµ›å“ªæ€•æ²¡æœ‰å¾—å¥–ï¼Œè¿˜æ˜¯å¯ä»¥æ”¶è·åˆ°å¾ˆå¤šçš„ï¼Œå¦‚æœä½ é€šè¿‡è¿™äº›æ¯”èµ›å­¦åˆ°äº†å¾ˆå¤šï¼Œå®é™…ä¸Šå¾—ä¸å¾—å¥–å·²ç»ä¸é‡è¦äº†ï¼Œè‡ªå·±å†…å¿ƒçš„å¼ºå¤§çš„æ‰æ˜¯çœŸæ­£çš„å¼ºå¤§ã€‚</p><hr><h2 id="å¿«é€Ÿä¸Šæ‰‹" tabindex="-1"><a class="header-anchor" href="#å¿«é€Ÿä¸Šæ‰‹" aria-hidden="true">#</a> å¿«é€Ÿä¸Šæ‰‹</h2><p>è¦æ„Ÿå—SpringBootå¸¦æ¥çš„å¿«é€Ÿå¼€å‘ä½“éªŒï¼Œæˆ‘ä»¬å°±ä»åˆ›å»ºä¸€ä¸ªé¡¹ç›®å¼€å§‹ã€‚</p><h3 id="æé€Ÿåˆ›å»ºé¡¹ç›®" tabindex="-1"><a class="header-anchor" href="#æé€Ÿåˆ›å»ºé¡¹ç›®" aria-hidden="true">#</a> æé€Ÿåˆ›å»ºé¡¹ç›®</h3><p>åœ¨è¿‡å»ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªSSMé¡¹ç›®ï¼Œéœ€è¦å…ˆå¯¼å…¥å„ç§ä¾èµ–ï¼Œè¿›è¡Œå¤§é‡çš„é…ç½®ï¼Œè€Œç°åœ¨ï¼Œæœ‰äº†SpringBootï¼Œæˆ‘ä»¬å¯ä»¥äº«å—è¶…å¿«çš„é¡¹ç›®åˆ›å»ºä½“éªŒï¼Œåªéœ€è¦å‰å¾€å®˜ç½‘è¿›è¡Œå°‘é‡é…ç½®å°±èƒ½å¿«é€Ÿä¸ºä½ ç”Ÿæˆä¸€ä¸ªSpringBooté¡¹ç›®æ¨¡ç‰ˆï¼š<a href="https://start.spring.io/" target="_blank" rel="noopener noreferrer">https://start.spring.io/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><figure><img src="https://s2.loli.net/2023/07/11/V6lBrtp5QvbPyKk.png" alt="image-20230711124041648" tabindex="0" loading="lazy"><figcaption>image-20230711124041648</figcaption></figure><p>ä¸è¿‡ï¼Œä¸ºäº†æ–¹ä¾¿ï¼ŒIDEAå·²ç»å°†è¿™ä¸ªå·¥å…·é›†æˆåˆ°å†…éƒ¨äº†ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨IDEAä¸­è¿›è¡Œåˆ›å»ºï¼Œæ•ˆæœæ˜¯ä¸€æ ·çš„ï¼Œé¦–å…ˆåœ¨æ–°å»ºé¡¹ç›®é˜¶æ®µï¼Œé€‰æ‹© Spring Initializr ç±»å‹ï¼š</p><figure><img src="https://s2.loli.net/2023/07/11/Ol3Tqh21V8pjyLW.png" alt="image-20230711124216094" tabindex="0" loading="lazy"><figcaption>image-20230711124216094</figcaption></figure><p>æ¥ç€æˆ‘ä»¬å°±å¯ä»¥é…ç½®é¡¹ç›®çš„è¯­è¨€ï¼Œå¹¶ä¸”é€‰æ‹©é¡¹ç›®éœ€è¦ä½¿ç”¨çš„æ¨¡å—ï¼Œè¿™é‡Œæˆ‘ä»¬ç®€å•é€‰æ‹©ä¸¤ä¸ªä¾èµ–ï¼š</p><figure><img src="https://s2.loli.net/2023/07/11/rzJblifUQomV4Ed.png" alt="image-20230711124332819" tabindex="0" loading="lazy"><figcaption>image-20230711124332819</figcaption></figure><p>å¦‚æœä¸€å¼€å§‹ä¸æ¸…æ¥šè‡ªå·±éœ€è¦å“ªäº›æ¨¡å—ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åç»­è‡ªå·±æ‰‹åŠ¨æ·»åŠ å¯¹åº”æ¨¡å—çš„starterä¾èµ–ï¼Œä½¿ç”¨éå¸¸ç®€å•ã€‚</p><p>é¡¹ç›®è‡ªåŠ¨ç”Ÿæˆä¹‹åï¼Œå¯ä»¥çœ‹åˆ°Springç›¸å…³çš„ä¾èµ–å·²ç»å…¨éƒ¨è‡ªåŠ¨å¯¼å…¥ï¼š</p><figure><img src="https://s2.loli.net/2023/07/11/2P9wIJGdYluk8Hz.png" alt="image-20230711124949017" tabindex="0" loading="lazy"><figcaption>image-20230711124949017</figcaption></figure><p>å¹¶ä¸”ä¹Ÿè‡ªåŠ¨ä¸ºæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªä¸»ç±»ç”¨äºè¿è¡Œæˆ‘ä»¬çš„SpringBooté¡¹ç›®ï¼š</p><figure><img src="https://s2.loli.net/2023/07/11/ZSAbwpurQKYDN6O.png" alt="image-20230711125025254" tabindex="0" loading="lazy"><figcaption>image-20230711125025254</figcaption></figure><p>æˆ‘ä»¬å¯ä»¥ä¸€é”®å¯åŠ¨æˆ‘ä»¬çš„SpringBooté¡¹ç›®ï¼š</p><figure><img src="https://s2.loli.net/2023/07/11/1YvbfCkoIWEBg4X.png" alt="image-20230711125447493" tabindex="0" loading="lazy"><figcaption>image-20230711125447493</figcaption></figure><p>åªä¸è¿‡ç”±äºæˆ‘ä»¬æ²¡æœ‰æ·»åŠ ä»»ä½•æœ‰ç”¨çš„æ¨¡å—ï¼Œä¹Ÿæ²¡æœ‰ç¼–å†™ä»€ä¹ˆæ“ä½œï¼Œå› æ­¤å¯åŠ¨ä¹‹åé¡¹ç›®å°±ç›´æ¥åœæ­¢äº†ã€‚</p><h3 id="å¸¸ç”¨æ¨¡å—å¿«é€Ÿæ•´åˆ" tabindex="-1"><a class="header-anchor" href="#å¸¸ç”¨æ¨¡å—å¿«é€Ÿæ•´åˆ" aria-hidden="true">#</a> å¸¸ç”¨æ¨¡å—å¿«é€Ÿæ•´åˆ</h3><p>å‰é¢æˆ‘ä»¬è¯´äº†ï¼ŒSpringBootçš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯çº¦å®šå¤§äºé…ç½®ï¼Œèƒ½åœ¨ä¸€å¼€å§‹é»˜è®¤çš„å°±ç›´æ¥é»˜è®¤ï¼Œä¸ç”¨æˆ‘ä»¬è‡ªå·±æ¥è¿›è¡Œé…ç½®ï¼Œæˆ‘ä»¬åªéœ€è¦é…ç½®æŸäº›ç‰¹æ®Šçš„éƒ¨åˆ†å³å¯ï¼Œè¿™ä¸€éƒ¨åˆ†æˆ‘ä»¬å°±æ¥è¯¦ç»†ä½“éªŒä¸€ä¸‹ã€‚</p><p>æˆ‘ä»¬æ¥å°è¯•å°†æˆ‘ä»¬ä¹‹å‰ä½¿ç”¨è¿‡çš„æ¨¡å—è¿›è¡Œä¸€ä¸‹å¿«é€Ÿæ•´åˆï¼Œå¯ä»¥çœ‹åˆ°åœ¨ä¸€å¼€å§‹çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ²¡æœ‰å‹¾é€‰å…¶ä»–çš„ä¾èµ–ï¼Œå› æ­¤è¿™é‡Œåªå¯¼å…¥äº†æœ€åŸºæœ¬çš„<code>spring-boot-starter</code>ä¾èµ–ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‰€æœ‰çš„SpringBootä¾èµ–éƒ½æ˜¯ä»¥starterçš„å½¢å¼å‘½åçš„ï¼Œä¹‹åæˆ‘ä»¬éœ€è¦å¯¼å…¥å…¶ä»–æ¨¡å—ä¹Ÿæ˜¯å¯¼å…¥<code>spring-boot-starter-xxxx</code>è¿™ç§åç§°æ ¼å¼çš„ä¾èµ–ã€‚</p><p>é¦–å…ˆæˆ‘ä»¬è¿˜æ˜¯ä»SpringMvcç›¸å…³ä¾èµ–å¼€å§‹ã€‚SpringBootä¸ºæˆ‘ä»¬æä¾›äº†åŒ…å«å†…ç½®TomcatæœåŠ¡å™¨çš„Webæ¨¡å—ï¼Œæˆ‘ä»¬åªéœ€è¦å¯¼å…¥ä¾èµ–å°±èƒ½ç›´æ¥è¿è¡ŒæœåŠ¡å™¨ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬ä¸éœ€è¦è¿›è¡Œä»»ä½•é…ç½®ï¼Œç›´æ¥ç‚¹å‡»å¯åŠ¨ï¼š</p><figure><img src="https://s2.loli.net/2023/07/11/Hz1dVPqpe3vJsuR.png" alt="image-20230711133113516" tabindex="0" loading="lazy"><figcaption>image-20230711133113516</figcaption></figure><p>å®ƒçœŸçš„åšåˆ°äº†å¼€ç®±å³ç”¨ï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥ç›´æ¥è®¿é—®è¿™ä¸ªç½‘ç«™ï¼š</p><figure><img src="https://s2.loli.net/2023/07/11/7GELtUH3Kj5ld1w.png" alt="image-20230711133224425" tabindex="0" loading="lazy"><figcaption>image-20230711133224425</figcaption></figure><p>å¯ä»¥çœ‹åˆ°æˆåŠŸå“åº”äº†404é¡µé¢ï¼Œç›¸æ¯”ä¹‹å‰çš„å¤§é‡é…ç½®ï¼Œå¯ä»¥è¯´æ–¹ä¾¿äº†å¾ˆå¤šï¼Œæˆ‘ä»¬åˆ°ç›®å‰ä¸ºæ­¢ä»…ä»…æ˜¯å¯¼å…¥äº†ä¸€ä¸ªä¾èµ–ï¼Œå°±å¯ä»¥åšåˆ°ç›´æ¥å¯åŠ¨æˆ‘ä»¬çš„WebæœåŠ¡å™¨å¹¶æ­£å¸¸è®¿é—®ã€‚</p><p>SpringBootæ”¯æŒè‡ªåŠ¨åŒ…æ‰«æï¼Œæˆ‘ä»¬ä¸éœ€è¦ç¼–å†™ä»»ä½•é…ç½®ï¼Œç›´æ¥åœ¨ä»»æ„è·¯å¾„ï¼ˆä½†æ˜¯ä¸èƒ½è·‘åˆ°ä¸»ç±»æ‰€åœ¨åŒ…å¤–é¢å»äº†ï¼‰ä¸‹åˆ›å»ºçš„ç»„ä»¶ï¼ˆå¦‚Controllerã€Serviceã€Componentã€Configurationç­‰ï¼‰éƒ½å¯ä»¥ç”Ÿæ•ˆï¼Œæ¯”å¦‚æˆ‘ä»¬è¿™é‡Œåˆ›å»ºä¸€ä¸ªæµ‹è¯•çš„Controllerè¯•è¯•çœ‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestController</span> <span class="token punctuation">{</span>
    
    <span class="token annotation punctuation">@ResponseBody</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Hello World&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é‡å¯ä¹‹åï¼Œå¯ä»¥çœ‹åˆ°ç›´æ¥å°±èƒ½è®¿é—®åˆ°ï¼Œè€Œè¿™æœŸé—´æˆ‘ä»¬åªæ˜¯åˆ›å»ºäº†å¯¹åº”çš„Controllerå´æ²¡æœ‰è¿›è¡Œä»»ä½•é…ç½®ï¼Œè¿™çœŸçš„å¤ªæ–¹ä¾¿äº†ï¼š</p><figure><img src="https://s2.loli.net/2023/07/13/2jrxoswhNpASPil.png" alt="image-20230713225914578" tabindex="0" loading="lazy"><figcaption>image-20230713225914578</figcaption></figure><p>åŒ…æ‹¬ä¸€ä¸ªå¯¹è±¡ç°åœ¨ä¹Ÿå¯ä»¥ç›´æ¥ä»¥JSONå½¢å¼è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œæ— éœ€ä»»ä½•é…ç½®ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> sid<span class="token punctuation">;</span>
    <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token class-name">String</span> sex<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@ResponseBody</span>
<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">Student</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">Student</span> student <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    student<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;å°æ˜&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    student<span class="token punctuation">.</span><span class="token function">setSex</span><span class="token punctuation">(</span><span class="token string">&quot;ç”·&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    student<span class="token punctuation">.</span><span class="token function">setSid</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> student<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>![image-20230715171140388](/Users/nagocoler/Library/Application Support/typora-user-images/image-20230715171140388.png)</p><p>æœ€åæµè§ˆå™¨èƒ½å¤Ÿç›´æ¥å¾—åˆ°<code>application/json</code>çš„å“åº”æ•°æ®ï¼Œå°±æ˜¯è¿™ä¹ˆæ–¹ä¾¿ï¼Œè¿™éƒ½å¾—å½’åŠŸäºSpringBootå¯¹åº”çš„startå¸®åŠ©æˆ‘ä»¬è‡ªåŠ¨å°†å¤„ç†JSONæ•°æ®çš„Converterè¿›è¡Œäº†é…ç½®ï¼Œæˆ‘ä»¬ä¸éœ€è¦å†å•ç‹¬å»é…ç½®Converteräº†ã€‚ä¸è¿‡SpringBootå®˜æ–¹é»˜è®¤ä½¿ç”¨çš„æ˜¯<code>Jackson</code>å’Œ<code>Gson</code> çš„HttpMessageConverteræ¥è¿›è¡Œé…ç½®ï¼Œä¸æ˜¯æˆ‘ä»¬ä¹‹å‰æ•™ç¨‹ä¸­ä½¿ç”¨çš„FastJSONæ¡†æ¶ã€‚</p><p>æˆ‘ä»¬æœ€åæ¥çœ‹çœ‹è¿™ä¸ªStartåŒ…å«äº†å“ªäº›ä¾èµ–ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.1.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>compile<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-json<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.1.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>compile<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-tomcat<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.1.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>compile<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>6.0.10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>compile<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-webmvc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>6.0.10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>compile<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é‡Œé¢åŒ…å«äº†ä»¥ä¸‹å†…å®¹ï¼š</p><ul><li>spring-boot-starter åŸºç¡€ä¾èµ–starter</li><li>spring-boot-starter-json é…ç½®JSONè½¬æ¢çš„starter</li><li>spring-boot-starter-tomcat å†…ç½®TomcatæœåŠ¡å™¨</li><li>spring-webã€spring-webmvc ä¸ç”¨å¤šè¯´äº†å§ï¼Œä¹‹å‰å·²ç»è®²è¿‡äº†</li></ul><p>å¦‚æœéœ€è¦åƒä¹‹å‰ä¸€æ ·æ·»åŠ WebMvcçš„é…ç½®ç±»ï¼Œæ–¹æ³•æ˜¯ä¸€æ ·çš„ï¼Œç›´æ¥åˆ›å»ºå³å¯ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//åªéœ€è¦æ·»åŠ Configurationç”¨äºæ³¨å†Œé…ç½®ç±»ï¼Œä¸éœ€è¦å…¶ä»–ä»»ä½•æ³¨è§£ï¼Œå·²ç»è‡ªåŠ¨é…ç½®å¥½äº†</span>
<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebConfiguration</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addInterceptors</span><span class="token punctuation">(</span><span class="token class-name">InterceptorRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        registry<span class="token punctuation">.</span><span class="token function">addInterceptor</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">HandlerInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">preHandle</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token class-name">HandlerInterceptor</span><span class="token punctuation">.</span><span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">preHandle</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬åœ¨SSMé˜¶æ®µç¼–å†™çš„å¤§é‡é…ç½®ï¼Œåˆ°ç°åœ¨å·²ç»å½»åº•ä¸éœ€è¦äº†ã€‚</p><p>åŒæ ·çš„ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹SpringSecurityæ¡†æ¶å¦‚ä½•è¿›è¡Œæ•´åˆï¼Œä¹Ÿæ˜¯éå¸¸ç®€å•ï¼Œæˆ‘ä»¬åªéœ€è¦ç›´æ¥å¯¼å…¥å³å¯ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-security<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯¼å…¥å®Œæˆåï¼Œå†æ¬¡è®¿é—®ç½‘ç«™ï¼Œå°±å¯ä»¥çœ‹åˆ°ç†Ÿæ‚‰çš„ç™»å½•ç•Œé¢äº†ï¼š</p><figure><img src="https://s2.loli.net/2023/07/15/1dJaDbqlyUgnFBt.png" alt="image-20230715182059681" tabindex="0" loading="lazy"><figcaption>image-20230715182059681</figcaption></figure><p>æˆ‘ä»¬æ²¡æœ‰è¿›è¡Œä»»ä½•é…ç½®ï¼Œè€Œæ˜¯å¯¹åº”çš„Starterå¸®åŠ©æˆ‘ä»¬å®Œæˆäº†é»˜è®¤çš„é…ç½®ï¼Œå¹¶ä¸”åœ¨å¯åŠ¨æ—¶ï¼Œå°±å·²ç»å¸®åŠ©æˆ‘ä»¬é…ç½®äº†ä¸€ä¸ªéšæœºå¯†ç çš„ç”¨æˆ·å¯ä»¥ç›´æ¥ç™»å½•ä½¿ç”¨ï¼š</p><figure><img src="https://s2.loli.net/2023/07/15/a4QbGBtMdZP6qec.png" alt="image-20230715182323772" tabindex="0" loading="lazy"><figcaption>image-20230715182323772</figcaption></figure><p>å¯†ç ç›´æ¥å±•ç¤ºåœ¨å¯åŠ¨æ—¥å¿—ä¸­ï¼Œè€Œé»˜è®¤ç”¨æˆ·åç§°ä¸º<code>user</code>æˆ‘ä»¬å¯ä»¥ç›´æ¥ç™»å½•ï¼š</p><figure><img src="https://s2.loli.net/2023/07/15/StwKT5JLdG3Vacv.png" alt="image-20230715182448770" tabindex="0" loading="lazy"><figcaption>image-20230715182448770</figcaption></figure><p>åŒæ ·æ²¡æœ‰è¿›è¡Œä»»ä½•é…ç½®ï¼Œæˆ‘ä»¬åªéœ€è¦æ·»åŠ å¯¹åº”çš„starterå°±èƒ½åšåˆ°å¼€ç®±å³ç”¨ï¼Œå¹¶ä¸”å†…ç½®ä¸€å¥—é»˜è®¤é…ç½®ï¼Œè‡ªåŠ¨å¸®åŠ©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæµ‹è¯•ç”¨æˆ·ï¼Œæ–¹ä¾¿æˆ‘ä»¬å¿«é€Ÿæ­å»ºé¡¹ç›®ï¼ŒåŒæ ·çš„ï¼Œå¦‚æœè¦è¿›è¡Œé¢å¤–é…ç½®ï¼Œæˆ‘ä»¬åªéœ€è¦ç›´æ¥æ·»åŠ é…ç½®ç±»å³å¯ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//ä¾ç„¶åªéœ€è¦Configurationæ³¨è§£å³å¯ï¼Œä¸éœ€è¦å…¶ä»–é…ç½®</span>
<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SecurityConfiguration</span> <span class="token punctuation">{</span>

  	<span class="token comment">//é…ç½®æ–¹å¼è·Ÿä¹‹å‰SSMé˜¶æ®µæ˜¯ä¸€æ ·çš„</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">SecurityFilterChain</span> <span class="token function">filterChain</span><span class="token punctuation">(</span><span class="token class-name">HttpSecurity</span> http<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> http
                <span class="token punctuation">.</span><span class="token function">authorizeHttpRequests</span><span class="token punctuation">(</span>auth <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
                    auth<span class="token punctuation">.</span><span class="token function">anyRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">authenticated</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">formLogin</span><span class="token punctuation">(</span>conf <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
                    conf<span class="token punctuation">.</span><span class="token function">loginPage</span><span class="token punctuation">(</span><span class="token string">&quot;/login&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    conf<span class="token punctuation">.</span><span class="token function">loginProcessingUrl</span><span class="token punctuation">(</span><span class="token string">&quot;/doLogin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    conf<span class="token punctuation">.</span><span class="token function">defaultSuccessUrl</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    conf<span class="token punctuation">.</span><span class="token function">permitAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åŒæ ·çš„ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å¿«é€Ÿæ•´åˆä¹‹å‰ä½¿ç”¨çš„æ¨¡ç‰ˆå¼•æ“ï¼Œæ¯”å¦‚Thymeleafæ¡†æ¶ï¼Œç›´æ¥ä¸Šå¯¹åº”çš„Starterå³å¯ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-thymeleaf<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦åœ¨<code>resources</code>ç›®å½•ä¸‹åˆ›å»ºä¸¤ä¸ªç›®å½•ï¼š</p><figure><img src="https://s2.loli.net/2023/07/15/HfGt61A7OqVDesz.png" alt="image-20230715225833930" tabindex="0" loading="lazy"><figcaption>image-20230715225833930</figcaption></figure><p>è¿™ä¸¤ä¸ªç›®å½•æ˜¯é»˜è®¤é…ç½®ä¸‹éœ€è¦çš„ï¼Œåå­—å¿…é¡»æ˜¯è¿™ä¸ªï¼š</p><ul><li><code>templates</code> - æ‰€æœ‰æ¨¡ç‰ˆæ–‡ä»¶éƒ½å­˜æ”¾åœ¨è¿™é‡Œ</li><li><code>static</code> - æ‰€æœ‰é™æ€èµ„æºéƒ½å­˜æ”¾åœ¨è¿™é‡Œ</li></ul><p>æˆ‘ä»¬åªéœ€è¦æŒ‰ç…§ä¸Šé¢çš„æ ·å­æ”¾å…¥æˆ‘ä»¬ä¹‹å‰çš„å‰ç«¯æ¨¡ç‰ˆï¼Œå°±å¯ä»¥æ­£å¸¸ä½¿ç”¨æ¨¡ç‰ˆå¼•æ“äº†ï¼ŒåŒæ ·ä¸éœ€è¦è¿›å…¥ä»»ä½•çš„é…ç½®ï¼Œå½“ç„¶ï¼Œå¦‚æœå„ä½å°ä¼™ä¼´è§‰å¾—ä¸æ–¹ä¾¿ï¼Œæˆ‘ä»¬åç»­ä¹Ÿå¯ä»¥è¿›è¡Œä¿®æ”¹ã€‚</p><p>æˆ‘ä»¬ä¸éœ€è¦åœ¨controllerä¸­å†™ä»»ä½•å†…å®¹ï¼Œå®ƒé»˜è®¤ä¼šå°†index.htmlä½œä¸ºé¦–é¡µæ–‡ä»¶ï¼Œæˆ‘ä»¬ç›´æ¥è®¿é—®æœåŠ¡å™¨åœ°å€å°±èƒ½å±•ç¤ºé¦–é¡µäº†ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestController</span> <span class="token punctuation">{</span>
		<span class="token comment">//ä»€ä¹ˆéƒ½ä¸ç”¨å†™</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://s2.loli.net/2023/07/15/thnN29vz4fuYRFW.png" alt="image-20230715230152860" tabindex="0" loading="lazy"><figcaption>image-20230715230152860</figcaption></figure><p>è¿™éƒ½æ˜¯å¾—ç›Šäºçº¦å®šå¤§äºé…ç½®çš„æ€æƒ³ï¼Œå¼€ç®±å³ç”¨çš„æ„Ÿè§‰å°±æ˜¯è¿™ä¹ˆèˆ’æœï¼Œä¸è¿‡è‚¯å®šæœ‰å°ä¼™ä¼´å¥½å¥‡é‚£ç°åœ¨è¦æ€ä¹ˆæ‰èƒ½åƒä¹‹å‰ä¸€æ ·è‡ªå·±å†™å‘¢ï¼Œè¿™ä¸ªè‚¯å®šè¿˜æ˜¯è·Ÿä¹‹å‰ä¸€æ ·çš„å‘—ï¼Œè¯¥æ€ä¹ˆå†™å°±æ€ä¹ˆå†™ã€‚</p><p>æˆ‘ä»¬æœ€åå†æ¥çœ‹çœ‹Mybatiså¦‚ä½•è¿›è¡Œæ•´åˆï¼ŒåŒæ ·åªéœ€è¦ä¸€ä¸ªstarterå³å¯ï¼Œè¿™é‡Œé¡ºä¾¿æŠŠMySQLçš„é©±åŠ¨åŠ ä¸Šï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis.spring.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.0.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„è¿™é‡Œçš„<code>mybatis-spring-boot-starter</code>ç‰ˆæœ¬éœ€è¦æˆ‘ä»¬è‡ªå·±æŒ‡å®šï¼Œå› ä¸ºå®ƒæ²¡æœ‰è¢«çˆ¶å·¥ç¨‹é»˜è®¤ç®¡ç†ã€‚</p><figure><img src="https://s2.loli.net/2023/07/15/yWAUnZufkxH8CFp.png" alt="image-20230715231142842" tabindex="0" loading="lazy"><figcaption>image-20230715231142842</figcaption></figure><p>å¯åŠ¨æœåŠ¡å™¨æ—¶ï¼Œæˆ‘ä»¬å‘ç°è¿™é‡Œå‡ºç°äº†é—®é¢˜ï¼Œå¯¼è‡´æ— æ³•å¯åŠ¨ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬æ²¡æœ‰é…ç½®æ•°æ®æºå¯¼è‡´çš„ï¼Œè™½ç„¶SpringBooté‡‡ç”¨çº¦å®šå¤§äºé…ç½®çš„æ€æƒ³ï¼Œä½†æ˜¯æ•°æ®åº“ä¿¡æ¯åªæœ‰æˆ‘ä»¬è‡ªå·±æ¸…æ¥šï¼Œè€Œä¸”å˜åŒ–å¤šæ ·ï¼Œæ ¹æœ¬æ²¡æœ‰åŠæ³•æå‰å®Œæˆçº¦å®šï¼Œæ‰€ä»¥è¯´è¿™é‡Œæˆ‘ä»¬è¿˜æ˜¯éœ€è¦å†é…ç½®æ–‡ä»¶ä¸­ç¼–å†™ï¼Œè‡³äºå¦‚ä½•ç¼–å†™é…ç½®æ–‡ä»¶æˆ‘ä»¬ä¼šåœ¨ä¸‹ä¸€èŠ‚ä¸­è¿›è¡Œè®²è§£ã€‚</p><h3 id="è‡ªå®šä¹‰è¿è¡Œå™¨" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰è¿è¡Œå™¨" aria-hidden="true">#</a> è‡ªå®šä¹‰è¿è¡Œå™¨</h3><p>åœ¨é¡¹ç›®ä¸­ï¼Œå¯èƒ½ä¼šé‡åˆ°è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼šæˆ‘ä»¬éœ€è¦åœ¨é¡¹ç›®å¯åŠ¨å®Œæˆä¹‹åï¼Œç´§æ¥ç€æ‰§è¡Œä¸€æ®µä»£ç ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ç¼–å†™è‡ªå®šä¹‰çš„ApplicationRunneræ¥è§£å†³ï¼Œå®ƒä¼šåœ¨é¡¹ç›®å¯åŠ¨å®Œæˆåæ‰§è¡Œï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestRunner</span> <span class="token keyword">implements</span> <span class="token class-name">ApplicationRunner</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">ApplicationArguments</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æˆ‘æ˜¯è‡ªå®šä¹‰æ‰§è¡Œï¼&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨CommandLineRunnerï¼Œå®ƒä¹Ÿæ”¯æŒä½¿ç”¨@Orderæˆ–æ˜¯å®ç°Orderedæ¥å£æ¥æ”¯æŒä¼˜å…ˆçº§æ‰§è¡Œã€‚</p><p>è¿™ä¸ªåŠŸèƒ½æ¯”è¾ƒç®€å•ï¼Œä¸å¤šåšä»‹ç»äº†ã€‚</p><h3 id="é…ç½®æ–‡ä»¶ä»‹ç»" tabindex="-1"><a class="header-anchor" href="#é…ç½®æ–‡ä»¶ä»‹ç»" aria-hidden="true">#</a> é…ç½®æ–‡ä»¶ä»‹ç»</h3><p>å‰é¢æˆ‘ä»¬å·²ç»ä½“éªŒäº†SpringBootå¸¦æ¥çš„å¿«æ·å¼€å‘ä½“éªŒï¼Œä¸è¿‡æˆ‘ä»¬å‘ç°æœ‰äº›ä¸œè¥¿è¿˜æ˜¯éœ€è¦æˆ‘ä»¬è‡ªå·±æ¥ç¼–å†™é…ç½®æ‰å¯ä»¥ï¼Œä¸ç„¶SpringBooté¡¹ç›®æ— æ³•æ­£å¸¸å¯åŠ¨ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•ç¼–å†™é…ç½®ã€‚æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨<code>application.properties</code>ä¸­è¿›è¡Œé…ç½®ç¼–å†™ï¼Œå®ƒæ˜¯æ•´ä¸ªSpringBootçš„é…ç½®æ–‡ä»¶ï¼Œæ¯”å¦‚è¦ä¿®æ”¹æœåŠ¡å™¨çš„é»˜è®¤ç«¯å£ï¼š</p><figure><img src="https://s2.loli.net/2023/07/15/E3nsZG7DcaSzOBY.png" alt="image-20230715232124133" tabindex="0" loading="lazy"><figcaption>image-20230715232124133</figcaption></figure><p>è¿™äº›é…ç½®å…¶å®éƒ½æ˜¯å„ç§Starteræä¾›çš„ï¼Œéƒ¨åˆ†é…ç½®åœ¨Starterä¸­å…·æœ‰é»˜è®¤å€¼ï¼Œæˆ‘ä»¬å³ä½¿ä¸é…ç½®ä¹Ÿä¼šä½¿ç”¨é»˜è®¤å€¼ï¼Œæ¯”å¦‚è¿™é‡Œçš„8080å°±æ˜¯æˆ‘ä»¬æœåŠ¡å™¨çš„é»˜è®¤ç«¯å£ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰‹åŠ¨ä¿®æ”¹å®ƒï¼Œæ¥å˜æˆæˆ‘ä»¬éœ€è¦çš„ã€‚</p><p>é™¤äº†é…ç½®å·²ç»å­˜åœ¨çš„é€‰é¡¹ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ·»åŠ è‡ªå®šä¹‰çš„é…ç½®ï¼Œæ¥æ–¹ä¾¿æˆ‘ä»¬ç¨‹åºä¸­ä½¿ç”¨ï¼Œæ¯”å¦‚æˆ‘ä»¬è¿™é‡Œåˆ›å»ºä¸€ä¸ªæµ‹è¯•æ•°æ®ï¼š</p><figure><img src="https://s2.loli.net/2023/07/15/HJWz7PIl6Sgk1nx.png" alt="image-20230715234130924" tabindex="0" loading="lazy"><figcaption>image-20230715234130924</figcaption></figure><p>æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨ç¨‹åºä¸­é€šè¿‡<code>@Value</code>æ¥è®¿é—®åˆ°ï¼ˆè·Ÿæˆ‘ä»¬ä¹‹å‰SpringåŸºç¡€ç¯‡è®²çš„æ˜¯ä¸€æ ·çš„ï¼‰</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${test.data}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">int</span> data<span class="token punctuation">;</span>   <span class="token comment">//ç›´æ¥ä»é…ç½®ä¸­å»å–</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é…ç½®æ–‡ä»¶é™¤äº†ä½¿ç”¨<code>properties</code>æ ¼å¼ä»¥å¤–ï¼Œè¿˜æœ‰ä¸€ç§å«åš<code>yaml</code>æ ¼å¼ï¼Œå®ƒçš„è¯­æ³•å¦‚ä¸‹ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">ä¸€çº§ç›®å½•</span><span class="token punctuation">:</span>
    <span class="token key atrule">äºŒçº§ç›®å½•</span><span class="token punctuation">:</span>
      <span class="token key atrule">ä¸‰çº§ç›®å½•1</span><span class="token punctuation">:</span> å€¼
      <span class="token key atrule">ä¸‰çº§ç›®å½•2</span><span class="token punctuation">:</span> å€¼
      <span class="token key atrule">ä¸‰çº§ç›®å½•List</span><span class="token punctuation">:</span> 
      <span class="token punctuation">-</span> å…ƒç´ 1
      <span class="token punctuation">-</span> å…ƒç´ 2
      <span class="token punctuation">-</span> å…ƒç´ 3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæ¯ä¸€çº§ç›®å½•éƒ½æ˜¯é€šè¿‡ç¼©è¿›ï¼ˆä¸èƒ½ä½¿ç”¨Tabï¼Œåªèƒ½ä½¿ç”¨ç©ºæ ¼ï¼‰åŒºåˆ†ï¼Œå¹¶ä¸”é”®å’Œå€¼ä¹‹é—´éœ€è¦æ·»åŠ å†’å·+ç©ºæ ¼æ¥è¡¨ç¤ºã€‚</p><p>SpringBootä¹Ÿæ”¯æŒè¿™ç§æ ¼å¼çš„é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†<code>application.properties</code>ä¿®æ”¹ä¸º<code>application.yml</code>æˆ–æ˜¯<code>application.yaml</code>æ¥ä½¿ç”¨YAMLè¯­æ³•ç¼–å†™é…ç½®ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>ç°åœ¨æˆ‘ä»¬æ¥å°è¯•ä¸ºä¹‹å‰çš„æ•°æ®æºè¿›è¡Œä¸€ä¸‹é…ç½®ï¼Œè¿™æ ·æ‰èƒ½æ­£å¸¸å¯åŠ¨æˆ‘ä»¬çš„æœåŠ¡å™¨ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>spring<span class="token operator">:</span>
  datasource<span class="token operator">:</span>
    url<span class="token operator">:</span> jdbc<span class="token operator">:</span>mysql<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">3306</span><span class="token operator">/</span>test
    username<span class="token operator">:</span> root
    password<span class="token operator">:</span> <span class="token number">123456</span>
    driver<span class="token operator">-</span><span class="token keyword">class</span><span class="token operator">-</span>name<span class="token operator">:</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>cj<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span></span>Driver</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é…ç½®å®Œæˆåï¼Œæˆ‘ä»¬å°±å¯ä»¥æ­£å¸¸å¯åŠ¨æœåŠ¡å™¨äº†ã€‚</p><p>è¿™é‡Œæˆ‘ä»¬æ¥ç»­æ¥æµ‹è¯•ä¸€ä¸‹MyBatisçš„é…ç½®ï¼Œæƒ³è¦åœ¨SpringBootä¸­ä½¿ç”¨Mybatisä¹Ÿå¾ˆç®€å•ï¼Œä¸éœ€è¦è¿›è¡Œä»»ä½•é…ç½®ï¼Œæˆ‘ä»¬ç›´æ¥ç¼–å†™Mapperå³å¯ï¼Œè¿™é‡Œæˆ‘ä»¬éšä¾¿åˆ›å»ºä¸€ä¸ªè¡¨è¯•è¯•çœ‹ï¼š</p><figure><img src="https://s2.loli.net/2023/07/16/ygRp98mDKafXkw1.png" alt="image-20230716000431492" tabindex="0" loading="lazy"><figcaption>image-20230716000431492</figcaption></figure><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> id<span class="token punctuation">;</span>
    <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token class-name">String</span> email<span class="token punctuation">;</span>
    <span class="token class-name">String</span> password<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ï¼Œåœ¨SpringBootæ•´åˆä¹‹åï¼Œæˆ‘ä»¬åªéœ€è¦ç›´æ¥åœ¨é…ç½®ç±»ä¸Šæ·»åŠ <code>@MapperScan</code>æ³¨è§£å³å¯ï¼Œè·Ÿæˆ‘ä»¬ä¹‹å‰çš„ä½¿ç”¨æ–¹æ³•æ˜¯ä¸€æ ·çš„ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@MapperScan</span><span class="token punctuation">(</span><span class="token string">&quot;com.example.mapper&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebConfiguration</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸è¿‡ï¼Œä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥ä¸ºéœ€è¦æ³¨å†Œä¸ºMapperçš„æ¥å£æ·»åŠ <code>@Mapper</code>æ³¨è§£ï¼Œæ¥è¡¨ç¤ºè¿™ä¸ªæ¥å£ä½œä¸ºMapperä½¿ç”¨ï¼š</p><figure><img src="https://s2.loli.net/2023/07/16/lTrXepw1c38IdSv.png" alt="image-20230716000755756" tabindex="0" loading="lazy"><figcaption>image-20230716000755756</figcaption></figure><p>è¿™æ ·ï¼Œå³ä½¿ä¸é…ç½®MapperScanä¹Ÿèƒ½ç›´æ¥æ³¨å†Œä¸ºMapperæ­£å¸¸ä½¿ç”¨ï¼Œæ˜¯ä¸æ˜¯æ„Ÿè§‰ç‰¹åˆ«æ–¹ä¾¿ï¼Ÿ</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Mapper</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserMapper</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select * from user where id = #{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">User</span> <span class="token function">findUserById</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@ResponseBody</span>
<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/test&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> mapper<span class="token punctuation">.</span><span class="token function">findUserById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è®¿é—®æ¥å£æµ‹è¯•ä¸€ä¸‹ï¼š</p><figure><img src="https://s2.loli.net/2023/07/16/PSfpylWGCs3bzZj.png" alt="image-20230716001311316" tabindex="0" loading="lazy"><figcaption>image-20230716001311316</figcaption></figure><p>æœ€åï¼Œæˆ‘ä»¬å†æ¥ä»‹ç»ä¸€ä¸‹å¸¸è§çš„é…ç½®é¡¹ï¼Œæ¯”å¦‚SpringSecurityå’ŒSpringBootMvcé…ç½®ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>  
  <span class="token comment">#  Spring Mvcç›¸å…³é…ç½®</span>
  <span class="token key atrule">mvc</span><span class="token punctuation">:</span>
    <span class="token key atrule">static-path-pattern</span><span class="token punctuation">:</span> /static/<span class="token important">**</span>   <span class="token comment">#é™æ€èµ„æºè§£æåœ°å€</span>
  <span class="token comment"># Spring Security ç›¸å…³é…ç½®</span>
  <span class="token key atrule">security</span><span class="token punctuation">:</span>
    <span class="token key atrule">filter</span><span class="token punctuation">:</span>
      <span class="token key atrule">order</span><span class="token punctuation">:</span> <span class="token number">-100</span> <span class="token comment">#Spring Security è¿‡æ»¤å™¨ä¼˜å…ˆçº§</span>
    <span class="token key atrule">user</span><span class="token punctuation">:</span>
      <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">&#39;admin&#39;</span>   <span class="token comment">#é»˜è®¤ç™»å½•ç”¨æˆ·å</span>
      <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token string">&#39;123456&#39;</span>   <span class="token comment">#é»˜è®¤ç™»å½•å¯†ç </span>
      <span class="token key atrule">roles</span><span class="token punctuation">:</span>    <span class="token comment">#é»˜è®¤ç”¨æˆ·çš„è§’è‰²</span>
        <span class="token punctuation">-</span> admin
        <span class="token punctuation">-</span> user
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ›´å¤šçš„é…ç½®æˆ‘ä»¬å¯ä»¥åœ¨åç»­çš„å­¦ä¹ ä¸­ç»§ç»­è®¤è¯†ï¼Œè¿™äº›é…ç½®å…¶å®éƒ½æ˜¯ç”±Starteræä¾›çš„ï¼Œç¡®å®æå¤§ç¨‹åº¦ç®€åŒ–äº†æˆ‘ä»¬å¯¹äºæ¡†æ¶çš„ä½¿ç”¨ã€‚</p><h3 id="è½»æ¾æ‰“åŒ…è¿è¡Œ" tabindex="-1"><a class="header-anchor" href="#è½»æ¾æ‰“åŒ…è¿è¡Œ" aria-hidden="true">#</a> è½»æ¾æ‰“åŒ…è¿è¡Œ</h3><p>å‰é¢æˆ‘ä»¬ä»‹ç»äº†ä¸€ä¸ªSpringBootå¦‚ä½•å¿«æ·æ•´åˆå…¶ä»–æ¡†æ¶ä»¥åŠè¿›è¡Œé…ç½®ç¼–å†™ï¼Œæˆ‘ä»¬æ¥ç€æ¥çœ‹å¦‚ä½•æ‰“åŒ…æˆ‘ä»¬çš„SpringBooté¡¹ç›®ä½¿å…¶å¯ä»¥æ­£å¸¸è¿è¡Œï¼ŒSpringBootæä¾›äº†ä¸€ä¸ªéå¸¸ä¾¿æ·çš„æ‰“åŒ…æ’ä»¶ï¼Œèƒ½å¤Ÿç›´æ¥å°†æˆ‘ä»¬çš„é¡¹ç›®æ‰“åŒ…æˆä¸€ä¸ªjaråŒ…ï¼Œç„¶åä½¿ç”¨javaå‘½ä»¤ç›´æ¥è¿è¡Œï¼Œæˆ‘ä»¬ç›´æ¥ç‚¹å‡»Mavenä¸­çš„ï¼š</p><figure><img src="https://s2.loli.net/2023/07/16/oI6YjqUurZznw3C.png" alt="image-20230716155322915" tabindex="0" loading="lazy"><figcaption>image-20230716155322915</figcaption></figure><p>ç‚¹å‡»ä¹‹åé¡¹ç›®ä¼šè‡ªåŠ¨æ‰“åŒ…æ„å»ºï¼š</p><figure><img src="https://s2.loli.net/2023/07/16/2dToslkFHXxujOa.png" alt="image-20230716155412252" tabindex="0" loading="lazy"><figcaption>image-20230716155412252</figcaption></figure><p>æ‰“åŒ…å®Œæˆä¹‹åï¼Œä¼šåœ¨targetç›®å½•ä¸‹å‡ºç°ä¸€ä¸ªæ‰“åŒ…å¥½çš„jaræ–‡ä»¶ï¼š</p><figure><img src="https://s2.loli.net/2023/07/16/itQxlHTL5hsjIme.png" alt="image-20230716155622849" tabindex="0" loading="lazy"><figcaption>image-20230716155622849</figcaption></figure><p>æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œè¿™ä¸ªç¨‹åºï¼Œåœ¨CMDä¸­è¿›å…¥åˆ°targetç›®å½•ï¼Œç„¶åè¾“å…¥ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">java</span> <span class="token parameter variable">-jar</span> demo-0.0.1-SNAPSHOT.jar
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿™æ ·å°±å¯ä»¥ç›´æ¥è¿è¡Œäº†ï¼š</p><figure><img src="https://s2.loli.net/2023/07/16/7bjyil3RgfuNLsZ.png" alt="image-20230716155834628" tabindex="0" loading="lazy"><figcaption>image-20230716155834628</figcaption></figure><p>ç°åœ¨ï¼Œæˆ‘ä»¬çš„SpringBooté¡¹ç›®å°±å¯ä»¥å¿«é€Ÿéƒ¨ç½²åˆ°ä»»ä½•è®¡ç®—æœºäº†ï¼Œåªè¦èƒ½å¤Ÿå®‰è£…JREç¯å¢ƒï¼Œéƒ½å¯ä»¥é€šè¿‡å‘½ä»¤ä¸€é”®è¿è¡Œã€‚</p><p>å½“ç„¶ï¼Œå¯èƒ½ä¹Ÿä¼šæœ‰å°ä¼™ä¼´å¥½å¥‡ï¼Œæ€ä¹ˆæ‰èƒ½åƒä¹‹å‰ä¸€æ ·åœ¨æˆ‘ä»¬çš„TomcatæœåŠ¡å™¨ä¸­è¿è¡Œå‘¢ï¼Ÿæˆ‘ä»¬ä¹Ÿå¯ä»¥å°†å…¶æ‰“åŒ…ä¸ºWaråŒ…çš„å½¢å¼éƒ¨ç½²åˆ°æˆ‘ä»¬è‡ªå·±ç¯å¢ƒä¸­çš„TomcatæœåŠ¡å™¨æˆ–æ˜¯å…¶ä»–ä»»ä½•æ”¯æŒServletçš„æœåŠ¡å™¨ä¸­ï¼Œä½†æ˜¯è¿™ç§åšæ³•ç›¸å¯¹æ¯”è¾ƒå¤æ‚ï¼Œä¸å¤ªæ¨èé‡‡ç”¨è¿™ç§æ–¹å¼è¿›è¡Œé¡¹ç›®éƒ¨ç½²ï¼Œä¸è¿‡æˆ‘ä»¬è¿™é‡Œè¿˜æ˜¯ä»‹ç»ä¸€ä¸‹ã€‚</p><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦æ’é™¤æ‰<code>spring-boot-starter-web</code>ä¸­è‡ªå¸¦çš„TomcatæœåŠ¡å™¨ä¾èµ–ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">&gt;</span></span>
             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-tomcat<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åè‡ªè¡Œæ·»åŠ Servletä¾èµ–ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>jakarta.servlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jakarta.servlet-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>provided<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ€åå°†æ‰“åŒ…æ–¹å¼ä¿®æ”¹ä¸ºwaråŒ…ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>packaging</span><span class="token punctuation">&gt;</span></span>war<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>packaging</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ¥ç€æˆ‘ä»¬éœ€è¦ä¿®æ”¹ä¸»ç±»ï¼Œå°†å…¶ç»§æ‰¿SpringBootéœ€è¦çš„Initializerï¼ˆåˆå›åˆ°SSMé˜¶æ®µé‚£çƒ¦äººçš„é…ç½®äº†ï¼Œæ‰€ä»¥è¯´ä¸€ç‚¹ä¸æ¨èè¿™ç§éƒ¨ç½²æ–¹å¼ï¼‰</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DemoApplication</span> <span class="token keyword">extends</span> <span class="token class-name">SpringBootServletInitializer</span> <span class="token punctuation">{</span>  <span class="token comment">//ç»§æ‰¿ä¸“ç”¨çš„åˆå§‹åŒ–å™¨</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">DemoApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

  	<span class="token comment">//é‡å†™configureæ–¹æ³•ï¼Œå®Œæˆå¯åŠ¨ç±»é…ç½®</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">SpringApplicationBuilder</span> <span class="token function">configure</span><span class="token punctuation">(</span><span class="token class-name">SpringApplicationBuilder</span> builder<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> builder<span class="token punctuation">.</span><span class="token function">sources</span><span class="token punctuation">(</span><span class="token class-name">DemoApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ€åï¼Œæˆ‘ä»¬å†æ¬¡è¿è¡ŒMaven çš„packageæŒ‡ä»¤å°±å¯ä»¥æ‰“åŒ…ä¸ºwaråŒ…äº†ï¼š</p><figure><img src="https://s2.loli.net/2023/07/16/eycOMVRfZHmLnWX.png" alt="image-20230716161834726" tabindex="0" loading="lazy"><figcaption>image-20230716161834726</figcaption></figure><p>æˆ‘ä»¬å¯ä»¥ç›´æ¥å°†å…¶éƒ¨ç½²åˆ°TomcatæœåŠ¡å™¨ä¸­ï¼ˆå¦‚ä½•éƒ¨ç½²å·²ç»åœ¨JavaWebç¯‡ä»‹ç»è¿‡äº†ï¼‰</p><figure><img src="https://s2.loli.net/2023/07/16/CiNpxywXOso32kH.png" alt="image-20230716161921180" tabindex="0" loading="lazy"><figcaption>image-20230716161921180</figcaption></figure><p>æ¥ç€å¯åŠ¨æœåŠ¡å™¨å°±èƒ½æ­£å¸¸è®¿é—®äº†ï¼š</p><figure><img src="https://s2.loli.net/2023/07/16/3hp6guwVt2aGKlQ.png" alt="image-20230716162008831" tabindex="0" loading="lazy"><figcaption>image-20230716162008831</figcaption></figure><figure><img src="https://s2.loli.net/2023/07/16/VDiRhqgNam8cleI.png" alt="image-20230716162030102" tabindex="0" loading="lazy"><figcaption>image-20230716162030102</figcaption></figure><p>å¦‚æœå„ä½å°ä¼™ä¼´éœ€è¦åœ¨IDEAä¸­è¿›è¡Œè°ƒè¯•è¿è¡Œï¼Œæˆ‘ä»¬éœ€è¦åƒä¹‹å‰ä¸€æ ·é…ç½®ä¸€ä¸ªTomcatè¿è¡Œç¯å¢ƒï¼š</p><figure><img src="https://s2.loli.net/2023/07/16/Fn5kxeECwhuoWBl.png" alt="image-20230716162119751" tabindex="0" loading="lazy"><figcaption>image-20230716162119751</figcaption></figure><p>è¿™æ ·å°±å¯ä»¥è·Ÿä¹‹å‰ä¸€æ ·ä½¿ç”¨å¤–éƒ¨TomcatæœåŠ¡å™¨äº†ï¼š</p><figure><img src="https://s2.loli.net/2023/07/16/xK8sgwWoAIB61qk.png" alt="image-20230716162156347" tabindex="0" loading="lazy"><figcaption>image-20230716162156347</figcaption></figure><p>æœ€åï¼Œæˆ‘ä»¬éœ€è¦ç‰¹åˆ«ä»‹ç»ä¸€ä¸‹æ–°çš„ç‰¹æ€§ï¼Œåœ¨SpringBoot3ä¹‹åï¼Œç‰¹åˆ«å¯¹GraalVMè¿›è¡Œäº†æ”¯æŒï¼š</p><blockquote><p>GraalVM æ˜¯ä¸€ç§é€šç”¨çš„è™šæ‹Ÿæœºï¼Œæœ€åˆç”± Oracle å¼€å‘ã€‚å®ƒæ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€ï¼ˆä¾‹å¦‚ Javaã€JavaScriptã€Python ç­‰ï¼‰ï¼Œå¯ä»¥åœ¨ä¸åŒçš„ç¯å¢ƒä¸­è¿è¡Œï¼Œå¹¶æä¾›é«˜æ€§èƒ½å’Œä½å†…å­˜æ¶ˆè€—ã€‚</p><p>GraalVMçš„æ ¸å¿ƒæ˜¯ä¸€ä¸ªå³æ—¶ç¼–è¯‘å™¨ï¼Œå®ƒèƒ½å¤Ÿå°†å„ç§è¯­è¨€çš„ä»£ç ç›´æ¥ç¼–è¯‘æˆæœ¬åœ°æœºå™¨ç ï¼Œä»¥è·å¾—æ›´é«˜çš„æ€§èƒ½ã€‚æ­¤å¤–ï¼ŒGraalVM è¿˜æä¾›äº†ä¸€ä¸ªå¼ºå¤§çš„è¿è¡Œæ—¶ç¯å¢ƒï¼ŒåŒ…æ‹¬åƒåœ¾å›æ”¶å™¨ã€å³æ—¶ç¼–è¯‘å™¨ã€çº¿ç¨‹ç®¡ç†å™¨ç­‰ï¼Œå¯ä»¥æä¾›æ›´å¥½çš„æ€§èƒ½å’Œå¯æ‰©å±•æ€§ã€‚</p><p>GraalVM çš„ä¸€ä¸ªé‡è¦ç‰¹æ€§æ˜¯å®ƒçš„è·¨è¯­è¨€äº’æ“ä½œæ€§ã€‚GraalVM å¯ä»¥ä½¿ä¸åŒè¯­è¨€ä¹‹é—´çš„äº’æ“ä½œæ›´åŠ å®¹æ˜“ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥åœ¨ Java ä»£ç ä¸­ç›´æ¥è°ƒç”¨ JavaScript å‡½æ•°ï¼Œæˆ–è€…åœ¨ JavaScript ä»£ç ä¸­ç›´æ¥è°ƒç”¨ Java ç±»ã€‚è¿™ä½¿å¾—åœ¨ä¸åŒè¯­è¨€ä¹‹é—´å…±äº«å’Œå¤ç”¨ä»£ç å˜å¾—æ›´åŠ å®¹æ˜“ã€‚</p><p>æ€»çš„æ¥è¯´ï¼ŒGraalVM æ˜¯ä¸€ä¸ªå¼€åˆ›æ€§çš„æŠ€æœ¯ï¼Œå¯ä»¥æä¾›å‡ºè‰²çš„æ€§èƒ½å’Œçµæ´»æ€§ï¼ŒåŒæ—¶ä¹Ÿä¸ºå¤šè¯­è¨€å¼€å‘æä¾›äº†æ›´å¥½çš„æ”¯æŒã€‚å®ƒæ˜¯ä¸€ä¸ªéå¸¸æœ‰æ½œåŠ›çš„å·¥å…·ï¼Œå¯ä»¥ç”¨äºæ„å»ºé«˜æ•ˆçš„åº”ç”¨ç¨‹åºå’Œè§£å†³æ–¹æ¡ˆã€‚</p></blockquote><figure><img src="https://s2.loli.net/2023/07/16/qJiMVGeDnhf7HYu.png" alt="image-20230716160131837" tabindex="0" loading="lazy"><figcaption>image-20230716160131837</figcaption></figure><p>ç®€è€Œè¨€ä¹‹ï¼Œæˆ‘ä»¬çš„SpringBooté¡¹ç›®é™¤äº†æ‰“åŒ…ä¸ºä¼ ç»Ÿçš„JaråŒ…åŸºäºJVMè¿è¡Œä¹‹å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°†å…¶ç›´æ¥ç¼–è¯‘ä¸ºæ“ä½œç³»ç»ŸåŸç”Ÿçš„ç¨‹åºæ¥è¿›è¡Œä½¿ç”¨ï¼ˆè¿™æ ·ä¼šå¤§å¹…æå‡ç¨‹åºçš„è¿è¡Œæ•ˆç‡ï¼Œä½†æ˜¯ç”±äºç¼–è¯‘ä¸ºæ“ä½œç³»ç»ŸåŸç”Ÿç¨‹åºï¼Œè¿™å°†æ— æ³•æ”¯æŒè·¨å¹³å°ï¼‰</p><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦å®‰è£…GraalVMçš„ç¯å¢ƒæ‰å¯ä»¥ï¼Œè¿™è·Ÿå®‰è£…æ™®é€šJDKçš„æ“ä½œæ˜¯å®Œå…¨ä¸€æ ·çš„ï¼Œä¸‹è½½åœ°å€ï¼š<a href="https://github.com/graalvm/graalvm-ce-builds/releases/tag/jdk-17.0.7" target="_blank" rel="noopener noreferrer">https://github.com/graalvm/graalvm-ce-builds/releases/tag/jdk-17.0.7<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><figure><img src="https://s2.loli.net/2023/07/16/Y8VBnQPL4mHit7N.png" alt="image-20230716162524422" tabindex="0" loading="lazy"><figcaption>image-20230716162524422</figcaption></figure><p>ä¸‹è½½å¥½å¯¹åº”ç³»ç»Ÿæ¶æ„çš„GraalVMç¯å¢ƒä¹‹åï¼Œå°±å¯ä»¥å®‰è£…éƒ¨ç½²äº†ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦ä¸ºGraalVMé…ç½®ç¯å¢ƒå˜é‡ï¼Œå°†GRAALVM_HOMEä½œä¸ºç¯å¢ƒå˜é‡æŒ‡å‘ä½ çš„å®‰è£…ç›®å½•çš„binç›®å½•ä¸‹ï¼Œæ¥ç€æˆ‘ä»¬å°±å¯ä»¥å¼€å§‹è¿›è¡Œæ‰“åŒ…äº†ï¼ˆæ³¨æ„ï¼ŒSpringBooté¡¹ç›®å¿…é¡»åœ¨åˆ›å»ºçš„æ—¶å€™æ·»åŠ äº†Nativeæ”¯æŒæ‰å¯ä»¥ï¼Œå¦åˆ™æ— æ³•æ­£å¸¸æ‰“åŒ…ï¼‰</p><p>æ³¨æ„ï¼Œä¸€å®šè¦å°†<code>GRAALVM_HOME</code>é…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼š</p><figure><img src="https://s2.loli.net/2023/07/16/lCjUpPYWhkm6eTq.png" alt="image-20230716163645399" tabindex="0" loading="lazy"><figcaption>image-20230716163645399</figcaption></figure><p>ä¸€åˆ‡æ— è¯¯åï¼Œæˆ‘ä»¬ç›´æ¥åœ¨IDEAä¸­æˆ–æ˜¯å‘½ä»¤è¡Œä¸­è¾“å…¥ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>mvn <span class="token parameter variable">-Pnative</span> <span class="token parameter variable">-DskipTests</span> native:compile
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ¥ç€ä¼šè‡ªåŠ¨å®‰è£…<code>native-image</code>ç»„ä»¶ï¼Œç„¶åè¿›è¡Œæœ¬åœ°é•œåƒçš„ç¼–è¯‘ï¼ˆå»ºè®®æŒ‚æ¢¯ï¼Œä¸ç„¶å¡ä¸€å¤©éƒ½ä¸‹ä¸åŠ¨ï¼‰</p><figure><img src="https://s2.loli.net/2023/07/16/fxzCEJbmluGn8jy.png" alt="image-20230716164025545" tabindex="0" loading="lazy"><figcaption>image-20230716164025545</figcaption></figure><p>ç¼–è¯‘è¿‡ç¨‹ä¸­æ¯”è¾ƒæ¶ˆè€—èµ„æºï¼Œå»ºè®®CPUé€‰æ‹©6æ ¸åŠä»¥ä¸Šï¼Œä¸ç„¶é€Ÿåº¦ä¼šå¾ˆæ…¢ï¼Œç¼–è¯‘å®Œæˆä¹‹åå¦‚ä¸‹å›¾ï¼š</p><figure><img src="https://s2.loli.net/2023/07/16/9JekL4VAB7EOdrf.png" alt="image-20230716164317582" tabindex="0" loading="lazy"><figcaption>image-20230716164317582</figcaption></figure><p>è¿™æ ·ä¸€ä¸ªç³»ç»ŸåŸç”Ÿçš„SpringBooté¡¹ç›®å°±æ‰“åŒ…å¥½äº†ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è¿è¡Œè¿™ä¸ªç¨‹åºï¼š</p><figure><img src="https://s2.loli.net/2023/07/16/MTu4GCmsogfaeRO.png" alt="image-20230716165228609" tabindex="0" loading="lazy"><figcaption>image-20230716165228609</figcaption></figure><p>ä¸è¿‡ç”±äºMybatisç›®å‰ä¸æ”¯æŒNative-Imageï¼Œæ‰€ä»¥åªèƒ½æœŸå¾…æœ‰æœä¸€æ—¥è¿™äº›æ¡†æ¶éƒ½èƒ½å¤Ÿå®Œæ•´æ”¯æŒåŸç”Ÿé•œåƒï¼Œè®©æˆ‘ä»¬çš„ç¨‹åºè¿è¡Œæ•ˆç‡æ›´ä¸Šä¸€å±‚æ¥¼ã€‚</p><p>è‡³æ­¤ï¼Œå…³äºSpringBootçš„å¿«é€Ÿä¸Šæ‰‹æ•™ç¨‹å°±å…¨éƒ¨ç»“æŸäº†ï¼Œå…¶å®åªè¦SSMé˜¶æ®µå­¦çš„æ‰å®ï¼Œåˆ°äº†Booté˜¶æ®µä¹‹åä¹Ÿæ˜¯è½»è½»æ¾æ¾ï¼Œä¸‹ä¸€éƒ¨åˆ†æˆ‘ä»¬å°†éš†é‡ä»‹ç»ä¸€ä¸‹SpringBootçš„æ—¥å¿—æ¨¡å—ã€‚</p><hr><h2 id="æ—¥å¿—ç³»ç»Ÿä»‹ç»" tabindex="-1"><a class="header-anchor" href="#æ—¥å¿—ç³»ç»Ÿä»‹ç»" aria-hidden="true">#</a> æ—¥å¿—ç³»ç»Ÿä»‹ç»</h2><p>SpringBootä¸ºæˆ‘ä»¬æä¾›äº†ä¸°å¯Œçš„æ—¥å¿—ç³»ç»Ÿï¼Œå®ƒå‡ ä¹æ˜¯å¼€ç®±å³ç”¨çš„ã€‚æˆ‘ä»¬åœ¨ä¹‹å‰å­¦ä¹ SSMæ—¶ï¼Œå¦‚æœä¸é…ç½®æ—¥å¿—ï¼Œå°±ä¼šæŠ¥é”™ï¼Œä½†æ˜¯åˆ°äº†SpringBooté˜¶æ®µä¹‹åä¼¼ä¹è¿™ä¸ªé—®é¢˜å°±ä¸è§äº†ï¼Œæ—¥å¿—æ‰“å°å¾—ä¹Ÿéå¸¸ç»Ÿä¸€ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p><h3 id="æ—¥å¿—é—¨é¢å’Œæ—¥å¿—å®ç°" tabindex="-1"><a class="header-anchor" href="#æ—¥å¿—é—¨é¢å’Œæ—¥å¿—å®ç°" aria-hidden="true">#</a> æ—¥å¿—é—¨é¢å’Œæ—¥å¿—å®ç°</h3><p>æˆ‘ä»¬é¦–å…ˆè¦åŒºåˆ†ä¸€ä¸‹ï¼Œä»€ä¹ˆæ˜¯æ—¥å¿—é—¨é¢ï¼ˆFacadeï¼‰ä»€ä¹ˆæ˜¯æ—¥å¿—å®ç°ï¼Œæˆ‘ä»¬ä¹‹å‰å­¦ä¹ çš„JULå®é™…ä¸Šå°±æ˜¯ä¸€ç§æ—¥å¿—å®ç°ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨JULä¸ºæˆ‘ä»¬æä¾›çš„æ—¥å¿—æ¡†æ¶æ¥è§„èŒƒåŒ–æ‰“å°æ—¥å¿—ã€‚</p><p>è€Œæ—¥å¿—é—¨é¢ï¼Œå¦‚Slf4jï¼Œæ˜¯æŠŠä¸åŒçš„æ—¥å¿—ç³»ç»Ÿçš„å®ç°è¿›è¡Œäº†å…·ä½“çš„æŠ½è±¡åŒ–ï¼Œåªæä¾›äº†ç»Ÿä¸€çš„æ—¥å¿—ä½¿ç”¨æ¥å£ï¼Œä½¿ç”¨æ—¶åªéœ€è¦æŒ‰ç…§å…¶æä¾›çš„æ¥å£æ–¹æ³•è¿›è¡Œè°ƒç”¨å³å¯ï¼Œç”±äºå®ƒåªæ˜¯ä¸€ä¸ªæ¥å£ï¼Œå¹¶ä¸æ˜¯ä¸€ä¸ªå…·ä½“çš„å¯ä»¥ç›´æ¥å•ç‹¬ä½¿ç”¨çš„æ—¥å¿—æ¡†æ¶ï¼Œæ‰€ä»¥æœ€ç»ˆæ—¥å¿—çš„æ ¼å¼ã€è®°å½•çº§åˆ«ã€è¾“å‡ºæ–¹å¼ç­‰éƒ½è¦é€šè¿‡æ¥å£ç»‘å®šçš„å…·ä½“çš„æ—¥å¿—ç³»ç»Ÿæ¥å®ç°ï¼Œè¿™äº›å…·ä½“çš„æ—¥å¿—ç³»ç»Ÿå°±æœ‰log4jã€logbackã€java.util.loggingç­‰ï¼Œå®ƒä»¬æ‰å®ç°äº†å…·ä½“çš„æ—¥å¿—ç³»ç»Ÿçš„åŠŸèƒ½ã€‚</p><p>æ—¥å¿—é—¨é¢å’Œæ—¥å¿—å®ç°å°±åƒJDBCå’Œæ•°æ®åº“é©±åŠ¨ä¸€æ ·ï¼Œä¸€ä¸ªæ˜¯ç”»å¤§é¥¼çš„ï¼Œä¸€ä¸ªæ˜¯çœŸçš„å»åšé¥¼çš„ã€‚</p><figure><img src="https://s2.loli.net/2023/03/06/MGg1EHxtuvswV8d.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>ä½†æ˜¯ç°åœ¨æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼Œä¸åŒçš„æ¡†æ¶å¯èƒ½ä½¿ç”¨äº†ä¸åŒçš„æ—¥å¿—æ¡†æ¶ï¼Œå¦‚æœè¿™ä¸ªæ—¶å€™å‡ºç°ä¼—å¤šæ—¥å¿—æ¡†æ¶å¹¶å­˜çš„æƒ…å†µï¼Œæˆ‘ä»¬ç°åœ¨å¸Œæœ›çš„æ˜¯æ‰€æœ‰çš„æ¡†æ¶ä¸€å¾‹ä½¿ç”¨æ—¥å¿—é—¨é¢ï¼ˆSlf4jï¼‰è¿›è¡Œæ—¥å¿—æ‰“å°ï¼Œè¿™æ—¶è¯¥æ€ä¹ˆå»è§£å†³ï¼Ÿæˆ‘ä»¬ä¸å¯èƒ½å°†å…¶ä»–æ¡†æ¶ä¾èµ–çš„æ—¥å¿—æ¡†æ¶æ›¿æ¢æ‰ï¼Œç›´æ¥æ›´æ¢ä¸ºSlf4jå§ï¼Œè¿™æ ·æ˜¾ç„¶ä¸ç°å®ã€‚</p><p>è¿™æ—¶ï¼Œå¯ä»¥é‡‡å–ç±»ä¼¼äºå·æ¢æ¢æŸ±çš„åšæ³•ï¼Œåªä¿ç•™ä¸åŒæ—¥å¿—æ¡†æ¶çš„æ¥å£å’Œç±»å®šä¹‰ç­‰å…³é”®ä¿¡æ¯ï¼Œè€Œå°†å®ç°å…¨éƒ¨å®šå‘ä¸ºSlf4jè°ƒç”¨ã€‚ç›¸å½“äºæœ‰ç€å’ŒåŸæœ‰æ—¥å¿—æ¡†æ¶ä¸€æ ·çš„å¤–å£³ï¼Œå¯¹äºå…¶ä»–æ¡†æ¶æ¥è¯´ä¾ç„¶å¯ä»¥ä½¿ç”¨å¯¹åº”çš„ç±»è¿›è¡Œæ“ä½œï¼Œè€Œå…·ä½“å¦‚ä½•æ‰§è¡Œï¼ŒçœŸæ­£çš„å†…å¿ƒå·²ç»æ˜¯Slf4jçš„äº†ã€‚</p><figure><img src="https://s2.loli.net/2023/03/06/o1bMPITBcgetVYa.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>æ‰€ä»¥ï¼ŒSpringBootä¸ºäº†ç»Ÿä¸€æ—¥å¿—æ¡†æ¶çš„ä½¿ç”¨ï¼Œåšäº†è¿™äº›äº‹æƒ…ï¼š</p><ul><li>ç›´æ¥å°†å…¶ä»–ä¾èµ–ä»¥å‰çš„æ—¥å¿—æ¡†æ¶å‰”é™¤</li><li>å¯¼å…¥å¯¹åº”æ—¥å¿—æ¡†æ¶çš„Slf4jä¸­é—´åŒ…</li><li>å¯¼å…¥è‡ªå·±å®˜æ–¹æŒ‡å®šçš„æ—¥å¿—å®ç°ï¼Œå¹¶ä½œä¸ºSlf4jçš„æ—¥å¿—å®ç°å±‚</li></ul><h3 id="æ‰“å°é¡¹ç›®æ—¥å¿—ä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#æ‰“å°é¡¹ç›®æ—¥å¿—ä¿¡æ¯" aria-hidden="true">#</a> æ‰“å°é¡¹ç›®æ—¥å¿—ä¿¡æ¯</h3><p>SpringBootä½¿ç”¨çš„æ˜¯Slf4jä½œä¸ºæ—¥å¿—é—¨é¢ï¼ŒLogbackï¼ˆ<a href="http://logback.qos.ch/" target="_blank" rel="noopener noreferrer">Logback<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> æ˜¯log4j æ¡†æ¶çš„ä½œè€…å¼€å‘çš„æ–°ä¸€ä»£æ—¥å¿—æ¡†æ¶ï¼Œå®ƒæ•ˆç‡æ›´é«˜ã€èƒ½å¤Ÿé€‚åº”è¯¸å¤šçš„è¿è¡Œç¯å¢ƒï¼ŒåŒæ—¶å¤©ç„¶æ”¯æŒSLF4Jï¼‰ä½œä¸ºæ—¥å¿—å®ç°ï¼Œå¯¹åº”çš„ä¾èµ–ä¸ºï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-logging<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ­¤ä¾èµ–å·²ç»è¢«åŒ…å«äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬å¦‚æœéœ€è¦æ‰“å°æ—¥å¿—ï¼Œå¯ä»¥åƒè¿™æ ·ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@ResponseBody</span>
<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/test&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">TestController</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;ç”¨æˆ·è®¿é—®äº†ä¸€æ¬¡æµ‹è¯•æ•°æ®&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> mapper<span class="token punctuation">.</span><span class="token function">findUserById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å› ä¸ºæˆ‘ä»¬ä½¿ç”¨äº†Lombokï¼Œæ‰€ä»¥ç›´æ¥ä¸€ä¸ªæ³¨è§£ä¹Ÿå¯ä»¥æå®šå“¦ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MainController</span> <span class="token punctuation">{</span>

  	<span class="token annotation punctuation">@ResponseBody</span>
		<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/test&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    		log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;ç”¨æˆ·è®¿é—®äº†ä¸€æ¬¡æµ‹è¯•æ•°æ®&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    		<span class="token keyword">return</span> mapper<span class="token punctuation">.</span><span class="token function">findUserById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
  
  	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ—¥å¿—çº§åˆ«ä»ä½åˆ°é«˜åˆ†ä¸ºTRACE &lt; DEBUG &lt; INFO &lt; WARN &lt; ERROR &lt; FATALï¼ŒSpringBooté»˜è®¤åªä¼šæ‰“å°INFOä»¥ä¸Šçº§åˆ«çš„ä¿¡æ¯ï¼Œæ•ˆæœå¦‚ä¸‹ï¼Œä¹Ÿæ˜¯ä½¿ç”¨åŒæ ·çš„æ ¼å¼æ‰“å°åœ¨æ§åˆ¶å°çš„ï¼š</p><figure><img src="https://s2.loli.net/2023/07/16/HCZQndu2YPwINoS.png" alt="image-20230716171120646" tabindex="0" loading="lazy"><figcaption>image-20230716171120646</figcaption></figure><h3 id="é…ç½®logbackæ—¥å¿—" tabindex="-1"><a class="header-anchor" href="#é…ç½®logbackæ—¥å¿—" aria-hidden="true">#</a> é…ç½®Logbackæ—¥å¿—</h3><p>Logbackå®˜ç½‘ï¼š<a href="https://logback.qos.ch/" target="_blank" rel="noopener noreferrer">https://logback.qos.ch<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>å’ŒJULä¸€æ ·ï¼ŒLogbackä¹Ÿèƒ½å®ç°å®šåˆ¶åŒ–ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™å¯¹åº”çš„é…ç½®æ–‡ä»¶ï¼ŒSpringBootæ¨èå°†é…ç½®æ–‡ä»¶åç§°å‘½åä¸º<code>logback-spring.xml</code>è¡¨ç¤ºè¿™æ˜¯SpringBootä¸‹Logbackä¸“ç”¨çš„é…ç½®ï¼Œå¯ä»¥ä½¿ç”¨SpringBoot çš„é«˜çº§Proï¬leåŠŸèƒ½ï¼Œå®ƒçš„å†…å®¹ç±»ä¼¼äºè¿™æ ·ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- é…ç½® --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ€å¤–å±‚ç”±<code>configuration</code>åŒ…è£¹ï¼Œä¸€æ—¦ç¼–å†™ï¼Œé‚£ä¹ˆå°±ä¼šæ›¿æ¢é»˜è®¤çš„é…ç½®ï¼Œæ‰€ä»¥å¦‚æœå†…éƒ¨ä»€ä¹ˆéƒ½ä¸å†™çš„è¯ï¼Œé‚£ä¹ˆä¼šå¯¼è‡´æˆ‘ä»¬çš„SpringBooté¡¹ç›®æ²¡æœ‰é…ç½®ä»»ä½•æ—¥å¿—è¾“å‡ºæ–¹å¼ï¼Œæ§åˆ¶å°ä¹Ÿä¸ä¼šæ‰“å°æ—¥å¿—ã€‚</p><p>æˆ‘ä»¬æ¥ç€æ¥çœ‹å¦‚ä½•é…ç½®ä¸€ä¸ªæ§åˆ¶å°æ—¥å¿—æ‰“å°ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å¯¼å…¥å¹¶ä½¿ç”¨SpringBootä¸ºæˆ‘ä»¬é¢„è®¾å¥½çš„æ—¥å¿—æ ¼å¼ï¼Œåœ¨<code>org/springframework/boot/logging/logback/defaults.xml</code>ä¸­å·²ç»å¸®æˆ‘ä»¬æŠŠæ—¥å¿—çš„è¾“å‡ºæ ¼å¼å®šä¹‰å¥½äº†ï¼Œæˆ‘ä»¬åªéœ€è¦è®¾ç½®å¯¹åº”çš„<code>appender</code>å³å¯ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>included</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>conversionRule</span> <span class="token attr-name">conversionWord</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>clr<span class="token punctuation">&quot;</span></span> <span class="token attr-name">converterClass</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.boot.logging.logback.ColorConverter<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>conversionRule</span> <span class="token attr-name">conversionWord</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wex<span class="token punctuation">&quot;</span></span> <span class="token attr-name">converterClass</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.boot.logging.logback.WhitespaceThrowableProxyConverter<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>conversionRule</span> <span class="token attr-name">conversionWord</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wEx<span class="token punctuation">&quot;</span></span> <span class="token attr-name">converterClass</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.boot.logging.logback.ExtendedWhitespaceThrowableProxyConverter<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>CONSOLE_LOG_PATTERN<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${CONSOLE_LOG_PATTERN:-%clr(%d{${LOG_DATEFORMAT_PATTERN:-yyyy-MM-dd HH:mm:ss.SSS}}){faint} %clr(${LOG_LEVEL_PATTERN:-%5p}) %clr(${PID:- }){magenta} %clr(---){faint} %clr([%15.15t]){faint} %clr(%-40.40logger{39}){cyan} %clr(:){faint} %m%n${LOG_EXCEPTION_CONVERSION_WORD:-%wEx}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>CONSOLE_LOG_CHARSET<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${CONSOLE_LOG_CHARSET:-${file.encoding:-UTF-8}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>FILE_LOG_PATTERN<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${FILE_LOG_PATTERN:-%d{${LOG_DATEFORMAT_PATTERN:-yyyy-MM-dd HH:mm:ss.SSS}} ${LOG_LEVEL_PATTERN:-%5p} ${PID:- } --- [%t] %-40.40logger{39} : %m%n${LOG_EXCEPTION_CONVERSION_WORD:-%wEx}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>FILE_LOG_CHARSET<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${FILE_LOG_CHARSET:-${file.encoding:-UTF-8}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>logger</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.apache.catalina.startup.DigesterFactory<span class="token punctuation">&quot;</span></span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ERROR<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>logger</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.apache.catalina.util.LifecycleBase<span class="token punctuation">&quot;</span></span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ERROR<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>logger</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.apache.coyote.http11.Http11NioProtocol<span class="token punctuation">&quot;</span></span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>WARN<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>logger</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.apache.sshd.common.util.SecurityUtils<span class="token punctuation">&quot;</span></span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>WARN<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>logger</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.apache.tomcat.util.net.NioSelectorPool<span class="token punctuation">&quot;</span></span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>WARN<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>logger</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.eclipse.jetty.util.component.AbstractLifeCycle<span class="token punctuation">&quot;</span></span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ERROR<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>logger</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.hibernate.validator.internal.util.Version<span class="token punctuation">&quot;</span></span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>WARN<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>logger</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.boot.actuate.endpoint.jmx<span class="token punctuation">&quot;</span></span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>WARN<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>included</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯¼å…¥åï¼Œæˆ‘ä»¬åˆ©ç”¨é¢„è®¾çš„æ—¥å¿—æ ¼å¼åˆ›å»ºä¸€ä¸ªæ§åˆ¶å°æ—¥å¿—æ‰“å°ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--  å¯¼å…¥å…¶ä»–é…ç½®æ–‡ä»¶ï¼Œä½œä¸ºé¢„è®¾  --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org/springframework/boot/logging/logback/defaults.xml<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

    <span class="token comment">&lt;!--  Appenderä½œä¸ºæ—¥å¿—æ‰“å°å™¨é…ç½®ï¼Œè¿™é‡Œå‘½åéšæ„  --&gt;</span>
    <span class="token comment">&lt;!--  ch.qos.logback.core.ConsoleAppenderæ˜¯ä¸“ç”¨äºæ§åˆ¶å°çš„Appender  --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>CONSOLE<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ch.qos.logback.core.ConsoleAppender<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoder</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pattern</span><span class="token punctuation">&gt;</span></span>${CONSOLE_LOG_PATTERN}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pattern</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>charset</span><span class="token punctuation">&gt;</span></span>${CONSOLE_LOG_CHARSET}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>charset</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>encoder</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!--  æŒ‡å®šæ—¥å¿—è¾“å‡ºçº§åˆ«ï¼Œä»¥åŠå¯ç”¨çš„Appenderï¼Œè¿™é‡Œå°±ä½¿ç”¨äº†æˆ‘ä»¬ä¸Šé¢çš„ConsoleAppender  --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>root</span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>INFO<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>CONSOLE<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>root</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é…ç½®å®Œæˆåï¼Œæˆ‘ä»¬å‘ç°æ§åˆ¶å°å·²ç»å¯ä»¥æ­£å¸¸æ‰“å°æ—¥å¿—ä¿¡æ¯äº†ã€‚</p><p>æ¥ç€æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•å¼€å¯æ–‡ä»¶æ‰“å°ï¼Œæˆ‘ä»¬åªéœ€è¦é…ç½®ä¸€ä¸ªå¯¹åº”çš„Appenderå³å¯ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!--  ch.qos.logback.core.rolling.RollingFileAppenderç”¨äºæ–‡ä»¶æ—¥å¿—è®°å½•ï¼Œå®ƒæ”¯æŒæ»šåŠ¨  --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>FILE<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ch.qos.logback.core.rolling.RollingFileAppender<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoder</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pattern</span><span class="token punctuation">&gt;</span></span>${FILE_LOG_PATTERN}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pattern</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>charset</span><span class="token punctuation">&gt;</span></span>${FILE_LOG_CHARSET}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>charset</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>encoder</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--  è‡ªå®šä¹‰æ»šåŠ¨ç­–ç•¥ï¼Œé˜²æ­¢æ—¥å¿—æ–‡ä»¶æ— é™å˜å¤§ï¼Œä¹Ÿå°±æ˜¯æ—¥å¿—æ–‡ä»¶å†™åˆ°ä»€ä¹ˆæ—¶å€™ä¸ºæ­¢ï¼Œé‡æ–°åˆ›å»ºä¸€ä¸ªæ–°çš„æ—¥å¿—æ–‡ä»¶å¼€å§‹å†™  --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rollingPolicy</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--  æ–‡ä»¶ä¿å­˜ä½ç½®ä»¥åŠæ–‡ä»¶å‘½åè§„åˆ™ï¼Œè¿™é‡Œç”¨åˆ°äº†%d{yyyy-MM-dd}è¡¨ç¤ºå½“å‰æ—¥æœŸï¼Œ%iè¡¨ç¤ºè¿™ä¸€å¤©çš„ç¬¬Nä¸ªæ—¥å¿—  --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>FileNamePattern</span><span class="token punctuation">&gt;</span></span>log/%d{yyyy-MM-dd}-spring-%i.log<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>FileNamePattern</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--  åˆ°æœŸè‡ªåŠ¨æ¸…ç†æ—¥å¿—æ–‡ä»¶  --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>cleanHistoryOnStart</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>cleanHistoryOnStart</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--  æœ€å¤§æ—¥å¿—ä¿ç•™æ—¶é—´  --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maxHistory</span><span class="token punctuation">&gt;</span></span>7<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maxHistory</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--  æœ€å¤§å•ä¸ªæ—¥å¿—æ–‡ä»¶å¤§å°  --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maxFileSize</span><span class="token punctuation">&gt;</span></span>10MB<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maxFileSize</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rollingPolicy</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--  æŒ‡å®šæ—¥å¿—è¾“å‡ºçº§åˆ«ï¼Œä»¥åŠå¯ç”¨çš„Appenderï¼Œè¿™é‡Œå°±ä½¿ç”¨äº†æˆ‘ä»¬ä¸Šé¢çš„ConsoleAppender  --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>root</span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>INFO<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>CONSOLE<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>FILE<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>root</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é…ç½®å®Œæˆåï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ—¥å¿—æ–‡ä»¶ä¹Ÿèƒ½è‡ªåŠ¨ç”Ÿæˆäº†ã€‚</p><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥é­”æ”¹å®˜æ–¹æä¾›çš„æ—¥å¿—æ ¼å¼ï¼Œå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://logback.qos.ch/manual/layouts.html" target="_blank" rel="noopener noreferrer">https://logback.qos.ch/manual/layouts.html<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>è¿™é‡Œéœ€è¦æåŠçš„æ˜¯MDCæœºåˆ¶ï¼ŒLogbackå†…ç½®çš„æ—¥å¿—å­—æ®µè¿˜æ˜¯æ¯”è¾ƒå°‘ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦æ‰“å°æœ‰å…³ä¸šåŠ¡çš„æ›´å¤šçš„å†…å®¹ï¼ŒåŒ…æ‹¬è‡ªå®šä¹‰çš„ä¸€äº›æ•°æ®ï¼Œéœ€è¦å€ŸåŠ©logback MDCæœºåˆ¶ï¼ŒMDCä¸ºâ€œMapped Diagnostic Contextâ€ï¼ˆæ˜ å°„è¯Šæ–­ä¸Šä¸‹æ–‡ï¼‰ï¼Œå³å°†ä¸€äº›è¿è¡Œæ—¶çš„ä¸Šä¸‹æ–‡æ•°æ®é€šè¿‡logbackæ‰“å°å‡ºæ¥ï¼›æ­¤æ—¶æˆ‘ä»¬éœ€è¦å€ŸåŠ©org.sl4j.MDCç±»ã€‚</p><p>æ¯”å¦‚æˆ‘ä»¬ç°åœ¨éœ€è¦è®°å½•æ˜¯å“ªä¸ªç”¨æˆ·è®¿é—®æˆ‘ä»¬ç½‘ç«™çš„æ—¥å¿—ï¼Œåªè¦æ˜¯æ­¤ç”¨æˆ·è®¿é—®æˆ‘ä»¬ç½‘ç«™ï¼Œéƒ½ä¼šåœ¨æ—¥å¿—ä¸­æºå¸¦è¯¥ç”¨æˆ·çš„IDï¼Œæˆ‘ä»¬å¸Œæœ›æ¯æ¡æ—¥å¿—ä¸­éƒ½æºå¸¦è¿™æ ·ä¸€æ®µä¿¡æ¯æ–‡æœ¬ï¼Œè€Œå®˜æ–¹æä¾›çš„å­—æ®µæ— æ³•å®ç°æ­¤åŠŸèƒ½ï¼Œè¿™æ—¶å°±éœ€è¦ä½¿ç”¨MDCæœºåˆ¶ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@ResponseBody</span>
<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/test&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token constant">MDC</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;reqId&quot;</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;ç”¨æˆ·è®¿é—®äº†ä¸€æ¬¡æµ‹è¯•æ•°æ®&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> mapper<span class="token punctuation">.</span><span class="token function">findUserById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å°±å¯ä»¥å‘æ—¥å¿—ä¸­ä¼ å…¥è‡ªå®šä¹‰å‚æ•°äº†ï¼Œæˆ‘ä»¬æ—¥å¿—ä¸­æ·»åŠ è¿™æ ·ä¸€ä¸ªå ä½ç¬¦<code>%X{é”®å€¼}</code>ï¼Œåå­—ä¿æŒä¸€è‡´ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>%clr([%X{reqId}]){faint} 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿™æ ·å½“æˆ‘ä»¬å‘MDCä¸­æ·»åŠ ä¿¡æ¯åï¼Œåªè¦æ˜¯å½“å‰çº¿ç¨‹ï¼ˆæœ¬è´¨æ˜¯ThreadLocalå®ç°ï¼‰ä¸‹è¾“å‡ºçš„æ—¥å¿—ï¼Œéƒ½ä¼šè‡ªåŠ¨æ›¿æ¢å ä½ç¬¦ã€‚</p><h3 id="è‡ªå®šä¹‰bannerå±•ç¤º" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰bannerå±•ç¤º" aria-hidden="true">#</a> è‡ªå®šä¹‰Bannerå±•ç¤º</h3><p>æˆ‘ä»¬åœ¨ä¹‹å‰å‘ç°ï¼Œå®é™…ä¸ŠBanneréƒ¨åˆ†å’Œæ—¥å¿—éƒ¨åˆ†æ˜¯ç‹¬ç«‹çš„ï¼ŒSpringBootå¯åŠ¨åï¼Œä¼šå…ˆæ‰“å°Banneréƒ¨åˆ†ï¼Œé‚£ä¹ˆè¿™ä¸ªBanneréƒ¨åˆ†æ˜¯å¦å¯ä»¥è‡ªå®šä¹‰å‘¢ï¼Ÿç­”æ¡ˆæ˜¯å¯ä»¥çš„ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ç›´æ¥æ¥é…ç½®æ–‡ä»¶æ‰€åœ¨ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º<code>banner.txt</code>çš„æ–‡æœ¬æ–‡æ¡£ï¼Œå†…å®¹éšä¾¿ä½ ï¼š</p><div class="language-txt line-numbers-mode" data-ext="txt"><pre class="language-txt"><code>//                          _ooOoo_                               //
//                         o8888888o                              //
//                         88&quot; . &quot;88                              //
//                         (| ^_^ |)                              //
//                         O\  =  /O                              //
//                      ____/`---&#39;\____                           //
//                    .&#39;  \\|     |//  `.                         //
//                   /  \\|||  :  |||//  \                        //
//                  /  _||||| -:- |||||-  \                       //
//                  |   | \\\  -  /// |   |                       //
//                  | \_|  &#39;&#39;\---/&#39;&#39;  |   |                       //
//                  \  .-\__  `-`  ___/-. /                       //
//                ___`. .&#39;  /--.--\  `. . ___                     //
//              .&quot;&quot; &#39;&lt;  `.___\_&lt;|&gt;_/___.&#39;  &gt;&#39;&quot;&quot;.                  //
//            | | :  `- \`.;`\ _ /`;.`/ - ` : | |                 //
//            \  \ `-.   \_ __\ /__ _/   .-` /  /                 //
//      ========`-.____`-.___\_____/___.-`____.-&#39;========         //
//                           `=---=&#39;                              //
//      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^        //
//             ä½›ç¥–ä¿ä½‘          æ°¸æ— BUG         æ°¸ä¸ä¿®æ”¹             //
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥ä½¿ç”¨åœ¨çº¿ç”Ÿæˆç½‘ç«™è¿›è¡Œç”Ÿæˆè‡ªå·±çš„ä¸ªæ€§Bannerï¼š<a href="https://www.bootschool.net/ascii" target="_blank" rel="noopener noreferrer">https://www.bootschool.net/ascii<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>æˆ‘ä»¬ç”šè‡³è¿˜å¯ä»¥ä½¿ç”¨é¢œè‰²ä»£ç æ¥ä¸ºæ–‡æœ¬åˆ‡æ¢é¢œè‰²ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>${AnsiColor.BRIGHT_GREEN}  //ç»¿è‰²
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¹Ÿå¯ä»¥è·å–ä¸€äº›å¸¸ç”¨çš„å˜é‡ä¿¡æ¯ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>${AnsiColor.YELLOW} å½“å‰ Spring Boot ç‰ˆæœ¬ï¼š${spring-boot.version}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å‰é¢å¿˜äº†ï¼Œåé¢å¿˜äº†ï¼Œç‹ ç‹ èµšä¸€ç¬”ï¼</p><hr><h2 id="å¤šç¯å¢ƒé…ç½®" tabindex="-1"><a class="header-anchor" href="#å¤šç¯å¢ƒé…ç½®" aria-hidden="true">#</a> å¤šç¯å¢ƒé…ç½®</h2><p>åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œæˆ‘ä»¬é¡¹ç›®ä¼šæœ‰å¤šä¸ªç¯å¢ƒã€‚ä¾‹å¦‚å¼€å‘ç¯å¢ƒï¼ˆdevelopï¼‰ä¹Ÿå°±æ˜¯æˆ‘ä»¬ç ”å‘è¿‡ç¨‹ä¸­ç–¯ç‹‚æ•²ä»£ç ä¿®BUGé˜¶æ®µï¼Œç”Ÿäº§ç¯å¢ƒï¼ˆproduction ï¼‰é¡¹ç›®å¼€å‘å¾—å·®ä¸å¤šäº†ï¼Œå¯ä»¥æ”¾åœ¨æœåŠ¡å™¨ä¸Šè·‘äº†ã€‚ä¸åŒçš„ç¯å¢ƒä¸‹ï¼Œå¯èƒ½æˆ‘ä»¬çš„é…ç½®æ–‡ä»¶ä¹Ÿå­˜åœ¨ä¸åŒï¼Œä½†æ˜¯æˆ‘ä»¬ä¸å¯èƒ½åˆ‡æ¢ç¯å¢ƒçš„æ—¶å€™åˆå»é‡æ–°å†™ä¸€æ¬¡é…ç½®æ–‡ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†å¤šä¸ªç¯å¢ƒçš„é…ç½®æ–‡ä»¶æå‰å†™å¥½ï¼Œè¿›è¡Œè‡ªç”±åˆ‡æ¢ã€‚</p><p>ç”±äºSpringBootåªä¼šè¯»å–<code>application.properties</code>æˆ–æ˜¯<code>application.yml</code>æ–‡ä»¶ï¼Œé‚£ä¹ˆæ€ä¹ˆæ‰èƒ½å®ç°è‡ªç”±åˆ‡æ¢å‘¢ï¼ŸSpringBootç»™æˆ‘ä»¬æä¾›äº†ä¸€ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶æŒ‡å®šï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">profiles</span><span class="token punctuation">:</span>
    <span class="token key atrule">active</span><span class="token punctuation">:</span> dev
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ¥ç€æˆ‘ä»¬åˆ†åˆ«åˆ›å»ºä¸¤ä¸ªç¯å¢ƒçš„é…ç½®æ–‡ä»¶ï¼Œ<code>application-dev.yml</code>å’Œ<code>application-prod.yml</code>åˆ†åˆ«è¡¨ç¤ºå¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒçš„é…ç½®æ–‡ä»¶ï¼Œæ¯”å¦‚å¼€å‘ç¯å¢ƒæˆ‘ä»¬ä½¿ç”¨çš„æœåŠ¡å™¨ç«¯å£ä¸º8080ï¼Œè€Œç”Ÿäº§ç¯å¢ƒä¸‹å¯èƒ½å°±éœ€è¦è®¾ç½®ä¸º80æˆ–æ˜¯443ç«¯å£ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™å°±éœ€è¦ä¸åŒç¯å¢ƒä¸‹çš„é…ç½®æ–‡ä»¶è¿›è¡ŒåŒºåˆ†ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8080</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥çµæ´»åˆ‡æ¢ç”Ÿäº§ç¯å¢ƒå’Œå¼€å‘ç¯å¢ƒä¸‹çš„é…ç½®æ–‡ä»¶äº†ã€‚</p><p>SpringBootè‡ªå¸¦çš„Logbackæ—¥å¿—ç³»ç»Ÿä¹Ÿæ˜¯æ”¯æŒå¤šç¯å¢ƒé…ç½®çš„ï¼Œæ¯”å¦‚æˆ‘ä»¬æƒ³åœ¨å¼€å‘ç¯å¢ƒä¸‹è¾“å‡ºæ—¥å¿—åˆ°æ§åˆ¶å°ï¼Œè€Œç”Ÿäº§ç¯å¢ƒä¸‹åªéœ€è¦è¾“å‡ºåˆ°æ–‡ä»¶å³å¯ï¼Œè¿™æ—¶å°±éœ€è¦è¿›è¡Œç¯å¢ƒé…ç½®ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>springProfile</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dev<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>root</span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>INFO<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>CONSOLE<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>FILE<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>root</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>springProfile</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>springProfile</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>prod<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>root</span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>INFO<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>FILE<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>root</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>springProfile</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„<code>springProfile</code>æ˜¯åŒºåˆ†å¤§å°å†™çš„ï¼</p><p>é‚£å¦‚æœæˆ‘ä»¬å¸Œæœ›ç”Ÿäº§ç¯å¢ƒä¸­ä¸è¦æ‰“åŒ…å¼€å‘ç¯å¢ƒä¸‹çš„é…ç½®æ–‡ä»¶å‘¢ï¼Œæˆ‘ä»¬ç›®å‰è™½ç„¶å¯ä»¥åˆ‡æ¢å¼€å‘ç¯å¢ƒï¼Œä½†æ˜¯æ‰“åŒ…çš„æ—¶å€™ä¾ç„¶æ˜¯æ‰€æœ‰é…ç½®æ–‡ä»¶å…¨éƒ¨æ‰“åŒ…ï¼Œè¿™æ ·æ€»æ„Ÿè§‰è¿˜æ¬ ç¼ºä¸€ç‚¹å®Œç¾ï¼Œå› æ­¤ï¼Œæ‰“åŒ…çš„é—®é¢˜å°±åªèƒ½æ‰¾Mavenè§£å†³äº†ï¼ŒMavenä¹Ÿå¯ä»¥è®¾ç½®å¤šç¯å¢ƒï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!--åˆ†åˆ«è®¾ç½®å¼€å‘ï¼Œç”Ÿäº§ç¯å¢ƒ--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>profiles</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- å¼€å‘ç¯å¢ƒ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>profile</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>dev<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activation</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activeByDefault</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activeByDefault</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activation</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environment</span><span class="token punctuation">&gt;</span></span>dev<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environment</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>profile</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- ç”Ÿäº§ç¯å¢ƒ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>profile</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>prod<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activation</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activeByDefault</span><span class="token punctuation">&gt;</span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activeByDefault</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activation</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environment</span><span class="token punctuation">&gt;</span></span>prod<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environment</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>profile</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>profiles</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ¥ç€ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®ç¯å¢ƒçš„ä¸åŒï¼Œæ’é™¤å…¶ä»–ç¯å¢ƒçš„é…ç½®æ–‡ä»¶ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resources</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--æ’é™¤é…ç½®æ–‡ä»¶--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resource</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>directory</span><span class="token punctuation">&gt;</span></span>src/main/resources<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>directory</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--å…ˆæ’é™¤æ‰€æœ‰çš„é…ç½®æ–‡ä»¶--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>excludes</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!--ä½¿ç”¨é€šé…ç¬¦ï¼Œå½“ç„¶å¯ä»¥å®šä¹‰å¤šä¸ªexcludeæ ‡ç­¾è¿›è¡Œæ’é™¤--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclude</span><span class="token punctuation">&gt;</span></span>application*.yml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclude</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>excludes</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resource</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!--æ ¹æ®æ¿€æ´»æ¡ä»¶å¼•å…¥æ‰“åŒ…æ‰€éœ€çš„é…ç½®å’Œæ–‡ä»¶--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resource</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>directory</span><span class="token punctuation">&gt;</span></span>src/main/resources<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>directory</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--å¼•å…¥æ‰€éœ€ç¯å¢ƒçš„é…ç½®æ–‡ä»¶--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filtering</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filtering</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>includes</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">&gt;</span></span>application.yml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!--æ ¹æ®mavené€‰æ‹©ç¯å¢ƒå¯¼å…¥é…ç½®æ–‡ä»¶--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">&gt;</span></span>application-${environment}.yml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>includes</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resource</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resources</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ¥ç€ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å°†Mavenä¸­çš„<code>environment</code>å±æ€§ï¼Œä¼ é€’ç»™SpringBootçš„é…ç½®æ–‡ä»¶ï¼Œåœ¨æ„å»ºæ—¶æ›¿æ¢ä¸ºå¯¹åº”çš„å€¼ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">profiles</span><span class="token punctuation">:</span>
    <span class="token key atrule">active</span><span class="token punctuation">:</span> <span class="token string">&#39;@environment@&#39;</span>  <span class="token comment">#æ³¨æ„YAMLé…ç½®æ–‡ä»¶éœ€è¦åŠ å•å¼•å·ï¼Œå¦åˆ™ä¼šæŠ¥é”™</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ ·ï¼Œæ ¹æ®æˆ‘ä»¬Mavenç¯å¢ƒçš„åˆ‡æ¢ï¼ŒSpringBootçš„é…ç½®æ–‡ä»¶ä¹Ÿä¼šè¿›è¡Œå¯¹åº”çš„åˆ‡æ¢ã€‚</p><p>æœ€åæˆ‘ä»¬æ‰“å¼€Mavenæ ç›®ï¼Œå°±å¯ä»¥è‡ªç”±åˆ‡æ¢äº†ï¼Œç›´æ¥å‹¾é€‰å³å¯ï¼Œæ³¨æ„åˆ‡æ¢ç¯å¢ƒä¹‹åè¦é‡æ–°åŠ è½½ä¸€ä¸‹Mavené¡¹ç›®ï¼Œä¸ç„¶ä¸ä¼šç”Ÿæ•ˆï¼</p><hr><h2 id="å¸¸ç”¨æ¡†æ¶ä»‹ç»" tabindex="-1"><a class="header-anchor" href="#å¸¸ç”¨æ¡†æ¶ä»‹ç»" aria-hidden="true">#</a> å¸¸ç”¨æ¡†æ¶ä»‹ç»</h2><p>å‰é¢æˆ‘ä»¬ä»‹ç»äº†SpringBooté¡¹ç›®çš„åŸºæœ¬æ­å»ºï¼Œç›¸ä¿¡å„ä½å°ä¼™ä¼´å·²ç»ä½“éªŒåˆ°SpringBoot 3å¸¦æ¥çš„è¶…å¼ºä¾¿æ·æ€§äº†ï¼Œä¸è¿‡å…‰é è¿™äº›è¿˜ä¸å¤Ÿï¼Œæˆ‘ä»¬è¿˜éœ€è¦äº†è§£æ›´å¤šæ¡†æ¶æ¥ä¸°å¯Œæˆ‘ä»¬çš„ç½‘ç«™ï¼Œé€šè¿‡äº†è§£å…¶ä»–çš„SpringBootæ•´åˆæ¡†æ¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨æˆ‘ä»¬è‡ªå·±çš„WebæœåŠ¡å™¨ä¸Šå®ç°æ›´å¤šæ›´é«˜çº§çš„åŠŸèƒ½ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸ºäº†ç»™æˆ‘ä»¬åç»­å­¦ä¹ å‰åç«¯åˆ†ç¦»é¡¹ç›®åšå‡†å¤‡ã€‚</p><h3 id="é‚®ä»¶å‘é€æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#é‚®ä»¶å‘é€æ¨¡å—" aria-hidden="true">#</a> é‚®ä»¶å‘é€æ¨¡å—</h3><p>éƒ½ä»€ä¹ˆå¹´ä»£äº†ï¼Œè¿˜åœ¨å‘ä¼ ç»Ÿé‚®ä»¶ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ç”µå­é‚®ä»¶ã€‚</p><p>æˆ‘ä»¬åœ¨æ³¨å†Œå¾ˆå¤šçš„ç½‘ç«™æ—¶ï¼Œéƒ½ä¼šé‡åˆ°é‚®ä»¶æˆ–æ˜¯æ‰‹æœºå·éªŒè¯ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡ä½ çš„é‚®ç®±æˆ–æ˜¯æ‰‹æœºçŸ­ä¿¡å»æ¥å—ç½‘ç«™å‘ç»™ä½ çš„æ³¨å†ŒéªŒè¯ä¿¡æ¯ï¼Œå¡«å†™éªŒè¯ç ä¹‹åï¼Œå°±å¯ä»¥å®Œæˆæ³¨å†Œäº†ï¼ŒåŒæ—¶ï¼Œç½‘ç«™ä¹Ÿä¼šç»‘å®šä½ çš„æ‰‹æœºå·æˆ–æ˜¯é‚®ç®±ã€‚</p><p>é‚£ä¹ˆï¼Œåƒè¿™æ ·çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬å¦‚ä½•å®ç°å‘¢ï¼ŸSpringBootå·²ç»ç»™æˆ‘ä»¬æä¾›äº†å°è£…å¥½çš„é‚®ä»¶æ¨¡å—ä½¿ç”¨ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-mail<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨å­¦ä¹ é‚®ä»¶å‘é€ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆäº†è§£ä¸€ä¸‹ä»€ä¹ˆæ˜¯ç”µå­é‚®ä»¶ã€‚</p><blockquote><p>ç”µå­é‚®ä»¶ä¹Ÿæ˜¯ä¸€ç§é€šä¿¡æ–¹å¼ï¼Œæ˜¯äº’è”ç½‘åº”ç”¨æœ€å¹¿çš„æœåŠ¡ã€‚é€šè¿‡ç½‘ç»œçš„ç”µå­é‚®ä»¶ç³»ç»Ÿï¼Œç”¨æˆ·å¯ä»¥ä»¥éå¸¸ä½å»‰çš„ä»·æ ¼ï¼ˆä¸ç®¡å‘é€åˆ°å“ªé‡Œï¼Œéƒ½åªéœ€è´Ÿæ‹…ç½‘è´¹ï¼Œå®é™…ä¸Šå°±æ˜¯æŠŠä¿¡æ¯å‘é€åˆ°å¯¹æ–¹æœåŠ¡å™¨è€Œå·²ï¼‰ã€éå¸¸å¿«é€Ÿçš„æ–¹å¼ï¼Œä¸ä¸–ç•Œä¸Šä»»ä½•ä¸€ä¸ªåœ°æ–¹çš„ç”µå­é‚®ç®±ç”¨æˆ·è”ç³»ã€‚</p></blockquote><p>è™½è¯´æ–¹ä¾¿å€’æ˜¯æ–¹ä¾¿ï¼Œè™½ç„¶æ˜¯æ›¾ç»çš„éœ¸ä¸»ï¼Œä¸è¿‡ç°åœ¨è¿™ä¸ªæ—¶ä»£ï¼ŒQQå¾®ä¿¡æ¨ªè¡Œï¼Œæ‰‹æœºçŸ­ä¿¡å’Œç”µå­é‚®ç®±è²Œä¼¼å°±åªå‰©æ”¶éªŒè¯ç è¿™ä¸€ä¸ªåŠŸèƒ½äº†ã€‚</p><p>è¦åœ¨Internetä¸Šæä¾›ç”µå­é‚®ä»¶åŠŸèƒ½ï¼Œå¿…é¡»æœ‰ä¸“é—¨çš„ç”µå­é‚®ä»¶æœåŠ¡å™¨ã€‚ä¾‹å¦‚ç°åœ¨Internetå¾ˆå¤šæä¾›é‚®ä»¶æœåŠ¡çš„å‚å•†ï¼šæ–°æµªã€æœç‹ã€163ã€QQé‚®ç®±ç­‰ï¼Œä»–ä»¬éƒ½æœ‰è‡ªå·±çš„é‚®ä»¶æœåŠ¡å™¨ã€‚è¿™äº›æœåŠ¡å™¨ç±»ä¼¼äºç°å®ç”Ÿæ´»ä¸­çš„é‚®å±€ï¼Œå®ƒä¸»è¦è´Ÿè´£æ¥æ”¶ç”¨æˆ·æŠ•é€’è¿‡æ¥çš„é‚®ä»¶ï¼Œå¹¶æŠŠé‚®ä»¶æŠ•é€’åˆ°é‚®ä»¶æ¥æ”¶è€…çš„ç”µå­é‚®ç®±ä¸­ã€‚</p><p>æ‰€æœ‰çš„ç”¨æˆ·éƒ½å¯ä»¥åœ¨ç”µå­é‚®ä»¶æœåŠ¡å™¨ä¸Šç”³è¯·ä¸€ä¸ªè´¦å·ç”¨äºé‚®ä»¶å‘é€å’Œæ¥æ”¶ï¼Œé‚£ä¹ˆé‚®ä»¶æ˜¯ä»¥ä»€ä¹ˆæ ·çš„æ ¼å¼å‘é€çš„å‘¢ï¼Ÿå®é™…ä¸Šå’ŒHttpä¸€æ ·ï¼Œé‚®ä»¶å‘é€ä¹Ÿæœ‰è‡ªå·±çš„åè®®ï¼Œä¹Ÿå°±æ˜¯çº¦å®šé‚®ä»¶æ•°æ®é•¿å•¥æ ·ä»¥åŠå¦‚ä½•é€šä¿¡ã€‚</p><figure><img src="https://s2.loli.net/2023/07/16/sL56YdmgGblfFjo.png" alt="image-20230716172901937" tabindex="0" loading="lazy"><figcaption>image-20230716172901937</figcaption></figure><p>æ¯”è¾ƒå¸¸ç”¨çš„åè®®æœ‰ä¸¤ç§ï¼š</p><ol><li>SMTPåè®®ï¼ˆä¸»è¦ç”¨äºå‘é€é‚®ä»¶ Simple Mail Transfer Protocolï¼‰</li><li>POP3åè®®ï¼ˆä¸»è¦ç”¨äºæ¥æ”¶é‚®ä»¶ Post Office Protocol 3ï¼‰</li></ol><p>æ•´ä¸ªå‘é€/æ¥æ”¶æµç¨‹å¤§è‡´å¦‚ä¸‹ï¼š</p><figure><img src="https://s2.loli.net/2023/07/16/sOyWQguFonJKXNw.jpg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>å®é™…ä¸Šæ¯ä¸ªé‚®ç®±æœåŠ¡å™¨éƒ½æœ‰ä¸€ä¸ªsmtpå‘é€æœåŠ¡å™¨å’Œpop3æ¥æ”¶æœåŠ¡å™¨ï¼Œæ¯”å¦‚è¦ä»QQé‚®ç®±å‘é€é‚®ä»¶åˆ°163é‚®ç®±ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦é€šè¿‡QQé‚®ç®±å®¢æˆ·ç«¯å‘ŠçŸ¥QQé‚®ç®±çš„smtpæœåŠ¡å™¨æˆ‘ä»¬éœ€è¦å‘é€é‚®ä»¶ï¼Œä»¥åŠé‚®ä»¶çš„ç›¸å…³ä¿¡æ¯ï¼Œç„¶åQQé‚®ç®±çš„smtpæœåŠ¡å™¨å°±ä¼šå¸®åŠ©æˆ‘ä»¬å‘é€åˆ°163é‚®ç®±çš„pop3æœåŠ¡å™¨ä¸Šï¼Œ163é‚®ç®±ä¼šé€šè¿‡163é‚®ç®±å®¢æˆ·ç«¯å‘ŠçŸ¥å¯¹åº”ç”¨æˆ·æ”¶åˆ°ä¸€å°æ–°é‚®ä»¶ã€‚</p><p>è€Œæˆ‘ä»¬å¦‚æœæƒ³è¦å®ç°ç»™åˆ«äººå‘é€é‚®ä»¶ï¼Œé‚£ä¹ˆå°±éœ€è¦è¿æ¥åˆ°å¯¹åº”ç”µå­é‚®ç®±çš„smtpæœåŠ¡å™¨ä¸Šï¼Œå¹¶å‘ŠçŸ¥å…¶æˆ‘ä»¬è¦å‘é€é‚®ä»¶ã€‚è€ŒSpringBootå·²ç»å¸®åŠ©æˆ‘ä»¬å°†æœ€åŸºæœ¬çš„åº•å±‚é€šä¿¡å…¨éƒ¨å®ç°äº†ï¼Œæˆ‘ä»¬åªéœ€è¦å…³å¿ƒsmtpæœåŠ¡å™¨çš„åœ°å€ä»¥åŠæˆ‘ä»¬è¦å‘é€çš„é‚®ä»¶é•¿å•¥æ ·å³å¯ã€‚</p><p>è¿™é‡Œä»¥163é‚®ç®± <a href="https://mail.163.com/" target="_blank" rel="noopener noreferrer">https://mail.163.com<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> ä¸ºä¾‹ï¼Œæˆ‘ä»¬éœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­å‘Šè¯‰SpringBootMailæˆ‘ä»¬çš„smtpæœåŠ¡å™¨çš„åœ°å€ä»¥åŠä½ çš„é‚®ç®±è´¦å·å’Œå¯†ç ï¼Œé¦–å…ˆæˆ‘ä»¬è¦å»è®¾ç½®ä¸­å¼€å¯smtp/pop3æœåŠ¡æ‰å¯ä»¥ï¼Œå¼€å¯åä¼šå¾—åˆ°ä¸€ä¸ªéšæœºç”Ÿæˆçš„å¯†é’¥ï¼Œè¿™ä¸ªå°±æ˜¯æˆ‘ä»¬çš„å¯†ç ã€‚</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">mail</span><span class="token punctuation">:</span>
      <span class="token comment"># 163é‚®ç®±çš„åœ°å€ä¸ºsmtp.163.comï¼Œç›´æ¥å¡«å†™å³å¯</span>
    <span class="token key atrule">host</span><span class="token punctuation">:</span> smtp.163.com
    <span class="token comment"># ä½ ç”³è¯·çš„163é‚®ç®±</span>
    <span class="token key atrule">username</span><span class="token punctuation">:</span> javastudy111@163.com
    <span class="token comment"># æ³¨æ„å¯†ç æ˜¯åœ¨å¼€å¯smtp/pop3æ—¶è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œè®°å¾—ä¿å­˜ä¸€ä¸‹ï¼Œä¸ç„¶å°±æ‰¾ä¸åˆ°äº†</span>
    <span class="token key atrule">password</span><span class="token punctuation">:</span> AZJTOAWZESLMHTNI
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é…ç½®å®Œæˆåï¼Œæ¥ç€æˆ‘ä»¬æ¥è¿›è¡Œä¸€ä¸‹æµ‹è¯•ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">class</span> <span class="token class-name">SpringBootTestApplicationTests</span> <span class="token punctuation">{</span>

      <span class="token comment">//JavaMailSenderæ˜¯ä¸“é—¨ç”¨äºå‘é€é‚®ä»¶çš„å¯¹è±¡ï¼Œè‡ªåŠ¨é…ç½®ç±»å·²ç»æä¾›äº†Bean</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token class-name">JavaMailSender</span> sender<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">contextLoads</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">//SimpleMailMessageæ˜¯ä¸€ä¸ªæ¯”è¾ƒç®€æ˜“çš„é‚®ä»¶å°è£…ï¼Œæ”¯æŒè®¾ç½®ä¸€äº›æ¯”è¾ƒç®€å•å†…å®¹</span>
        <span class="token class-name">SimpleMailMessage</span> message <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleMailMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token comment">//è®¾ç½®é‚®ä»¶æ ‡é¢˜</span>
        message<span class="token punctuation">.</span><span class="token function">setSubject</span><span class="token punctuation">(</span><span class="token string">&quot;ã€ç”µå­ç§‘æŠ€å¤§å­¦æ•™åŠ¡å¤„ã€‘å…³äºè¿‘æœŸå­¦æ ¡å¯¹æ‚¨çš„å¤„åˆ†å†³å®š&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token comment">//è®¾ç½®é‚®ä»¶å†…å®¹</span>
        message<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">&quot;XXXåŒå­¦æ‚¨å¥½ï¼Œç»ç›‘æ§å’Œæ•™åŠ¡å·¡æŸ¥å‘ç°ï¼Œæ‚¨è¿‘æœŸå­˜åœ¨æ—·è¯¾ã€è¿Ÿåˆ°ã€æ—©é€€ã€ä¸Šè¯¾åˆ·æŠ–éŸ³è¡Œä¸ºï¼Œ&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;ç°å·²é€šçŸ¥ç›¸å…³è¾…å¯¼å‘˜ï¼Œè¯·æ‰‹å†™5000å­—ä¹¦é¢æ£€è®¨ï¼Œå¹¶åœ¨2022å¹´4æœˆ1æ—¥17ç‚¹å‰äº¤åˆ°è¾…å¯¼å‘˜åŠå…¬å®¤ã€‚&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token comment">//è®¾ç½®é‚®ä»¶å‘é€ç»™è°ï¼Œå¯ä»¥å¤šä¸ªï¼Œè¿™é‡Œå°±å‘ç»™ä½ çš„QQé‚®ç®±</span>
        message<span class="token punctuation">.</span><span class="token function">setTo</span><span class="token punctuation">(</span><span class="token string">&quot;ä½ çš„QQå·@qq.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token comment">//é‚®ä»¶å‘é€è€…ï¼Œè¿™é‡Œè¦ä¸é…ç½®æ–‡ä»¶ä¸­çš„ä¿æŒä¸€è‡´</span>
        message<span class="token punctuation">.</span><span class="token function">setFrom</span><span class="token punctuation">(</span><span class="token string">&quot;javastudy111@163.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token comment">//OKï¼Œä¸‡äº‹ä¿±å¤‡åªæ¬ å‘é€</span>
        sender<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœéœ€è¦æ·»åŠ é™„ä»¶ç­‰æ›´å¤šåŠŸèƒ½ï¼Œå¯ä»¥ä½¿ç”¨MimeMessageHelperæ¥å¸®åŠ©æˆ‘ä»¬å®Œæˆï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">contextLoads</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">MessagingException</span> <span class="token punctuation">{</span>
      <span class="token comment">//åˆ›å»ºä¸€ä¸ªMimeMessage</span>
    <span class="token class-name">MimeMessage</span> message <span class="token operator">=</span> sender<span class="token punctuation">.</span><span class="token function">createMimeMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">//ä½¿ç”¨MimeMessageHelperæ¥å¸®æˆ‘ä»¬ä¿®æ”¹MimeMessageä¸­çš„ä¿¡æ¯</span>
    <span class="token class-name">MimeMessageHelper</span> helper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MimeMessageHelper</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    helper<span class="token punctuation">.</span><span class="token function">setSubject</span><span class="token punctuation">(</span><span class="token string">&quot;Test&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    helper<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">&quot;lbwnb&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    helper<span class="token punctuation">.</span><span class="token function">setTo</span><span class="token punctuation">(</span><span class="token string">&quot;ä½ çš„QQå·@qq.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    helper<span class="token punctuation">.</span><span class="token function">setFrom</span><span class="token punctuation">(</span><span class="token string">&quot;javastudy111@163.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">//å‘é€ä¿®æ”¹å¥½çš„MimeMessage</span>
    sender<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ€åï¼Œæˆ‘ä»¬æ¥å°è¯•ä¸ºæˆ‘ä»¬çš„ç½‘ç«™å®ç°ä¸€ä¸ªé‚®ä»¶æ³¨å†ŒåŠŸèƒ½ï¼Œé¦–å…ˆæ˜ç¡®éªŒè¯æµç¨‹ï¼šè¯·æ±‚éªŒè¯ç  -&gt; ç”ŸæˆéªŒè¯ç ï¼ˆä¸´æ—¶æœ‰æ•ˆï¼Œæ³¨æ„è®¾å®šè¿‡æœŸæ—¶é—´ï¼‰ -&gt; ç”¨æˆ·è¾“å…¥éªŒè¯ç å¹¶å¡«å†™æ³¨å†Œä¿¡æ¯ -&gt; éªŒè¯é€šè¿‡æ³¨å†ŒæˆåŠŸï¼</p><p>æ¥ç€æˆ‘ä»¬å°±æ¥ç€æ‰‹å†™ä¸€ä¸‹ã€‚</p><h3 id="æ¥å£è§„åˆ™æ ¡éªŒ" tabindex="-1"><a class="header-anchor" href="#æ¥å£è§„åˆ™æ ¡éªŒ" aria-hidden="true">#</a> æ¥å£è§„åˆ™æ ¡éªŒ</h3><p>é€šå¸¸æˆ‘ä»¬åœ¨ä½¿ç”¨SpringMvcæ¡†æ¶ç¼–å†™æ¥å£æ—¶ï¼Œå¾ˆæœ‰å¯èƒ½ç”¨æˆ·å‘é€çš„æ•°æ®å­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚ä¸‹é¢è¿™ä¸ªæ¥å£ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@ResponseBody</span>
<span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/submit&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">submit</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">,</span>
                     <span class="token class-name">String</span> password<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>username<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>password<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">&quot;è¯·æ±‚æˆåŠŸ!&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªæ¥å£ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å°†ç”¨æˆ·åå’Œå¯†ç åˆ†å‰²ç„¶åæ‰“å°ï¼Œåœ¨æ­£å¸¸æƒ…å†µä¸‹ï¼Œå› ä¸ºç”¨æˆ·åé•¿åº¦è§„å®šä¸å°äº5ï¼Œå¦‚æœç”¨æˆ·å‘é€çš„æ•°æ®æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œé‚£ä¹ˆå°±å¯ä»¥æ­£å¸¸è¿è¡Œï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬æ‰€å¸Œæœ›çš„æƒ…å†µï¼Œä½†æ˜¯å¦‚æœç”¨æˆ·å‘é€çš„æ•°æ®å¹¶ä¸æ˜¯æŒ‰ç…§è§„å®šçš„ï¼Œé‚£ä¹ˆå°±ä¼šç›´æ¥æŠ¥é”™ï¼š</p><figure><img src="https://s2.loli.net/2023/07/16/n1FMADOiQCRcGw6.png" alt="image-20230716215850225" tabindex="0" loading="lazy"><figcaption>image-20230716215850225</figcaption></figure><p>è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±éœ€è¦åœ¨è¯·æ±‚è¿›æ¥ä¹‹å‰è¿›è¡Œæ ¡éªŒäº†ï¼Œæœ€ç®€å•çš„åŠæ³•å°±æ˜¯åˆ¤æ–­ä¸€ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@ResponseBody</span>
<span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/submit&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">submit</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">,</span>
                     <span class="token class-name">String</span> password<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>username<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">3</span> <span class="token operator">&amp;&amp;</span> password<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>username<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>password<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;è¯·æ±‚æˆåŠŸ!&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;è¯·æ±‚å¤±è´¥&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è™½ç„¶è¿™æ ·å°±èƒ½ç›´æ¥è§£å†³é—®é¢˜ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬çš„æ¯ä¸€ä¸ªæ¥å£éƒ½éœ€è¦è¿™æ ·å»è¿›è¡Œé…ç½®ï¼Œé‚£ä¹ˆæ˜¯ä¸æ˜¯å¤ªéº»çƒ¦äº†ä¸€ç‚¹ï¼ŸSpringBootä¸ºæˆ‘ä»¬æä¾›äº†å¾ˆæ–¹ä¾¿çš„æ¥å£æ ¡éªŒæ¡†æ¶ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-validation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨æ³¨è§£å®Œæˆå…¨éƒ¨æ¥å£çš„æ ¡éªŒï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@Validated</span>   <span class="token comment">//é¦–å…ˆåœ¨Controllerä¸Šå¼€å¯æ¥å£æ ¡éªŒ</span>
<span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestController</span> <span class="token punctuation">{</span>

    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

    <span class="token annotation punctuation">@ResponseBody</span>
    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/submit&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">submit</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Length</span><span class="token punctuation">(</span>min <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token class-name">String</span> username<span class="token punctuation">,</span>  <span class="token comment">//ä½¿ç”¨@Lengthæ³¨è§£ä¸€æ­¥åˆ°ä½</span>
                         <span class="token annotation punctuation">@Length</span><span class="token punctuation">(</span>min <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token class-name">String</span> password<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>username<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>password<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;è¯·æ±‚æˆåŠŸ!&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç°åœ¨ï¼Œæˆ‘ä»¬çš„æ¥å£æ ¡éªŒå°±å¯ä»¥å¿«é€Ÿè¿›è¡Œé…ç½®äº†ï¼Œä¸€ä¸ªæ¥å£å°±èƒ½æå®šï¼š</p><figure><img src="https://s2.loli.net/2023/07/16/EibCc4sHWflywek.png" alt="image-20230716220839816" tabindex="0" loading="lazy"><figcaption>image-20230716220839816</figcaption></figure><p>ä¸è¿‡è¿™æ ·ä¾ç„¶ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œå¯¹ç”¨æˆ·ä¸å¤ªå‹å¥½ï¼Œæˆ‘ä»¬å¯ä»¥ç¨å¾®å¤„ç†ä¸€ä¸‹ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ä¹‹å‰åœ¨SSMé˜¶æ®µä¸­å­¦ä¹ çš„å¼‚å¸¸å¤„ç†Controlleræ¥è‡ªè¡Œå¤„ç†è¿™ç±»å¼‚å¸¸ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@ControllerAdvice</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ValidationController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@ResponseBody</span>
    <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span><span class="token class-name">ConstraintViolationException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">error</span><span class="token punctuation">(</span><span class="token class-name">ValidationException</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//å‡ºç°å¼‚å¸¸ç›´æ¥è¿”å›æ¶ˆæ¯</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://s2.loli.net/2023/07/16/7JH6BzOhlUe9gkG.png" alt="image-20230716221420324" tabindex="0" loading="lazy"><figcaption>image-20230716221420324</figcaption></figure><p>é™¤äº†@Lengthä¹‹å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–çš„æ¥å£æ¥å®ç°å„ç§æ•°æ®æ ¡éªŒï¼š</p><table><thead><tr><th style="text-align:center;">éªŒè¯æ³¨è§£</th><th style="text-align:center;">éªŒè¯çš„æ•°æ®ç±»å‹</th><th style="text-align:center;">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:center;">@AssertFalse</td><td style="text-align:center;">Boolean,boolean</td><td style="text-align:center;">å€¼å¿…é¡»æ˜¯false</td></tr><tr><td style="text-align:center;">@AssertTrue</td><td style="text-align:center;">Boolean,boolean</td><td style="text-align:center;">å€¼å¿…é¡»æ˜¯true</td></tr><tr><td style="text-align:center;">@NotNull</td><td style="text-align:center;">ä»»æ„ç±»å‹</td><td style="text-align:center;">å€¼ä¸èƒ½æ˜¯null</td></tr><tr><td style="text-align:center;">@Null</td><td style="text-align:center;">ä»»æ„ç±»å‹</td><td style="text-align:center;">å€¼å¿…é¡»æ˜¯null</td></tr><tr><td style="text-align:center;">@Min</td><td style="text-align:center;">BigDecimalã€BigIntegerã€byteã€shortã€intã€longã€double ä»¥åŠä»»ä½•Numberæˆ–CharSequenceå­ç±»å‹</td><td style="text-align:center;">å¤§äºç­‰äº@MinæŒ‡å®šçš„å€¼</td></tr><tr><td style="text-align:center;">@Max</td><td style="text-align:center;">åŒä¸Š</td><td style="text-align:center;">å°äºç­‰äº@MaxæŒ‡å®šçš„å€¼</td></tr><tr><td style="text-align:center;">@DecimalMin</td><td style="text-align:center;">åŒä¸Š</td><td style="text-align:center;">å¤§äºç­‰äº@DecimalMinæŒ‡å®šçš„å€¼ï¼ˆè¶…é«˜ç²¾åº¦ï¼‰</td></tr><tr><td style="text-align:center;">@DecimalMax</td><td style="text-align:center;">åŒä¸Š</td><td style="text-align:center;">å°äºç­‰äº@DecimalMaxæŒ‡å®šçš„å€¼ï¼ˆè¶…é«˜ç²¾åº¦ï¼‰</td></tr><tr><td style="text-align:center;">@Digits</td><td style="text-align:center;">åŒä¸Š</td><td style="text-align:center;">é™åˆ¶æ•´æ•°ä½æ•°å’Œå°æ•°ä½æ•°ä¸Šé™</td></tr><tr><td style="text-align:center;">@Size</td><td style="text-align:center;">å­—ç¬¦ä¸²ã€Collectionã€Mapã€æ•°ç»„ç­‰</td><td style="text-align:center;">é•¿åº¦åœ¨æŒ‡å®šåŒºé—´ä¹‹å†…ï¼Œå¦‚å­—ç¬¦ä¸²é•¿åº¦ã€é›†åˆå¤§å°ç­‰</td></tr><tr><td style="text-align:center;">@Past</td><td style="text-align:center;">å¦‚ java.util.Date, java.util.Calendar ç­‰æ—¥æœŸç±»å‹</td><td style="text-align:center;">å€¼å¿…é¡»æ¯”å½“å‰æ—¶é—´æ—©</td></tr><tr><td style="text-align:center;">@Future</td><td style="text-align:center;">åŒä¸Š</td><td style="text-align:center;">å€¼å¿…é¡»æ¯”å½“å‰æ—¶é—´æ™š</td></tr><tr><td style="text-align:center;">@NotBlank</td><td style="text-align:center;">CharSequenceåŠå…¶å­ç±»</td><td style="text-align:center;">å€¼ä¸ä¸ºç©ºï¼Œåœ¨æ¯”è¾ƒæ—¶ä¼šå»é™¤å­—ç¬¦ä¸²çš„é¦–ä½ç©ºæ ¼</td></tr><tr><td style="text-align:center;">@Length</td><td style="text-align:center;">CharSequenceåŠå…¶å­ç±»</td><td style="text-align:center;">å­—ç¬¦ä¸²é•¿åº¦åœ¨æŒ‡å®šåŒºé—´å†…</td></tr><tr><td style="text-align:center;">@NotEmpty</td><td style="text-align:center;">CharSequenceåŠå…¶å­ç±»ã€Collectionã€Mapã€æ•°ç»„</td><td style="text-align:center;">å€¼ä¸ä¸ºnullä¸”é•¿åº¦ä¸ä¸ºç©ºï¼ˆå­—ç¬¦ä¸²é•¿åº¦ä¸ä¸º0ï¼Œé›†åˆå¤§å°ä¸ä¸º0ï¼‰</td></tr><tr><td style="text-align:center;">@Range</td><td style="text-align:center;">BigDecimalã€BigIntegerã€CharSequenceã€byteã€shortã€intã€long ä»¥åŠåŸå­ç±»å‹å’ŒåŒ…è£…ç±»å‹</td><td style="text-align:center;">å€¼åœ¨æŒ‡å®šåŒºé—´å†…</td></tr><tr><td style="text-align:center;">@Email</td><td style="text-align:center;">CharSequenceåŠå…¶å­ç±»</td><td style="text-align:center;">å€¼å¿…é¡»æ˜¯é‚®ä»¶æ ¼å¼</td></tr><tr><td style="text-align:center;">@Pattern</td><td style="text-align:center;">CharSequenceåŠå…¶å­ç±»</td><td style="text-align:center;">å€¼éœ€è¦ä¸æŒ‡å®šçš„æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…</td></tr><tr><td style="text-align:center;">@Valid</td><td style="text-align:center;">ä»»ä½•éåŸå­ç±»å‹</td><td style="text-align:center;">ç”¨äºéªŒè¯å¯¹è±¡å±æ€§</td></tr></tbody></table><p>è™½ç„¶è¿™æ ·å·²ç»å¾ˆæ–¹ä¾¿äº†ï¼Œä½†æ˜¯åœ¨é‡åˆ°å¯¹è±¡çš„æ—¶å€™ï¼Œä¾ç„¶ä¸å¤ªæ–¹ä¾¿ï¼Œæ¯”å¦‚ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Account</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> username<span class="token punctuation">;</span>
    <span class="token class-name">String</span> password<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@ResponseBody</span>
<span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/submit&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">submit</span><span class="token punctuation">(</span><span class="token class-name">Account</span> account<span class="token punctuation">)</span><span class="token punctuation">{</span>   <span class="token comment">//ç›´æ¥ä½¿ç”¨å¯¹è±¡æ¥æ”¶</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>account<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>account<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">&quot;è¯·æ±‚æˆåŠŸ!&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ­¤æ—¶æ¥å£æ˜¯ä»¥å¯¹è±¡å½¢å¼æ¥æ”¶å‰ç«¯å‘é€çš„è¡¨å•æ•°æ®çš„ï¼Œè¿™ä¸ªæ—¶å€™å°±æ²¡åŠæ³•å‘ä¸Šé¢ä¸€æ ·ç¼–å†™å¯¹åº”çš„æ ¡éªŒè§„åˆ™äº†ï¼Œé‚£ä¹ˆç°åœ¨åˆè¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ</p><p>å¯¹åº”å¯¹è±¡ç±»å‹ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è¿›è¡ŒéªŒè¯ï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@ResponseBody</span>
<span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/submit&quot;</span><span class="token punctuation">)</span>  <span class="token comment">//åœ¨å‚æ•°ä¸Šæ·»åŠ @Validæ³¨è§£è¡¨ç¤ºéœ€è¦éªŒè¯</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">submit</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Valid</span> <span class="token class-name">Account</span> account<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>account<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>account<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">&quot;è¯·æ±‚æˆåŠŸ!&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Account</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Length</span><span class="token punctuation">(</span>min <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">)</span>   <span class="token comment">//åªéœ€è¦åœ¨å¯¹åº”çš„å­—æ®µä¸Šæ·»åŠ æ ¡éªŒçš„æ³¨è§£å³å¯</span>
    <span class="token class-name">String</span> username<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Length</span><span class="token punctuation">(</span>min <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">)</span>
    <span class="token class-name">String</span> password<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ ·å½“å—åˆ°è¯·æ±‚æ—¶ï¼Œå°±ä¼šå¯¹å¯¹è±¡ä¸­çš„å­—æ®µè¿›è¡Œæ ¡éªŒäº†ï¼Œè¿™é‡Œæˆ‘ä»¬ç¨å¾®ä¿®æ”¹ä¸€ä¸‹ValidationControllerçš„é”™è¯¯å¤„ç†ï¼Œå¯¹äºå®ä½“ç±»æ¥æ”¶å‚æ•°çš„éªŒè¯ï¼Œä¼šæŠ›å‡ºMethodArgumentNotValidExceptionå¼‚å¸¸ï¼Œè¿™é‡Œä¹Ÿè¿›è¡Œä¸€ä¸‹å¤„ç†ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@ResponseBody</span>
<span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ConstraintViolationException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">MethodArgumentNotValidException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">error</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>e <span class="token keyword">instanceof</span> <span class="token class-name">ConstraintViolationException</span> exception<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> exception<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>e <span class="token keyword">instanceof</span> <span class="token class-name">MethodArgumentNotValidException</span> exception<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>exception<span class="token punctuation">.</span><span class="token function">getFieldError</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">&quot;æœªçŸ¥é”™è¯¯&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> exception<span class="token punctuation">.</span><span class="token function">getFieldError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDefaultMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token string">&quot;æœªçŸ¥é”™è¯¯&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ ·å°±å¯ä»¥æ­£ç¡®è¿”å›å¯¹åº”çš„é”™è¯¯ä¿¡æ¯äº†ã€‚</p><h3 id="æ¥å£æ–‡æ¡£ç”Ÿæˆ-é€‰å­¦" tabindex="-1"><a class="header-anchor" href="#æ¥å£æ–‡æ¡£ç”Ÿæˆ-é€‰å­¦" aria-hidden="true">#</a> æ¥å£æ–‡æ¡£ç”Ÿæˆï¼ˆé€‰å­¦ï¼‰</h3><p>åœ¨åç»­å­¦ä¹ å‰åç«¯åˆ†ç¦»å¼€å‘ä¸­ï¼Œå‰ç«¯ç°åœ¨ç”±ä¸“ä¸šçš„äººæ¥åšï¼Œè€Œæˆ‘ä»¬å¾€å¾€åªéœ€è¦å…³å¿ƒåç«¯æä¾›ä»€ä¹ˆæ¥å£ç»™å‰ç«¯äººå‘˜è°ƒç”¨ï¼Œæˆ‘ä»¬çš„å·¥ä½œè¢«è¿›ä¸€æ­¥ç»†åˆ†äº†ï¼Œè¿™ä¸ªæ—¶å€™ä¸ºå‰ç«¯å¼€å‘äººå‘˜æä¾›ä¸€ä¸ªå¯ä»¥å‚è€ƒçš„æ–‡æ¡£æ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚</p><p>ä½†æ˜¯è¿™æ ·çš„ä¸€ä¸ªæ–‡æ¡£ï¼Œæˆ‘ä»¬ä¹Ÿä¸å¯èƒ½å•ç‹¬å†™ä¸€ä¸ªé¡¹ç›®å»è¿›è¡Œç»´æŠ¤ï¼Œå¹¶ä¸”éšç€æˆ‘ä»¬çš„åç«¯é¡¹ç›®ä¸æ–­æ›´æ–°ï¼Œæ–‡æ¡£ä¹Ÿéœ€è¦è·Ÿéšæ›´æ–°ï¼Œè¿™æ˜¾ç„¶æ˜¯å¾ˆéº»çƒ¦çš„ä¸€ä»¶äº‹æƒ…ï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰ä¸€ç§æ¯”è¾ƒå¥½çš„è§£å†³æ–¹æ¡ˆå‘¢ï¼Ÿ</p><p>å½“ç„¶æœ‰ï¼Œé‚£å°±æ˜¯ä¸è¢œå“¥ï¼šSwagger</p><p>Swaggerçš„ä¸»è¦åŠŸèƒ½å¦‚ä¸‹ï¼š</p><ul><li>æ”¯æŒ API è‡ªåŠ¨ç”ŸæˆåŒæ­¥çš„åœ¨çº¿æ–‡æ¡£ï¼šä½¿ç”¨ Swagger åå¯ä»¥ç›´æ¥é€šè¿‡ä»£ç ç”Ÿæˆæ–‡æ¡£ï¼Œä¸å†éœ€è¦è‡ªå·±æ‰‹åŠ¨ç¼–å†™æ¥å£æ–‡æ¡£äº†ï¼Œå¯¹ç¨‹åºå‘˜æ¥è¯´éå¸¸æ–¹ä¾¿ï¼Œå¯ä»¥èŠ‚çº¦å†™æ–‡æ¡£çš„æ—¶é—´å»å­¦ä¹ æ–°æŠ€æœ¯ã€‚</li><li>æä¾› Web é¡µé¢åœ¨çº¿æµ‹è¯• APIï¼šå…‰æœ‰æ–‡æ¡£è¿˜ä¸å¤Ÿï¼ŒSwagger ç”Ÿæˆçš„æ–‡æ¡£è¿˜æ”¯æŒåœ¨çº¿æµ‹è¯•ã€‚å‚æ•°å’Œæ ¼å¼éƒ½å®šå¥½äº†ï¼Œç›´æ¥åœ¨ç•Œé¢ä¸Šè¾“å…¥å‚æ•°å¯¹åº”çš„å€¼å³å¯åœ¨çº¿æµ‹è¯•æ¥å£ã€‚</li></ul><p>ç»“åˆSpringæ¡†æ¶ï¼ˆSpring-docï¼Œå®˜ç½‘ï¼š<a href="https://springdoc.org/%EF%BC%89%EF%BC%8CSwagger%E5%8F%AF%E4%BB%A5%E5%BE%88%E8%BD%BB%E6%9D%BE%E5%9C%B0%E5%88%A9%E7%94%A8%E6%B3%A8%E8%A7%A3%E4%BB%A5%E5%8F%8A%E6%89%AB%E6%8F%8F%E6%9C%BA%E5%88%B6%EF%BC%8C%E6%9D%A5%E5%BF%AB%E9%80%9F%E7%94%9F%E6%88%90%E5%9C%A8%E7%BA%BF%E6%96%87%E6%A1%A3%EF%BC%8C%E4%BB%A5%E5%AE%9E%E7%8E%B0%E5%BD%93%E6%88%91%E4%BB%AC%E9%A1%B9%E7%9B%AE%E5%90%AF%E5%8A%A8%E4%B9%8B%E5%90%8E%EF%BC%8C%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E4%BA%BA%E5%91%98%E5%B0%B1%E5%8F%AF%E4%BB%A5%E6%89%93%E5%BC%80Swagger%E6%8F%90%E4%BE%9B%E7%9A%84%E5%89%8D%E7%AB%AF%E9%A1%B5%E9%9D%A2%EF%BC%8C%E6%9F%A5%E7%9C%8B%E5%92%8C%E6%B5%8B%E8%AF%95%E6%8E%A5%E5%8F%A3%E3%80%82%E4%BE%9D%E8%B5%96%E5%A6%82%E4%B8%8B%EF%BC%9A" target="_blank" rel="noopener noreferrer">https://springdoc.org/ï¼‰ï¼ŒSwaggerå¯ä»¥å¾ˆè½»æ¾åœ°åˆ©ç”¨æ³¨è§£ä»¥åŠæ‰«ææœºåˆ¶ï¼Œæ¥å¿«é€Ÿç”Ÿæˆåœ¨çº¿æ–‡æ¡£ï¼Œä»¥å®ç°å½“æˆ‘ä»¬é¡¹ç›®å¯åŠ¨ä¹‹åï¼Œå‰ç«¯å¼€å‘äººå‘˜å°±å¯ä»¥æ‰“å¼€Swaggeræä¾›çš„å‰ç«¯é¡µé¢ï¼ŒæŸ¥çœ‹å’Œæµ‹è¯•æ¥å£ã€‚ä¾èµ–å¦‚ä¸‹ï¼š<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springdoc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>springdoc-openapi-starter-webmvc-ui<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.1.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é¡¹ç›®å¯åŠ¨ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è®¿é—®ï¼š<a href="http://localhost:8080/swagger-ui/index.html%EF%BC%8C%E5%B0%B1%E8%83%BD%E7%9C%8B%E5%88%B0%E6%88%91%E4%BB%AC%E7%9A%84%E5%BC%80%E5%8F%91%E6%96%87%E6%A1%A3%E4%BA%86%EF%BC%9A" target="_blank" rel="noopener noreferrer">http://localhost:8080/swagger-ui/index.htmlï¼Œå°±èƒ½çœ‹åˆ°æˆ‘ä»¬çš„å¼€å‘æ–‡æ¡£äº†ï¼š<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><figure><img src="https://s2.loli.net/2023/07/17/yb68Oolm1Xp5qFU.png" alt="image-20230717155121213" tabindex="0" loading="lazy"><figcaption>image-20230717155121213</figcaption></figure><p>å¯ä»¥çœ‹åˆ°è¿™ä¸ªå¼€å‘æ–‡æ¡£ä¸­è‡ªåŠ¨åŒ…å«äº†æˆ‘ä»¬å®šä¹‰çš„æ¥å£ï¼Œå¹¶ä¸”è¿˜æœ‰å¯¹åº”çš„å®ä½“ç±»ä¹Ÿæ”¾åœ¨äº†ä¸‹é¢ã€‚è¿™ä¸ªé¡µé¢ä¸ä»…ä»…æ˜¯å±•ç¤ºæ¥å£ï¼Œä¹Ÿå¯ä»¥ç›´æ¥åœ¨ä¸Šé¢è¿›è¡Œè°ƒè¯•ï¼š</p><figure><img src="https://s2.loli.net/2023/07/17/whLprBimgTqWxFR.png" alt="image-20230717155400761" tabindex="0" loading="lazy"><figcaption>image-20230717155400761</figcaption></figure><p>è¿™å°±éå¸¸æ–¹ä¾¿äº†ï¼Œä¸ä»…å‰ç«¯äººå‘˜å¯ä»¥å¿«é€ŸæŸ¥è¯¢æ¥å£å®šä¹‰ï¼Œæˆ‘ä»¬è‡ªå·±ä¹Ÿå¯ä»¥åœ¨çº¿è¿›è¡Œæ¥å£æµ‹è¯•ï¼Œç›´æ¥æŠ›å¼ƒPostManä¹‹ç±»çš„è½¯ä»¶äº†ã€‚</p><p>è™½ç„¶Swaggerçš„UIç•Œé¢å·²ç»å¯ä»¥å¾ˆå¥½åœ°å±•ç¤ºåç«¯æä¾›çš„æ¥å£ä¿¡æ¯äº†ï¼Œä½†æ˜¯éå¸¸çš„æ··ä¹±ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•é…ç½®æ¥å£çš„ä¸€äº›æè¿°ä¿¡æ¯ã€‚é¦–å…ˆæˆ‘ä»¬çš„é¡µé¢è‚¯å®šè¦å±•ç¤ºä¸€ä¸‹è¿™ä¸ªæ–‡æ¡£çš„ä¸€äº›ä¿¡æ¯ï¼Œåªéœ€è¦ä¸€ä¸ªBeanå°±èƒ½æå®šï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">OpenAPI</span> <span class="token function">springDocOpenAPI</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">OpenAPI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Info</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">title</span><span class="token punctuation">(</span><span class="token string">&quot;å›¾ä¹¦ç®¡ç†ç³»ç»Ÿ - åœ¨çº¿APIæ¥å£æ–‡æ¡£&quot;</span><span class="token punctuation">)</span>   <span class="token comment">//è®¾ç½®APIæ–‡æ¡£ç½‘ç«™æ ‡é¢˜</span>
                        <span class="token punctuation">.</span><span class="token function">description</span><span class="token punctuation">(</span><span class="token string">&quot;è¿™æ˜¯ä¸€ä¸ªå›¾ä¹¦ç®¡ç†ç³»ç»Ÿçš„åç«¯APIæ–‡æ¡£ï¼Œæ¬¢è¿å‰ç«¯äººå‘˜æŸ¥é˜…ï¼&quot;</span><span class="token punctuation">)</span> <span class="token comment">//ç½‘ç«™ä»‹ç»</span>
                        <span class="token punctuation">.</span><span class="token function">version</span><span class="token punctuation">(</span><span class="token string">&quot;2.0&quot;</span><span class="token punctuation">)</span>   <span class="token comment">//å½“å‰APIç‰ˆæœ¬</span>
                        <span class="token punctuation">.</span><span class="token function">license</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">License</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">&quot;æˆ‘çš„Bç«™ä¸ªäººä¸»é¡µ&quot;</span><span class="token punctuation">)</span>  <span class="token comment">//éµå¾ªçš„åè®®ï¼Œè¿™é‡Œæ‹¿æ¥å†™å…¶ä»–çš„ä¹Ÿè¡Œ</span>
                                <span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span><span class="token string">&quot;https://space.bilibili.com/37737161&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ ·æˆ‘ä»¬çš„é¡µé¢ä¸­å°±ä¼šå±•ç¤ºè‡ªå®šä¹‰çš„æ–‡æœ¬ä¿¡æ¯äº†ï¼š</p><figure><img src="https://s2.loli.net/2023/07/17/ZHqL7UsermIbipv.png" alt="image-20230717165850714" tabindex="0" loading="lazy"><figcaption>image-20230717165850714</figcaption></figure><p>æ¥ç€æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•ä¸ºä¸€ä¸ªControllerç¼–å†™APIæè¿°ä¿¡æ¯ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//ä½¿ç”¨@Tagæ³¨è§£æ¥æ·»åŠ Controlleræè¿°ä¿¡æ¯</span>
<span class="token annotation punctuation">@Tag</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;è´¦æˆ·éªŒè¯ç›¸å…³&quot;</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">&quot;åŒ…æ‹¬ç”¨æˆ·ç™»å½•ã€æ³¨å†Œã€éªŒè¯ç è¯·æ±‚ç­‰æ“ä½œã€‚&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestController</span> <span class="token punctuation">{</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨ç±»åç§°ä¸Šé¢æ·»åŠ <code>@Tag</code>æ³¨è§£ï¼Œå¹¶å¡«å†™ç›¸å…³ä¿¡æ¯ï¼Œæ¥ä¸ºå½“å‰çš„Controllerè®¾ç½®æè¿°ä¿¡æ¯ã€‚æ¥ç€æˆ‘ä»¬å¯ä»¥ä¸ºæ‰€æœ‰çš„è¯·æ±‚æ˜ å°„é…ç½®æè¿°ä¿¡æ¯ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@ApiResponses</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
       <span class="token annotation punctuation">@ApiResponse</span><span class="token punctuation">(</span>responseCode <span class="token operator">=</span> <span class="token string">&quot;200&quot;</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">&quot;æµ‹è¯•æˆåŠŸ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token annotation punctuation">@ApiResponse</span><span class="token punctuation">(</span>responseCode <span class="token operator">=</span> <span class="token string">&quot;500&quot;</span><span class="token punctuation">,</span> description <span class="token operator">=</span> <span class="token string">&quot;æµ‹è¯•å¤±è´¥&quot;</span><span class="token punctuation">)</span>   <span class="token comment">//ä¸åŒè¿”å›çŠ¶æ€ç æè¿°</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Operation</span><span class="token punctuation">(</span>summary <span class="token operator">=</span> <span class="token string">&quot;è¯·æ±‚ç”¨æˆ·æ•°æ®æµ‹è¯•æ¥å£&quot;</span><span class="token punctuation">)</span>   <span class="token comment">//æ¥å£åŠŸèƒ½æè¿°</span>
<span class="token annotation punctuation">@ResponseBody</span>
<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/hello&quot;</span><span class="token punctuation">)</span>
<span class="token comment">//è¯·æ±‚å‚æ•°æè¿°å’Œæ ·ä¾‹</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Parameter</span><span class="token punctuation">(</span>description <span class="token operator">=</span> <span class="token string">&quot;æµ‹è¯•æ–‡æœ¬æ•°æ®&quot;</span><span class="token punctuation">,</span> example <span class="token operator">=</span> <span class="token string">&quot;KFCvivo50&quot;</span><span class="token punctuation">)</span> <span class="token annotation punctuation">@RequestParam</span> <span class="token class-name">String</span> text<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;Hello World&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯¹äºé‚£äº›ä¸éœ€è¦å±•ç¤ºåœ¨æ–‡æ¡£ä¸­çš„æ¥å£ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°†å…¶å¿½ç•¥æ‰ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Hidden</span>
<span class="token annotation punctuation">@ResponseBody</span>
<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/hello&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;Hello World&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯¹äºå®ä½“ç±»ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç¼–å†™å¯¹åº”çš„APIæ¥å£æ–‡æ¡£ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@Schema</span><span class="token punctuation">(</span>description <span class="token operator">=</span> <span class="token string">&quot;ç”¨æˆ·ä¿¡æ¯å®ä½“ç±»&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Schema</span><span class="token punctuation">(</span>description <span class="token operator">=</span> <span class="token string">&quot;ç”¨æˆ·ç¼–å·&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">int</span> id<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Schema</span><span class="token punctuation">(</span>description <span class="token operator">=</span> <span class="token string">&quot;ç”¨æˆ·åç§°&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Schema</span><span class="token punctuation">(</span>description <span class="token operator">=</span> <span class="token string">&quot;ç”¨æˆ·é‚®ç®±&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">String</span> email<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Schema</span><span class="token punctuation">(</span>description <span class="token operator">=</span> <span class="token string">&quot;ç”¨æˆ·å¯†ç &quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">String</span> password<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨æ–‡æ¡£ä¸­æŸ¥çœ‹å®ä½“ç±»ç®€ä»‹ä»¥åŠå„ä¸ªå±æ€§çš„ä»‹ç»äº†ã€‚</p><p>ä¸è¿‡ï¼Œè¿™ç§æ–‡æ¡£åªé€‚åˆåœ¨å¼€å‘ç¯å¢ƒä¸‹ç”Ÿæˆï¼Œå¦‚æœæ˜¯ç”Ÿäº§ç¯å¢ƒï¼Œæˆ‘ä»¬éœ€è¦å…³é—­æ–‡æ¡£ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>springdoc<span class="token operator">:</span>
  api<span class="token operator">-</span>docs<span class="token operator">:</span>
    enabled<span class="token operator">:</span> <span class="token boolean">false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ ·å°±å¯ä»¥å…³é—­äº†ã€‚</p><h3 id="é¡¹ç›®è¿è¡Œç›‘æ§-é€‰å­¦" tabindex="-1"><a class="header-anchor" href="#é¡¹ç›®è¿è¡Œç›‘æ§-é€‰å­¦" aria-hidden="true">#</a> é¡¹ç›®è¿è¡Œç›‘æ§ï¼ˆé€‰å­¦ï¼‰</h3><p>æˆ‘ä»¬çš„é¡¹ç›®å¼€å‘å®Œæˆä¹‹åï¼Œè‚¯å®šæ˜¯éœ€è¦ä¸Šçº¿è¿è¡Œçš„ï¼Œä¸è¿‡åœ¨é¡¹ç›®çš„è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦å¯¹å…¶è¿›è¡Œç›‘æ§ï¼Œä»è€Œå®æ—¶è§‚å¯Ÿå…¶è¿è¡ŒçŠ¶æ€ï¼Œå¹¶åœ¨å‘ç”Ÿé—®é¢˜æ—¶åšå‡ºå¯¹åº”è°ƒæ•´ï¼Œå› æ­¤ï¼Œé›†æˆé¡¹ç›®è¿è¡Œç›‘æ§å°±å¾ˆæœ‰å¿…è¦äº†ã€‚</p><p>SpringBootæ¡†æ¶æä¾›äº†<code>spring-boot-starter-actuator</code>æ¨¡å—æ¥å®ç°ç›‘æ§æ•ˆæœï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ·»åŠ å¥½ä¹‹åï¼ŒActuatorä¼šè‡ªåŠ¨æ³¨å†Œä¸€äº›æ¥å£ç”¨äºæŸ¥è¯¢å½“å‰SpringBootåº”ç”¨ç¨‹åºçš„çŠ¶æ€ï¼Œå®˜æ–¹æ–‡æ¡£å¦‚ä¸‹ï¼š<a href="https://docs.spring.io/spring-boot/docs/3.1.1/actuator-api/htmlsingle/#overview" target="_blank" rel="noopener noreferrer">https://docs.spring.io/spring-boot/docs/3.1.1/actuator-api/htmlsingle/#overview<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰Actuatorè‡ªåŠ¨æ³¨å†Œçš„æ¥å£è·¯å¾„éƒ½æ˜¯<code>/actuator/{id}</code>æ ¼å¼çš„ï¼ˆå¯åœ¨é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹ï¼‰ï¼Œæ¯”å¦‚æˆ‘ä»¬æƒ³è¦æŸ¥è¯¢å½“å‰æœåŠ¡å™¨çš„å¥åº·çŠ¶æ€ï¼Œå°±å¯ä»¥è®¿é—®è¿™ä¸ªæ¥å£ï¼š<a href="http://localhost:8080/actuator/health%EF%BC%8C%E7%BB%93%E6%9E%9C%E4%BC%9A%E4%BB%A5JSON%E6%A0%BC%E5%BC%8F%E8%BF%94%E5%9B%9E%E7%BB%99%E6%88%91%E4%BB%AC%EF%BC%9A" target="_blank" rel="noopener noreferrer">http://localhost:8080/actuator/healthï¼Œç»“æœä¼šä»¥JSONæ ¼å¼è¿”å›ç»™æˆ‘ä»¬ï¼š<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><figure><img src="https://s2.loli.net/2023/07/16/h2dYo4sKPSfbGpq.png" alt="image-20230716205752392" tabindex="0" loading="lazy"><figcaption>image-20230716205752392</figcaption></figure><p>ç›´æ¥è®¿é—®ï¼š<a href="http://localhost:8080/actuator%E6%A0%B9%E8%B7%AF%E5%BE%84%EF%BC%8C%E5%8F%AF%E4%BB%A5%E6%9F%A5%E7%9C%8B%E5%BD%93%E5%89%8D%E5%B7%B2%E7%BB%8F%E5%BC%80%E5%90%AF%E7%9A%84%E6%89%80%E6%9C%89%E6%8E%A5%E5%8F%A3%EF%BC%8C%E9%BB%98%E8%AE%A4%E6%83%85%E5%86%B5%E4%B8%8B%E5%8F%AA%E5%BC%80%E5%90%AF%E4%BB%A5%E4%B8%8B%E6%8E%A5%E5%8F%A3%EF%BC%9A" target="_blank" rel="noopener noreferrer">http://localhost:8080/actuatoræ ¹è·¯å¾„ï¼Œå¯ä»¥æŸ¥çœ‹å½“å‰å·²ç»å¼€å¯çš„æ‰€æœ‰æ¥å£ï¼Œé»˜è®¤æƒ…å†µä¸‹åªå¼€å¯ä»¥ä¸‹æ¥å£ï¼š<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;_links&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  	<span class="token property">&quot;self&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">&quot;href&quot;</span><span class="token operator">:</span><span class="token string">&quot;http://localhost:8080/actuator&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;templated&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment">//actuatorè‡ªå·±çš„ä¿¡æ¯</span>
  	<span class="token property">&quot;health-path&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;href&quot;</span><span class="token operator">:</span><span class="token string">&quot;http://localhost:8080/actuator/health/{*path}&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;templated&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  	<span class="token property">&quot;health&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;href&quot;</span><span class="token operator">:</span><span class="token string">&quot;http://localhost:8080/actuator/health&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;templated&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">}</span>  <span class="token comment">//åº”ç”¨ç¨‹åºå¥åº·æƒ…å†µç›‘æ§</span>
 	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬å¯ä»¥æ¥ä¿®æ”¹ä¸€ä¸‹é…ç½®æ–‡ä»¶ï¼Œè®©å…¶æš´éœ²å…¨éƒ¨æ¥å£ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">management</span><span class="token punctuation">:</span>
  <span class="token key atrule">endpoints</span><span class="token punctuation">:</span>
    <span class="token key atrule">web</span><span class="token punctuation">:</span>
      <span class="token key atrule">exposure</span><span class="token punctuation">:</span>
        <span class="token key atrule">include</span><span class="token punctuation">:</span> <span class="token string">&#39;*&#39;</span>   <span class="token comment">#ä½¿ç”¨*è¡¨ç¤ºæš´éœ²å…¨éƒ¨æ¥å£</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é‡å¯æœåŠ¡å™¨ï¼Œå†æ¬¡è·å–å¯ç”¨æ¥å£å°±å¯ä»¥çœ‹åˆ°å…¨éƒ¨çš„ä¿¡æ¯äº†ï¼Œè¿™é‡Œå°±ä¸å…¨éƒ¨æ¬å‡ºæ¥äº†ï¼Œåªåˆ—ä¸¾ä¸€äº›å¸¸ç”¨çš„ï¼š</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;_links&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">//åŒ…å«Actuatorè‡ªå·±çš„ä¿¡æ¯</span>
    <span class="token property">&quot;self&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">&quot;href&quot;</span><span class="token operator">:</span><span class="token string">&quot;http://localhost:8080/actuator&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;templated&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//å·²æ³¨å†Œçš„Beanä¿¡æ¯</span>
    <span class="token property">&quot;beans&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;href&quot;</span><span class="token operator">:</span><span class="token string">&quot;http://localhost:8080/actuator/beans&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;templated&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//åº”ç”¨ç¨‹åºå¥åº·æƒ…å†µç›‘æ§</span>
    <span class="token property">&quot;health&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;href&quot;</span><span class="token operator">:</span><span class="token string">&quot;http://localhost:8080/actuator/health&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;templated&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;health-path&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;href&quot;</span><span class="token operator">:</span><span class="token string">&quot;http://localhost:8080/actuator/health/{*path}&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;templated&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//åº”ç”¨ç¨‹åºè¿è¡Œä¿¡æ¯</span>
    <span class="token property">&quot;info&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;href&quot;</span><span class="token operator">:</span><span class="token string">&quot;http://localhost:8080/actuator/info&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;templated&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//ç³»ç»Ÿç¯å¢ƒç›¸å…³ä¿¡æ¯</span>
    <span class="token property">&quot;env&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">&quot;href&quot;</span><span class="token operator">:</span><span class="token string">&quot;http://localhost:8080/actuator/env&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;templated&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;env-toMatch&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;href&quot;</span><span class="token operator">:</span><span class="token string">&quot;http://localhost:8080/actuator/env/{toMatch}&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;templated&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//æ—¥å¿—ç›¸å…³ä¿¡æ¯</span>
    <span class="token property">&quot;loggers&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;href&quot;</span><span class="token operator">:</span><span class="token string">&quot;http://localhost:8080/actuator/loggers&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;templated&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;loggers-name&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;href&quot;</span><span class="token operator">:</span><span class="token string">&quot;http://localhost:8080/actuator/loggers/{name}&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;templated&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//å¿«é€Ÿè·å–JVMå †è½¬å‚¨æ–‡ä»¶</span>
    <span class="token property">&quot;heapdump&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;href&quot;</span><span class="token operator">:</span><span class="token string">&quot;http://localhost:8080/actuator/heapdump&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;templated&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//å¿«é€Ÿè·å–JVMçº¿ç¨‹è½¬å‚¨ä¿¡æ¯</span>
    <span class="token property">&quot;threaddump&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;href&quot;</span><span class="token operator">:</span><span class="token string">&quot;http://localhost:8080/actuator/threaddump&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;templated&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//è®¡åˆ’ä»»åŠ¡ç›¸å…³ä¿¡æ¯</span>
    <span class="token property">&quot;scheduledtasks&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;href&quot;</span><span class="token operator">:</span><span class="token string">&quot;http://localhost:8080/actuator/scheduledtasks&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;templated&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//è¯·æ±‚æ˜ å°„ç›¸å…³ä¿¡æ¯</span>
    <span class="token property">&quot;mappings&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;href&quot;</span><span class="token operator">:</span><span class="token string">&quot;http://localhost:8080/actuator/mappings&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;templated&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    ...
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ¯”å¦‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ <a href="http://localhost:8080/actuator/info" target="_blank" rel="noopener noreferrer">http://localhost:8080/actuator/info<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> æ¥å£æŸ¥çœ‹å½“å‰ç³»ç»Ÿè¿è¡Œç¯å¢ƒä¿¡æ¯ï¼š</p><figure><img src="https://s2.loli.net/2023/07/16/2KyfArzj7uEqliC.png" alt="image-20230716211517338" tabindex="0" loading="lazy"><figcaption>image-20230716211517338</figcaption></figure><p>æˆ‘ä»¬å‘ç°ï¼Œè¿™é‡Œå¾—åˆ°çš„æ•°æ®æ˜¯ä¸€ä¸ªç©ºçš„ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬è¿˜éœ€è¦å•ç‹¬å¼€å¯å¯¹åº”æ¨¡å—æ‰å¯ä»¥ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">management</span><span class="token punctuation">:</span>
  <span class="token key atrule">endpoints</span><span class="token punctuation">:</span>
    <span class="token key atrule">web</span><span class="token punctuation">:</span>
      <span class="token key atrule">exposure</span><span class="token punctuation">:</span>
        <span class="token key atrule">include</span><span class="token punctuation">:</span> <span class="token string">&#39;*&#39;</span>
  <span class="token comment">#å¼€å¯æŸäº›é»˜è®¤ä¸ºfalseçš„ä¿¡æ¯</span>
  <span class="token key atrule">info</span><span class="token punctuation">:</span>
    <span class="token key atrule">env</span><span class="token punctuation">:</span>
      <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">os</span><span class="token punctuation">:</span>
      <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">java</span><span class="token punctuation">:</span>
      <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å†æ¬¡è¯·æ±‚ï¼Œå°±èƒ½è·å¾—è¿è¡Œç¯å¢ƒç›¸å…³ä¿¡æ¯äº†ï¼Œæ¯”å¦‚è¿™é‡Œçš„Javaç‰ˆæœ¬ã€JVMä¿¡æ¯ã€æ“ä½œç³»ç»Ÿä¿¡æ¯ç­‰ï¼š</p><figure><img src="https://s2.loli.net/2023/07/16/7tsbxvozYueIlJP.png" alt="image-20230716211648263" tabindex="0" loading="lazy"><figcaption>image-20230716211648263</figcaption></figure><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥è®©healthæ˜¾ç¤ºæ›´åŠ è¯¦ç»†çš„ç³»ç»ŸçŠ¶æ€ä¿¡æ¯ï¼Œè¿™é‡Œæˆ‘ä»¬å¼€å¯ä¸€ä¸‹é…ç½®ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">management</span><span class="token punctuation">:</span>
	<span class="token punctuation">...</span>
  <span class="token key atrule">endpoint</span><span class="token punctuation">:</span>
    <span class="token key atrule">health</span><span class="token punctuation">:</span>
      <span class="token key atrule">show-details</span><span class="token punctuation">:</span> always  <span class="token comment">#å±•ç¤ºè¯¦ç»†å†…å®¹</span>
    <span class="token key atrule">env</span><span class="token punctuation">:</span>
      <span class="token key atrule">show-values</span><span class="token punctuation">:</span> always  <span class="token comment">#æ€»æ˜¯ç›´æ¥å±•ç¤ºå€¼</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç°åœ¨å°±èƒ½æŸ¥çœ‹å½“å‰ç³»ç»Ÿå ç”¨ç›¸å…³ä¿¡æ¯äº†ï¼Œæ¯”å¦‚ä¸‹é¢çš„ç£ç›˜å ç”¨ã€æ•°æ®åº“ç­‰ä¿¡æ¯ï¼š</p><figure><img src="https://s2.loli.net/2023/07/16/Tyxmgv1b4jdqVFG.png" alt="image-20230716212238191" tabindex="0" loading="lazy"><figcaption>image-20230716212238191</figcaption></figure><p>åŒ…æ‹¬å®Œæ•´çš„ç³»ç»Ÿç¯å¢ƒä¿¡æ¯ï¼Œæ¯”å¦‚æˆ‘ä»¬é…ç½®çš„æœåŠ¡å™¨8080ç«¯å£ï¼š</p><figure><img src="https://s2.loli.net/2023/07/16/XiorDh692m83KAP.png" alt="image-20230716212456642" tabindex="0" loading="lazy"><figcaption>image-20230716212456642</figcaption></figure><p>æˆ‘ä»¬åªéœ€è¦é€šè¿‡è¿™äº›æ¥å£å°±èƒ½å¿«é€Ÿè·å–åˆ°å½“å‰åº”ç”¨ç¨‹åºçš„è¿è¡Œä¿¡æ¯äº†ã€‚</p><p>é«˜çº§ä¸€ç‚¹çš„è¿˜æœ‰çº¿ç¨‹è½¬å‚¨å’Œå †å†…å­˜è½¬å‚¨æ–‡ä»¶ç›´æ¥ç”Ÿæˆï¼Œä¾¿äºæˆ‘ä»¬å¯¹Javaç¨‹åºçš„è¿è¡Œæƒ…å†µè¿›è¡Œåˆ†æï¼Œè¿™é‡Œæˆ‘ä»¬è·å–ä¸€ä¸‹å †å†…å­˜è½¬å‚¨æ–‡ä»¶ï¼š<a href="http://localhost:8080/actuator/heapdump%EF%BC%8C%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E4%B9%8B%E5%90%8E%E7%9B%B4%E6%8E%A5%E4%BD%BF%E7%94%A8IDEA%E5%B0%B1%E8%83%BD%E6%89%93%E5%BC%80%EF%BC%9A" target="_blank" rel="noopener noreferrer">http://localhost:8080/actuator/heapdumpï¼Œæ–‡ä»¶ä¸‹è½½ä¹‹åç›´æ¥ä½¿ç”¨IDEAå°±èƒ½æ‰“å¼€ï¼š<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><figure><img src="https://s2.loli.net/2023/07/16/m8gNK1GjW3UhAnQ.png" alt="image-20230716212801376" tabindex="0" loading="lazy"><figcaption>image-20230716212801376</figcaption></figure><p>å¯ä»¥çœ‹åˆ°å…¶ä¸­åˆ›å»ºçš„byteæ•°ç»„å¯¹è±¡è®¡æ•°è¾¾åˆ°äº†72020ä¸ªï¼Œå…¶ä¸­æˆ‘ä»¬è‡ªå·±çš„TestControllerå¯¹è±¡åªæœ‰æœ‰ä¸€ä¸ªï¼š</p><figure><img src="https://s2.loli.net/2023/07/16/BzZtoIM9vGgiArp.png" alt="image-20230716212920673" tabindex="0" loading="lazy"><figcaption>image-20230716212920673</figcaption></figure><p>ä»¥åŠå¯¹åº”çš„çº¿ç¨‹è½¬å‚¨ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥é€šè¿‡<a href="http://localhost:8080/actuator/threaddump%E7%9B%B4%E6%8E%A5%E8%8E%B7%E5%8F%96%EF%BC%9A" target="_blank" rel="noopener noreferrer">http://localhost:8080/actuator/threaddumpç›´æ¥è·å–ï¼š<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><figure><img src="https://s2.loli.net/2023/07/16/LK6TZlDyxIJ7jqX.png" alt="image-20230716214134109" tabindex="0" loading="lazy"><figcaption>image-20230716214134109</figcaption></figure><hr><h2 id="å®ç°åŸç†æ¢ç©¶-é€‰å­¦" tabindex="-1"><a class="header-anchor" href="#å®ç°åŸç†æ¢ç©¶-é€‰å­¦" aria-hidden="true">#</a> å®ç°åŸç†æ¢ç©¶ï¼ˆé€‰å­¦ï¼‰</h2><p>**æ³¨æ„ï¼š**éš¾åº¦è¾ƒå¤§ï¼Œæœ¬ç‰ˆå—ä½œä¸ºé€‰å­¦å†…å®¹ï¼Œåœ¨å¼€å§‹å‰ï¼Œå¿…é¡»å®ŒæˆSSMé˜¶æ®µæºç è§£æéƒ¨åˆ†çš„å­¦ä¹ ã€‚</p><p>æˆ‘ä»¬åœ¨å‰é¢çš„å­¦ä¹ ä¸­åˆ‡å®æ„Ÿå—åˆ°äº†SpringBootä¸ºæˆ‘ä»¬å¸¦æ¥çš„ä¾¿æ·ï¼Œé‚£ä¹ˆå®ƒä¸ºä½•èƒ½å¤Ÿå®ç°å¦‚æ­¤å¿«æ·çš„å¼€å‘æ¨¡å¼ï¼Œstarteråˆæ˜¯ä¸€ä¸ªæ€æ ·çš„å­˜åœ¨ï¼Œå®ƒæ˜¯å¦‚ä½•è¿›è¡Œè‡ªåŠ¨é…ç½®çš„ï¼Œæˆ‘ä»¬ç°åœ¨å°±å¼€å§‹ç ”ç©¶ã€‚</p><h3 id="å¯åŠ¨åŸç†ä¸å®ç°" tabindex="-1"><a class="header-anchor" href="#å¯åŠ¨åŸç†ä¸å®ç°" aria-hidden="true">#</a> å¯åŠ¨åŸç†ä¸å®ç°</h3><p>é¦–å…ˆæˆ‘ä»¬æ¥çœ‹çœ‹ï¼ŒSpringBooté¡¹ç›®å¯åŠ¨ä¹‹åï¼Œåšäº†ä»€ä¹ˆäº‹æƒ…ï¼ŒSpringApplicationä¸­çš„é™æ€<code>run</code>æ–¹æ³•ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">ConfigurableApplicationContext</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> primarySource<span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span>primarySource<span class="token punctuation">}</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¥—å¨ƒå¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">ConfigurableApplicationContext</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> primarySources<span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SpringApplication</span><span class="token punctuation">(</span>primarySources<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬å‘ç°ï¼Œè¿™é‡Œç›´æ¥newäº†ä¸€ä¸ªæ–°çš„SpringApplicationå¯¹è±¡ï¼Œä¼ å…¥æˆ‘ä»¬çš„ä¸»ç±»ä½œä¸ºæ„é€ æ–¹æ³•å‚æ•°ï¼Œå¹¶è°ƒç”¨äº†éstaticçš„<code>run</code>æ–¹æ³•ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹æ„é€ æ–¹æ³•é‡Œé¢åšäº†ä»€ä¹ˆäº‹æƒ…ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">SpringApplication</span><span class="token punctuation">(</span><span class="token class-name">ResourceLoader</span> resourceLoader<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> primarySources<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token comment">//èµ„æºåŠ è½½å™¨é»˜è®¤æ ¹æ®å‰é¢åˆ¤æ–­ï¼Œè¿™é‡Œä¸ºnull</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>resourceLoader <span class="token operator">=</span> resourceLoader<span class="token punctuation">;</span>
  	<span class="token comment">//è®¾ç½®ä¸»è¦æºï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„å¯åŠ¨ä¸»ç±»</span>
    <span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">notNull</span><span class="token punctuation">(</span>primarySources<span class="token punctuation">,</span> <span class="token string">&quot;PrimarySources must not be null&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>primarySources <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedHashSet</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>primarySources<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//è¿™é‡Œæ˜¯å…³é”®ï¼Œè¿™é‡Œä¼šåˆ¤æ–­å½“å‰SpringBootåº”ç”¨ç¨‹åºæ˜¯å¦ä¸ºWebé¡¹ç›®ï¼Œå¹¶è¿”å›å½“å‰çš„é¡¹ç›®ç±»å‹</span>
    <span class="token comment">//deduceFromClasspathæ˜¯æ ¹æ®ç±»è·¯å¾„ä¸‹åˆ¤æ–­æ˜¯å¦åŒ…å«SpringBootWebä¾èµ–ï¼Œå¦‚æœä¸åŒ…å«å°±æ˜¯NONEç±»å‹ï¼ŒåŒ…å«å°±æ˜¯SERVLETç±»å‹</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>webApplicationType <span class="token operator">=</span> <span class="token class-name">WebApplicationType</span><span class="token punctuation">.</span><span class="token function">deduceFromClasspath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>bootstrapRegistryInitializers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getSpringFactoriesInstances</span><span class="token punctuation">(</span><span class="token class-name">BootstrapRegistryInitializer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//è·å–å¹¶è®¾ç½®æ‰€æœ‰ApplicationContextInitializerå®ç°ï¼Œè¿™äº›éƒ½æ˜¯åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡åˆå§‹åŒ–å™¨</span>
  	<span class="token comment">//è¿™ä¸ªæ¥å£ç”¨äºåœ¨ Spring å®¹å™¨æ‰§è¡Œ onRefresh æ–¹æ³•åˆ·æ–°ä¹‹å‰æ‰§è¡Œä¸€ä¸ªå›è°ƒå‡½æ•°</span>
 		<span class="token comment">//é€šå¸¸ç”¨äºå‘ SpringBoot å¯åŠ¨çš„å®¹å™¨ä¸­æ³¨å…¥ä¸€äº›å±æ€§ï¼Œæ¯”å¦‚ContextIdApplicationContextInitializerå°±æ˜¯</span>
  	<span class="token comment">//å°†é…ç½®ä¸­å®šä¹‰çš„ spring.application.name å±æ€§å€¼è®¾å®šä¸ºåº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡çš„ID</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setInitializers</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getSpringFactoriesInstances</span><span class="token punctuation">(</span><span class="token class-name">ApplicationContextInitializer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  	<span class="token comment">//è®¾ç½®åº”ç”¨ç¨‹åºç›‘å¬å™¨</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setListeners</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getSpringFactoriesInstances</span><span class="token punctuation">(</span><span class="token class-name">ApplicationListener</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  	<span class="token comment">//æ‰¾åˆ°å¹¶è®¾å®šå½“å‰çš„å¯åŠ¨ä¸»ç±»</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>mainApplicationClass <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">deduceMainApplicationClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">static</span> <span class="token class-name">WebApplicationType</span> <span class="token function">deduceFromClasspath</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  	<span class="token comment">//è¿™é‡Œçš„ClassUtils.isPresentæ˜¯é€šè¿‡åå°„æœºåˆ¶åˆ¤æ–­ç±»è·¯å¾„ä¸‹æ˜¯å¦å­˜åœ¨å¯¹åº”çš„ä¾èµ–</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">ClassUtils</span><span class="token punctuation">.</span><span class="token function">isPresent</span><span class="token punctuation">(</span><span class="token constant">WEBFLUX_INDICATOR_CLASS</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token class-name">ClassUtils</span><span class="token punctuation">.</span><span class="token function">isPresent</span><span class="token punctuation">(</span><span class="token constant">WEBMVC_INDICATOR_CLASS</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
				<span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token class-name">ClassUtils</span><span class="token punctuation">.</span><span class="token function">isPresent</span><span class="token punctuation">(</span><span class="token constant">JERSEY_INDICATOR_CLASS</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token class-name">WebApplicationType</span><span class="token punctuation">.</span><span class="token constant">REACTIVE</span><span class="token punctuation">;</span>   <span class="token comment">//åˆ¤æ–­å‡ºå­˜åœ¨WebFluxä¾èµ–ä¸”å…¶ä»–ä¸å­˜åœ¨ï¼Œè¿”å›WebFluxç±»å‹</span>
		<span class="token punctuation">}</span>
  	<span class="token comment">//å¦‚æœä¸åŒ…å«WebFluxç›¸å…³ä¾èµ–ï¼Œå°±æ‰¾æ‰¾æœ‰æ²¡æœ‰Servletç›¸å…³ä¾èµ–ï¼Œåªè¦å‘ç°ç¼ºå¤±ç›´æ¥è¿”å›NONEæ™®é€šç±»å‹</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> className <span class="token operator">:</span> <span class="token constant">SERVLET_INDICATOR_CLASSES</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">ClassUtils</span><span class="token punctuation">.</span><span class="token function">isPresent</span><span class="token punctuation">(</span>className<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token class-name">WebApplicationType</span><span class="token punctuation">.</span><span class="token constant">NONE</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token class-name">WebApplicationType</span><span class="token punctuation">.</span><span class="token constant">SERVLET</span><span class="token punctuation">;</span> <span class="token comment">//å¦åˆ™å°±æ˜¯Servletç¯å¢ƒäº†ï¼Œè¿”å›SERVLETç±»å‹ï¼ˆä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¹‹å‰ç”¨åˆ°çš„ï¼‰</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡é˜…è¯»ä¸Šé¢çš„æºç ï¼Œæˆ‘ä»¬å‘ç°<code>getSpringFactoriesInstances</code>è¿™ä¸ªæ–¹æ³•å¯ä»¥ä¸€æ¬¡æ€§è·å–æŒ‡å®šç±»å‹å·²æ³¨å†Œçš„å®ç°ç±»ï¼Œæˆ‘ä»¬å…ˆæ¥ç ”ç©¶ä¸€ä¸‹å®ƒæ˜¯æ€ä¹ˆåšåˆ°çš„ã€‚è¿™é‡Œå°±è¦æåˆ°<code>spring.factories</code>æ–‡ä»¶äº†ï¼Œå®ƒæ˜¯ Spring ä»¿é€ Java SPIå®ç°çš„ä¸€ç§ç±»åŠ è½½æœºåˆ¶ã€‚å®ƒåœ¨ META-INF/spring.factories æ–‡ä»¶ä¸­é…ç½®æ¥å£çš„å®ç°ç±»åç§°ï¼Œç„¶ååœ¨ç¨‹åºä¸­è¯»å–è¿™äº›é…ç½®æ–‡ä»¶å¹¶å®ä¾‹åŒ–ã€‚è¿™ç§è‡ªå®šä¹‰çš„SPIæœºåˆ¶æ˜¯ Spring Boot Starter å®ç°çš„åŸºç¡€ã€‚</p><p>SPIçš„å¸¸è§ä¾‹å­ï¼š</p><ul><li>æ•°æ®åº“é©±åŠ¨åŠ è½½æ¥å£å®ç°ç±»çš„åŠ è½½ï¼šJDBCåŠ è½½ä¸åŒç±»å‹æ•°æ®åº“çš„é©±åŠ¨</li><li>æ—¥å¿—é—¨é¢æ¥å£å®ç°ç±»åŠ è½½ï¼šSLF4JåŠ è½½ä¸åŒæä¾›å•†çš„æ—¥å¿—å®ç°ç±»</li></ul><p>è¯´ç™½äº†å°±æ˜¯äººå®¶å®šä¹‰æ¥å£ï¼Œä½†æ˜¯å®ç°å¯èƒ½æœ‰å¾ˆå¤šç§ï¼Œä½†æ˜¯æ ¸å¿ƒåªæä¾›æ¥å£ï¼Œéœ€è¦æˆ‘ä»¬æŒ‰éœ€é€‰æ‹©å¯¹åº”çš„å®ç°ï¼Œè¿™ç§æ–¹å¼æ˜¯é«˜åº¦è§£è€¦çš„ã€‚</p><p>æˆ‘ä»¬å¯ä»¥æ¥çœ‹çœ‹<code>spring-boot-starter</code>ä¾èµ–ä¸­æ€ä¹ˆå®šä¹‰çš„ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªå¾ˆå…³é”®çš„ç‚¹ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-autoconfigure<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.1.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>compile<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ª<code>spring-boot-autoconfigure</code>æ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Ÿå®é™…ä¸Šè¿™ä¸ªå°±æ˜¯æˆ‘ä»¬æ•´ä¸ªä¾èµ–å®ç°è‡ªåŠ¨é…ç½®çš„å…³é”®ã€‚æ‰“å¼€è¿™ä¸ªä¾èµ–å†…éƒ¨ï¼Œå¯ä»¥çœ‹åˆ°è¿™é‡Œç¡®å®æœ‰ä¸€ä¸ª<code>spring.factories</code>æ–‡ä»¶ï¼š</p><figure><img src="https://s2.loli.net/2023/07/18/65netHWFdMjhlxV.png" alt="image-20230718233851593" tabindex="0" loading="lazy"><figcaption>image-20230718233851593</figcaption></figure><p>è¿™ä¸ªé‡Œé¢å®šä¹‰äº†å¾ˆå¤šæ¥å£çš„å®ç°ç±»ï¼Œæ¯”å¦‚æˆ‘ä»¬åˆšåˆšçœ‹åˆ°çš„<code>ApplicationContextInitializer</code>æ¥å£ï¼š</p><figure><img src="https://s2.loli.net/2023/07/18/gN9CZpKEcxurzIq.png" alt="image-20230718234021559" tabindex="0" loading="lazy"><figcaption>image-20230718234021559</figcaption></figure><p>ä¸ä»…ä»…æ˜¯<code>spring-boot-starter</code>å­˜åœ¨è¿™æ ·çš„æ–‡ä»¶ï¼Œå…¶ä»–å¾ˆå¤šä¾èµ–ï¼Œæ¯”å¦‚<code>spring-boot-start-test</code>ä¹Ÿæœ‰ç€å¯¹åº”çš„<code>autoconfigure</code>æ¨¡å—ï¼Œåªä¸è¿‡å¤§éƒ¨åˆ†SpringBootç»´æŠ¤çš„ç»„ä»¶ï¼Œéƒ½é»˜è®¤å°†å…¶ä¸­çš„<code>spring.factories</code>ä¿¡æ¯ç»Ÿä¸€å†™åˆ°äº†<code>spring-boot-autoconfigure</code>å’Œ<code>spring-boot-starter</code>ä¸­ï¼Œæ–¹ä¾¿åç»­ç»´æŠ¤ã€‚</p><p>ç°åœ¨æˆ‘ä»¬æ¸…æ¥šï¼ŒåŸæ¥è¿™äº›éƒ½æ˜¯é€šè¿‡ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶å®šä¹‰çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¥çœ‹çœ‹<code>getSpringFactoriesInstances</code>æ–¹æ³•åšäº†ä»€ä¹ˆï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">getSpringFactoriesInstances</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getSpringFactoriesInstances</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token class-name">SpringFactoriesLoader<span class="token punctuation">.</span>ArgumentResolver</span><span class="token punctuation">)</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">getSpringFactoriesInstances</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> type<span class="token punctuation">,</span> <span class="token class-name">SpringFactoriesLoader<span class="token punctuation">.</span>ArgumentResolver</span> argumentResolver<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  	<span class="token comment">//è¿™é‡Œé€šè¿‡SpringFactoriesLoaderåŠ è½½ç±»è·¯å¾„ä¸‹çš„æ–‡ä»¶</span>
    <span class="token keyword">return</span> <span class="token class-name">SpringFactoriesLoader</span><span class="token punctuation">.</span><span class="token function">forDefaultResourceLocation</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> argumentResolver<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">SpringFactoriesLoader</span> <span class="token function">forDefaultResourceLocation</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Nullable</span> <span class="token class-name">ClassLoader</span> classLoader<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  	<span class="token comment">//æŸ¥æ‰¾æ‰€æœ‰ä¾èµ–ä¸‹çš„META-INF/spring.factoriesæ–‡ä»¶ï¼Œè§£æå¹¶å¾—åˆ°æœ€ç»ˆçš„SpringFactoriesLoaderå¯¹è±¡</span>
    <span class="token keyword">return</span> <span class="token function">forResourceLocation</span><span class="token punctuation">(</span><span class="token string">&quot;META-INF/spring.factories&quot;</span><span class="token punctuation">,</span> classLoader<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‰€ä»¥<code>getSpringFactoriesInstances</code>å…¶å®å°±æ˜¯é€šè¿‡è¯»å–æ‰€æœ‰<code>META-INF/spring.factories</code>æ–‡ä»¶å¾—åˆ°çš„åˆ—è¡¨ï¼Œç„¶åå®ä¾‹åŒ–æŒ‡å®šç±»å‹ä¸‹è¯»å–åˆ°çš„æ‰€æœ‰å®ç°ç±»å¹¶è¿”å›ï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬å°±æ¸…æ¥šSpringBootè¿™ä¸€å¤§å †å‚ä¸è‡ªåŠ¨é…ç½®çš„ç±»æ˜¯æ€ä¹ˆåŠ è½½è¿›æ¥çš„äº†ã€‚</p><p>ç°åœ¨æˆ‘ä»¬å›åˆ°ä¸€å¼€å§‹çš„åœ°æ–¹ï¼Œç›®å‰SpringApplicationå¯¹è±¡å·²ç»æ„é€ å¥½äº†ï¼Œç»§ç»­æ¥çœ‹çœ‹<code>run</code>æ–¹æ³•åšäº†ä»€ä¹ˆï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">ConfigurableApplicationContext</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   	<span class="token keyword">long</span> startTime <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">nanoTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">DefaultBootstrapContext</span> bootstrapContext <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createBootstrapContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ConfigurableApplicationContext</span> context <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">configureHeadlessProperty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  	<span class="token comment">//è·å–æ‰€æœ‰çš„SpringApplicationRunListenerï¼Œå¹¶é€šçŸ¥å¯åŠ¨äº‹ä»¶ï¼Œé»˜è®¤åªæœ‰ä¸€ä¸ªå®ç°ç±»EventPublishingRunListener</span>
    <span class="token comment">//EventPublishingRunListenerä¼šå°†åˆå§‹åŒ–å„ä¸ªé˜¶æ®µçš„äº‹ä»¶è½¬å‘ç»™æ‰€æœ‰ç›‘å¬å™¨</span>
    <span class="token class-name">SpringApplicationRunListeners</span> listeners <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getRunListeners</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    listeners<span class="token punctuation">.</span><span class="token function">starting</span><span class="token punctuation">(</span>bootstrapContext<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>mainApplicationClass<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      	<span class="token comment">//ç¯å¢ƒé…ç½®ï¼ŒåŒ…æ‹¬æˆ‘ä»¬ä¹‹å‰é…ç½®çš„å¤šç¯å¢ƒé€‰æ‹©</span>
        <span class="token class-name">ApplicationArguments</span> applicationArguments <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultApplicationArguments</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ConfigurableEnvironment</span> environment <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">prepareEnvironment</span><span class="token punctuation">(</span>listeners<span class="token punctuation">,</span> bootstrapContext<span class="token punctuation">,</span> applicationArguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
      	<span class="token comment">//æ‰“å°Bannerï¼Œä»è¿™é‡Œå¼€å§‹æˆ‘ä»¬å°±å¯ä»¥åˆ‡åˆ‡å®å®çœ‹åˆ°è¿è¡ŒçŠ¶äº†</span>
        <span class="token class-name">Banner</span> printedBanner <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">printBanner</span><span class="token punctuation">(</span>environment<span class="token punctuation">)</span><span class="token punctuation">;</span>
      	<span class="token comment">//åˆ›å»ºApplicationContextï¼Œä¹Ÿå°±æ˜¯æ•´ä¸ªSpringåº”ç”¨ç¨‹åºçš„IoCå®¹å™¨ï¼ŒSSMé˜¶æ®µå·²ç»è¯¦ç»†ä»‹ç»è¿‡ï¼Œæ³¨æ„è¿™é‡Œä¼šæ ¹æ®æ„é€ æ—¶å¾—åˆ°çš„ç±»å‹ï¼Œåˆ›å»ºä¸åŒçš„ApplicationContextå®ç°ç±»ï¼ˆæ¯”å¦‚Servletç¯å¢ƒä¸‹å°±æ˜¯Webå®¹å™¨ï¼‰</span>
        context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">setApplicationStartup</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>applicationStartup<span class="token punctuation">)</span><span class="token punctuation">;</span>
      	<span class="token comment">//å¯¹ApplicationContextè¿›è¡Œå‰ç½®å¤„ç†ï¼Œè¿™é‡Œä¼šå°†åˆ›å»ºå¯¹è±¡æ—¶è®¾å®šçš„æ‰€æœ‰ApplicationContextInitializeræ‹¿æ¥æ‰§è¡Œä¸€æ¬¡initializeæ–¹æ³•ï¼Œè¿™ä¹ŸéªŒè¯äº†æˆ‘ä»¬ä¹‹å‰çš„è¯´æ³•ï¼Œè¿™ä¸€æ­¥ç¡®å®æ˜¯åœ¨åˆ·æ–°å®¹å™¨ä¹‹å‰è¿›è¡Œçš„</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">prepareContext</span><span class="token punctuation">(</span>bootstrapContext<span class="token punctuation">,</span> context<span class="token punctuation">,</span> environment<span class="token punctuation">,</span> listeners<span class="token punctuation">,</span> applicationArguments<span class="token punctuation">,</span> printedBanner<span class="token punctuation">)</span><span class="token punctuation">;</span>
      	<span class="token comment">//æ‰§è¡ŒApplicationContextçš„refreshæ–¹æ³•ï¼Œåˆ·æ–°å®¹å™¨åˆå§‹åŒ–æ‰€æœ‰çš„Beanï¼Œè¿™ä¸ªä¹Ÿåœ¨SSMé˜¶æ®µè¯¦ç»†ä»‹ç»è¿‡äº†</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">refreshContext</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">afterRefresh</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> applicationArguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Duration</span> timeTakenToStartup <span class="token operator">=</span> <span class="token class-name">Duration</span><span class="token punctuation">.</span><span class="token function">ofNanos</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">nanoTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> startTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>logStartupInfo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StartupInfoLogger</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>mainApplicationClass<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">logStarted</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getApplicationLog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> timeTakenToStartup<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        listeners<span class="token punctuation">.</span><span class="token function">started</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> timeTakenToStartup<span class="token punctuation">)</span><span class="token punctuation">;</span>
      	<span class="token comment">//å› ä¸ºæ‰€æœ‰çš„Beanéƒ½å·²ç»åŠ è½½ï¼Œè¿™é‡Œå°±å¯ä»¥è°ƒç”¨å…¨éƒ¨çš„è‡ªå®šä¹‰Runnerå®ç°äº†</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">callRunners</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> applicationArguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token comment">//ç»“æŸ</span>
    <span class="token keyword">return</span> context<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è‡³æ­¤ï¼ŒSpringBooté¡¹ç›®å°±æ­£å¸¸å¯åŠ¨äº†ã€‚</p><p>æˆ‘ä»¬å‘ç°ï¼Œå³ä½¿æ˜¯SpringBootï¼Œä¹Ÿæ˜¯ç¦»ä¸å¼€Springæœ€æ ¸å¿ƒçš„ApplicationContextå®¹å™¨ï¼Œå› ä¸ºå®ƒå†æ€ä¹ˆä¹Ÿæ˜¯ä¸€ä¸ªSpringé¡¹ç›®ï¼Œå³ä½¿ç©å¾—å†é«˜çº§ä¸è¿˜æ˜¯å¾—å›´ç»•IoCå®¹å™¨æ¥è¿›è¡Œä¹ˆã€‚æ‰€ä»¥è¯´ï¼ŒSSMé˜¶æ®µå­¦ä¹ çš„å†…å®¹æ‰æ˜¯çœŸæ­£çš„æ ¸å¿ƒï¼Œè€ŒSpringBootä»…ä»…æ˜¯å¯¹Springè¿›è¡Œçš„ä¸€å±‚å¼ºåŒ–å°è£…ï¼Œä¾¿äºå¿«é€Ÿåˆ›å»ºSpringé¡¹ç›®ç½¢äº†ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä¸€ç›´å¼ºè°ƒä¸èƒ½è·³è¿‡SSMå…ˆå­¦SpringBootçš„åŸå› ã€‚</p><p>æ—¢ç„¶éƒ½è°ˆåˆ°è¿™é‡Œäº†ï¼Œæˆ‘ä»¬ä¸å¦¨å†æ¥çœ‹ä¸€ä¸‹è¿™é‡Œçš„ApplicationContextæ˜¯æ€ä¹ˆæ¥çš„ï¼Œæ‰“å¼€<code>createApplicationContext</code>æ–¹æ³•ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token class-name">ConfigurableApplicationContext</span> <span class="token function">createApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>applicationContextFactory<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>webApplicationType<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//è¿™ä¸ªç±»å‹å·²ç»åœ¨newçš„æ—¶å€™ç¡®å®šäº†</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬å‘ç°åœ¨æ„é€ æ–¹æ³•ä¸­<code>applicationContextFactory</code>ç›´æ¥ä½¿ç”¨çš„æ˜¯DEFAULTï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>applicationContextFactory <span class="token operator">=</span> <span class="token class-name">ApplicationContextFactory</span><span class="token punctuation">.</span><span class="token constant">DEFAULT</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">ApplicationContextFactory</span> <span class="token constant">DEFAULT</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultApplicationContextFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//ä½¿ç”¨çš„æ˜¯é»˜è®¤å®ç°ç±»</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æˆ‘ä»¬ç»§ç»­å‘ä¸‹æ‰’DefaultApplicationContextFactoryçš„æºç <code>create</code>æ–¹æ³•éƒ¨åˆ†ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">ConfigurableApplicationContext</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">WebApplicationType</span> webApplicationType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">ConfigurableApplicationContext</span><span class="token punctuation">)</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getFromSpringFactories</span><span class="token punctuation">(</span>webApplicationType<span class="token punctuation">,</span> <span class="token class-name">ApplicationContextFactory</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token operator">::</span><span class="token function">createDefaultApplicationContext</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//å¥—å¨ƒè·å–ConfigurableApplicationContextå®ç°</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> var3<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalStateException</span><span class="token punctuation">(</span><span class="token string">&quot;Unable create a default ApplicationContext instance, you may need a custom ApplicationContextFactory&quot;</span><span class="token punctuation">,</span> var3<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">getFromSpringFactories</span><span class="token punctuation">(</span><span class="token class-name">WebApplicationType</span> webApplicationType<span class="token punctuation">,</span>
			<span class="token class-name">BiFunction</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ApplicationContextFactory</span><span class="token punctuation">,</span> <span class="token class-name">WebApplicationType</span><span class="token punctuation">,</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> action<span class="token punctuation">,</span> <span class="token class-name">Supplier</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> defaultResult<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">//å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œåˆæ˜¯é€šè¿‡SpringFactoriesLoaderè·å–åˆ°æ‰€æœ‰å€™é€‰çš„ApplicationContextFactoryå®ç°</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">ApplicationContextFactory</span> candidate <span class="token operator">:</span> <span class="token class-name">SpringFactoriesLoader</span><span class="token punctuation">.</span><span class="token function">loadFactories</span><span class="token punctuation">(</span><span class="token class-name">ApplicationContextFactory</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
				<span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token class-name">T</span> result <span class="token operator">=</span> action<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>candidate<span class="token punctuation">,</span> webApplicationType<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> result<span class="token punctuation">;</span>   <span class="token comment">//å¦‚æœæ˜¯Servletç¯å¢ƒï¼Œè¿™é‡Œä¼šæ‰¾åˆ°å®ç°ï¼Œç›´æ¥è¿”å›</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
  	<span class="token comment">//å¦‚æœæ˜¯æ™®é€šçš„SpringBooté¡¹ç›®ï¼Œè¿Webç¯å¢ƒéƒ½æ²¡æœ‰ï¼Œé‚£ä¹ˆå°±ç›´æ¥åˆ›å»ºæ™®é€šçš„ApplicationContext</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span>defaultResult <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">?</span> defaultResult<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ—¢ç„¶è¿™é‡Œåˆæ˜¯SpringFactoriesLoaderåŠ è½½ApplicationContextFactoryå®ç°ï¼Œæˆ‘ä»¬å°±ç›´æ¥å»çœ‹æœ‰äº›å•¥ï¼š</p><figure><img src="https://s2.loli.net/2023/07/19/Nqd8vguDKtR2XmW.png" alt="image-20230719002638475" tabindex="0" loading="lazy"><figcaption>image-20230719002638475</figcaption></figure><p>æˆ‘ä»¬ä¹Ÿä¸å‡ºæ„å¤–åœ°åœ¨<code>spring.factories</code>ä¸­æ‰¾åˆ°äº†è¿™ä¸¤ä¸ªå®ç°ï¼Œå› ä¸ºç›®å‰æ˜¯Servletç¯å¢ƒï¼Œæ‰€ä»¥åœ¨è¿”å›æ—¶å¾—åˆ°æœ€ç»ˆçš„ç»“æœï¼Œä¹Ÿå°±æ˜¯ç”Ÿæˆçš„AnnotationConfigServletWebServerApplicationContextå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´åˆ°è¿™é‡Œä¸ºæ­¢ï¼ŒSpringçš„å®¹å™¨å°±åŸºæœ¬å·²ç»ç¡®å®šäº†ï¼Œå·®ä¸å¤šå¯ä»¥å¼€å§‹è¿è¡Œäº†ï¼Œä¸‹ä¸€ä¸ªéƒ¨åˆ†æˆ‘ä»¬å°†ç»§ç»­ä»‹ç»SpringBootæ˜¯å¦‚ä½•å®ç°è‡ªåŠ¨æ‰«æä»¥åŠè‡ªåŠ¨é…ç½®çš„ã€‚</p><h3 id="è‡ªåŠ¨é…ç½®åŸç†" tabindex="-1"><a class="header-anchor" href="#è‡ªåŠ¨é…ç½®åŸç†" aria-hidden="true">#</a> è‡ªåŠ¨é…ç½®åŸç†</h3><p>æ—¢ç„¶ä¸»ç±»å·²ç»åœ¨åˆå§‹é˜¶æ®µæ³¨å†Œä¸ºBeanï¼Œé‚£ä¹ˆåœ¨åŠ è½½æ—¶ï¼Œå°±ä¼šæ ¹æ®æ³¨è§£å®šä¹‰ï¼Œè¿›è¡Œæ›´å¤šçš„é¢å¤–æ“ä½œã€‚æ‰€ä»¥æˆ‘ä»¬æ¥çœ‹çœ‹ä¸»ç±»ä¸Šçš„<code>@SpringBootApplication</code>æ³¨è§£åšäº†ä»€ä¹ˆäº‹æƒ…ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">TYPE</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Inherited</span>
<span class="token annotation punctuation">@SpringBootConfiguration</span>
<span class="token annotation punctuation">@EnableAutoConfiguration</span>
<span class="token annotation punctuation">@ComponentScan</span><span class="token punctuation">(</span>
    excludeFilters <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token annotation punctuation">@Filter</span><span class="token punctuation">(</span>
    type <span class="token operator">=</span> <span class="token class-name">FilterType</span><span class="token punctuation">.</span><span class="token constant">CUSTOM</span><span class="token punctuation">,</span>
    classes <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">TypeExcludeFilter</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token annotation punctuation">@Filter</span><span class="token punctuation">(</span>
    type <span class="token operator">=</span> <span class="token class-name">FilterType</span><span class="token punctuation">.</span><span class="token constant">CUSTOM</span><span class="token punctuation">,</span>
    classes <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">AutoConfigurationExcludeFilter</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">SpringBootApplication</span> <span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬å‘ç°ï¼Œ<code>@SpringBootApplication</code>ä¸Šæ·»åŠ äº†<code>@ComponentScan</code>æ³¨è§£ï¼Œæ­¤æ³¨è§£æˆ‘ä»¬æ­¤å‰å·²ç»è®¤è¯†è¿‡äº†ï¼Œä½†æ˜¯è¿™é‡Œå¹¶æ²¡æœ‰é…ç½®å…·ä½“æ‰«æçš„åŒ…ï¼Œå› æ­¤å®ƒä¼šè‡ªåŠ¨å°†å£°æ˜æ­¤æ¥å£çš„ç±»æ‰€åœ¨çš„åŒ…ä½œä¸ºbasePackageï¼Œæ‰€ä»¥ï¼Œå½“æ·»åŠ <code>@SpringBootApplication</code>ä¹‹åä¹Ÿå°±ç­‰äºç›´æ¥å¼€å¯äº†è‡ªåŠ¨æ‰«æï¼Œæˆ‘ä»¬æ‰€æœ‰çš„é…ç½®éƒ½ä¼šè‡ªåŠ¨åŠ è½½ï¼Œä½†æ˜¯ä¸€å®šæ³¨æ„ä¸èƒ½åœ¨ä¸»ç±»ä¹‹å¤–çš„åŒ…è¿›è¡ŒBeanå®šä¹‰ï¼Œå¦åˆ™æ— æ³•æ‰«æåˆ°ï¼Œéœ€è¦æ‰‹åŠ¨é…ç½®ã€‚</p><p>æˆ‘ä»¬è‡ªå·±ç±»è·¯å¾„ä¸‹çš„é…ç½®ã€è¿˜æœ‰å„ç§Beanå®šä¹‰å¦‚ä½•è¯»å–çš„é—®é¢˜è§£å†³äº†ï¼Œæ¥ç€æˆ‘ä»¬æ¥çœ‹ç¬¬äºŒä¸ªæ³¨è§£<code>@EnableAutoConfiguration</code>ï¼Œå®ƒå°±æ˜¯å…¶ä»–Starterè‡ªåŠ¨é…ç½®çš„æ ¸å¿ƒäº†ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å®ƒæ˜¯å¦‚ä½•å®šä¹‰çš„ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">TYPE</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Inherited</span>
<span class="token annotation punctuation">@AutoConfigurationPackage</span>
<span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">AutoConfigurationImportSelector</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">EnableAutoConfiguration</span> <span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œå°±æ˜¯SSMé˜¶æ®µæˆ‘ä»¬è®¤è¯†çš„è€å¥—è·¯äº†ï¼Œç›´æ¥ä¸€æ‰‹<code>@Import</code>ï¼Œé€šè¿‡è¿™ç§æ–¹å¼æ¥å°†ä¸€äº›å¤–éƒ¨çš„ç±»è¿›è¡ŒåŠ è½½ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹AutoConfigurationImportSelectoråšäº†ä»€ä¹ˆäº‹æƒ…ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AutoConfigurationImportSelector</span> <span class="token keyword">implements</span> <span class="token class-name">DeferredImportSelector</span><span class="token punctuation">,</span> <span class="token class-name">BeanClassLoaderAware</span><span class="token punctuation">,</span> <span class="token class-name">ResourceLoaderAware</span><span class="token punctuation">,</span> <span class="token class-name">BeanFactoryAware</span><span class="token punctuation">,</span> <span class="token class-name">EnvironmentAware</span><span class="token punctuation">,</span> <span class="token class-name">Ordered</span> <span class="token punctuation">{</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬çœ‹åˆ°å®ƒå®ç°äº†å¾ˆå¤šæ¥å£ï¼ŒåŒ…æ‹¬å¤§é‡çš„Awareæ¥å£ï¼Œæˆ‘ä»¬åœ¨SSMé˜¶æ®µä¹Ÿä»‹ç»è¿‡ï¼Œå®é™…ä¸Šå°±æ˜¯ä¸ºäº†æ„ŸçŸ¥æŸäº›å¿…è¦çš„å¯¹è±¡ï¼Œåœ¨åŠ è½½æ—¶å°†å…¶å­˜åˆ°å½“å‰ç±»ä¸­ã€‚</p><p>å…¶ä¸­æœ€æ ¸å¿ƒçš„æ˜¯<code>DeferredImportSelector</code>æ¥å£ï¼Œå®ƒæ˜¯<code>ImportSelector</code>çš„å­ç±»ï¼Œå®ƒå®šä¹‰äº†<code>selectImports</code>æ–¹æ³•ï¼Œç”¨äºè¿”å›éœ€è¦åŠ è½½çš„ç±»åç§°ï¼Œåœ¨SpringåŠ è½½ImportSelectoræ—¶ï¼Œä¼šè°ƒç”¨æ­¤æ–¹æ³•æ¥è·å–æ›´å¤šéœ€è¦åŠ è½½çš„ç±»ï¼Œå¹¶å°†è¿™äº›ç±»å…¨éƒ¨æ³¨å†Œä¸ºBeanï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ImportSelector</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">selectImports</span><span class="token punctuation">(</span><span class="token class-name">AnnotationMetadata</span> importingClassMetadata<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Nullable</span>
    <span class="token keyword">default</span> <span class="token class-name">Predicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">getExclusionFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬äº†è§£äº†ä¸¤ç§ä½¿ç”¨<code>@Import</code>æœ‰ç‰¹æ®Šæœºåˆ¶çš„æ¥å£ï¼šImportSelectorï¼ˆè¿™é‡Œç”¨åˆ°çš„ï¼‰å’ŒImportBeanDefinitionRegistrarï¼ˆä¹‹å‰SSMé˜¶æ®µæºç æœ‰è®²ï¼‰å½“ç„¶è¿˜æœ‰æ™®é€šçš„<code>@Configuration</code>é…ç½®ç±»ã€‚</p><p>ä¸ºäº†åç»­æ›´å¥½ç†è§£æˆ‘ä»¬å¯ä»¥æ¥é˜…è¯»ä¸€ä¸‹<code>ConfigurationClassPostProcessor</code>çš„æºç ï¼Œå®é™…ä¸Šè¿™ä¸ªåç½®å¤„ç†å™¨æ˜¯Springä¸­æä¾›çš„ï¼Œè¿™æ˜¯ä¸“é—¨ç”¨äºå¤„ç†é…ç½®ç±»çš„åç½®å¤„ç†å™¨ï¼Œå…¶ä¸­<code>ImportBeanDefinitionRegistrar</code>ï¼Œè¿˜æœ‰è¿™é‡Œçš„<code>ImportSelector</code>éƒ½æ˜¯é å®ƒæ¥å¤„ç†ï¼Œä¸è¿‡å½“æ—¶Springé˜¶æ®µæ²¡æœ‰æ·±å…¥è®²è§£ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å®ƒåˆ°åº•æ˜¯å¦‚ä½•å¤„ç†<code>@Import</code>çš„ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">postProcessBeanDefinitionRegistry</span><span class="token punctuation">(</span><span class="token class-name">BeanDefinitionRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
		<span class="token function">processConfigBeanDefinitions</span><span class="token punctuation">(</span>registry<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//å¸¸è§„å¥—å¨ƒ</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">processConfigBeanDefinitions</span><span class="token punctuation">(</span><span class="token class-name">BeanDefinitionRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  	<span class="token comment">//æ³¨æ„è¿™ä¸ªåç½®å¤„ç†å™¨ç»§æ‰¿è‡ªBeanDefinitionRegistryPostProcessor</span>
    <span class="token comment">//æ‰€ä»¥è¿™ä¸ªé˜¶æ®µä»…ä»…æ˜¯å·²ç»å®Œæˆæ‰«æäº†æ‰€æœ‰çš„Beanï¼Œå¾—åˆ°äº†æ‰€æœ‰çš„BeanDefinitionï¼Œä½†æ˜¯è¿˜æ²¡æœ‰è¿›è¡Œä»»ä½•å¤„ç†</span>
   	<span class="token comment">//candidateæ˜¯å€™é€‰è€…çš„æ„æ€ï¼Œä¸€ä¼šä¼šå°†æ ‡è®°äº†@Configurationçš„ç±»ä½œä¸ºConfigurationClassåŠ å…¥åˆ°configCandidatesä¸­</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">BeanDefinitionHolder</span><span class="token punctuation">&gt;</span></span> configCandidates <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  	<span class="token comment">//ç›´æ¥å–å‡ºæ‰€æœ‰å·²æ³¨å†ŒBeançš„åç§°</span>
    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> candidateNames <span class="token operator">=</span> registry<span class="token punctuation">.</span><span class="token function">getBeanDefinitionNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> beanName <span class="token operator">:</span> candidateNames<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token comment">//ä¾æ¬¡æ‹¿åˆ°å¯¹åº”çš„Beanå®šä¹‰ï¼Œç„¶åè¿›è¡Œåˆ¤æ–­</span>
       <span class="token class-name">BeanDefinition</span> beanDef <span class="token operator">=</span> registry<span class="token punctuation">.</span><span class="token function">getBeanDefinition</span><span class="token punctuation">(</span>beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token keyword">if</span> <span class="token punctuation">(</span>beanDef<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token class-name">ConfigurationClassUtils</span><span class="token punctuation">.</span><span class="token constant">CONFIGURATION_CLASS_ATTRIBUTE</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
       <span class="token punctuation">}</span>
       <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">ConfigurationClassUtils</span><span class="token punctuation">.</span><span class="token function">checkConfigurationClassCandidate</span><span class="token punctuation">(</span>beanDef<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>metadataReaderFactory<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token comment">//åˆ¤æ–­æ˜¯å¦ä¸ºæ‰“äº† @Configuration çš„é…ç½®ç±»ï¼Œå¦‚æœæ˜¯å°±åŠ å…¥åˆ°å€™é€‰åˆ—è¡¨ä¸­</span>
          configCandidates<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BeanDefinitionHolder</span><span class="token punctuation">(</span>beanDef<span class="token punctuation">,</span> beanName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// å¦‚æœä¸€ä¸ªæ‰“äº† @Configuration çš„ç±»éƒ½æ²¡å‘ç°ï¼Œç›´æ¥è¿”å›</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>configCandidates<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// å¯¹æ‰€æœ‰çš„é…ç½®ç±»ä¾æ® @Order è¿›è¡Œæ’åº</span>
    configCandidates<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span>bd1<span class="token punctuation">,</span> bd2<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
       <span class="token keyword">int</span> i1 <span class="token operator">=</span> <span class="token class-name">ConfigurationClassUtils</span><span class="token punctuation">.</span><span class="token function">getOrder</span><span class="token punctuation">(</span>bd1<span class="token punctuation">.</span><span class="token function">getBeanDefinition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token keyword">int</span> i2 <span class="token operator">=</span> <span class="token class-name">ConfigurationClassUtils</span><span class="token punctuation">.</span><span class="token function">getOrder</span><span class="token punctuation">(</span>bd2<span class="token punctuation">.</span><span class="token function">getBeanDefinition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token keyword">return</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>i1<span class="token punctuation">,</span> i2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token comment">// è¿™é‡Œä½¿ç”¨do-whileè¯­å¥ä¾æ¬¡è§£ææ‰€æœ‰çš„é…ç½®ç±»</span>
    <span class="token class-name">ConfigurationClassParser</span> parser <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConfigurationClassParser</span><span class="token punctuation">(</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>metadataReaderFactory<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>problemReporter<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>environment<span class="token punctuation">,</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>resourceLoader<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>componentScanBeanNameGenerator<span class="token punctuation">,</span> registry<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">BeanDefinitionHolder</span><span class="token punctuation">&gt;</span></span> candidates <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedHashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>configCandidates<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ConfigurationClass</span><span class="token punctuation">&gt;</span></span> alreadyParsed <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>configCandidates<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">do</span> <span class="token punctuation">{</span>
       <span class="token class-name">StartupStep</span> processConfig <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>applicationStartup<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token string">&quot;spring.context.config-classes.parse&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token comment">//è¿™é‡Œå°±ä¼šé€šè¿‡Parserè§£æé…ç½®ç±»ä¸­å¤§éƒ¨åˆ†å†…å®¹ï¼ŒåŒ…æ‹¬æˆ‘ä»¬ä¹‹å‰é‡åˆ°çš„@Importæ³¨è§£</span>
			 parser<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>candidates<span class="token punctuation">)</span><span class="token punctuation">;</span>
			 parser<span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token comment">//è§£æå®Œæˆåè¯»å–åˆ°æ‰€æœ‰çš„é…ç½®ç±»</span>
       <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ConfigurationClass</span><span class="token punctuation">&gt;</span></span> configClasses <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedHashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>parser<span class="token punctuation">.</span><span class="token function">getConfigurationClasses</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			 configClasses<span class="token punctuation">.</span><span class="token function">removeAll</span><span class="token punctuation">(</span>alreadyParsed<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> 
       <span class="token comment">//å°†ä¸Šé¢è¯»å–çš„é…ç½®ç±»åŠ è½½ä¸ºBean</span>
       <span class="token keyword">this</span><span class="token punctuation">.</span>reader<span class="token punctuation">.</span><span class="token function">loadBeanDefinitions</span><span class="token punctuation">(</span>configClasses<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>candidates<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬å°±æ¥ç€æ¥çœ‹ï¼Œ<code>ConfigurationClassParser</code>æ˜¯å¦‚ä½•è¿›è¡Œè§£æçš„ï¼Œç›´æ¥è¿›å…¥<code>parse</code>æ–¹æ³•çš„å…³é”®éƒ¨åˆ†ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">processConfigurationClass</span><span class="token punctuation">(</span><span class="token class-name">ConfigurationClass</span> configClass<span class="token punctuation">,</span> <span class="token class-name">Predicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> filter<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
      <span class="token comment">//å¤„ç† @Conditional ç›¸å…³æ³¨è§£å¤„ç†ï¼Œåé¢ä¼šè®²</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>conditionEvaluator<span class="token punctuation">.</span><span class="token function">shouldSkip</span><span class="token punctuation">(</span>configClass<span class="token punctuation">.</span><span class="token function">getMetadata</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">ConfigurationPhase</span><span class="token punctuation">.</span><span class="token constant">PARSE_CONFIGURATION</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">ConfigurationClassParser<span class="token punctuation">.</span>SourceClass</span> sourceClass <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">asSourceClass</span><span class="token punctuation">(</span>configClass<span class="token punctuation">,</span> filter<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">do</span> <span class="token punctuation">{</span>
            <span class="token comment">//è¿™é‡Œå°±æ˜¯æœ€æ ¸å¿ƒäº†</span>
            sourceClass <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">doProcessConfigurationClass</span><span class="token punctuation">(</span>configClass<span class="token punctuation">,</span> sourceClass<span class="token punctuation">,</span> filter<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">while</span><span class="token punctuation">(</span>sourceClass <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span>configurationClasses<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>configClass<span class="token punctuation">,</span> configClass<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ€åæˆ‘ä»¬å†æ¥çœ‹æœ€æ ¸å¿ƒçš„<code>doProcessConfigurationClass</code>æ–¹æ³•ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token keyword">final</span> <span class="token class-name">SourceClass</span> <span class="token function">doProcessConfigurationClass</span><span class="token punctuation">(</span><span class="token class-name">ConfigurationClass</span> configClass<span class="token punctuation">,</span> <span class="token class-name">SourceClass</span> sourceClass<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token function">processImports</span><span class="token punctuation">(</span>configClass<span class="token punctuation">,</span> sourceClass<span class="token punctuation">,</span> <span class="token function">getImports</span><span class="token punctuation">(</span>sourceClass<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// å¤„ç†Importæ³¨è§£</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">processImports</span><span class="token punctuation">(</span><span class="token class-name">ConfigurationClass</span> configClass<span class="token punctuation">,</span> <span class="token class-name">SourceClass</span> currentSourceClass<span class="token punctuation">,</span>
            <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SourceClass</span><span class="token punctuation">&gt;</span></span> importCandidates<span class="token punctuation">,</span> <span class="token class-name">Predicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> exclusionFilter<span class="token punctuation">,</span>
            <span class="token keyword">boolean</span> checkForCircularImports<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  			<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>checkForCircularImports <span class="token operator">&amp;&amp;</span> <span class="token function">isChainedImportOnStack</span><span class="token punctuation">(</span>configClass<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          	<span class="token comment">//æ£€æŸ¥æ˜¯å¦å­˜åœ¨å¾ªç¯å¯¼å…¥æƒ…å†µ</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>problemReporter<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">CircularImportProblem</span><span class="token punctuation">(</span>configClass<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>importStack<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>importStack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>configClass<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
              	<span class="token comment">//ä¾æ¬¡éå†æ‰€æœ‰@Importæ³¨è§£ä¸­æ·»åŠ çš„ç±»</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">SourceClass</span> candidate <span class="token operator">:</span> importCandidates<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>candidate<span class="token punctuation">.</span><span class="token function">isAssignable</span><span class="token punctuation">(</span><span class="token class-name">ImportSelector</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token comment">// å¦‚æœæ˜¯ImportSelectorç±»å‹ï¼Œåˆ™åŠ è½½ç±»ï¼Œå¹¶å®Œæˆå®ä¾‹åŒ–</span>
                        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> candidateClass <span class="token operator">=</span> candidate<span class="token punctuation">.</span><span class="token function">loadClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token class-name">ImportSelector</span> selector <span class="token operator">=</span> <span class="token class-name">ParserStrategyUtils</span><span class="token punctuation">.</span><span class="token function">instantiateClass</span><span class="token punctuation">(</span>candidateClass<span class="token punctuation">,</span> <span class="token class-name">ImportSelector</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>environment<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>resourceLoader<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>registry<span class="token punctuation">)</span><span class="token punctuation">;</span>
                      	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
                        <span class="token comment">// å¦‚æœæ˜¯DeferredImportSelectorï¼ˆå»¶è¿Ÿå¯¼å…¥ï¼‰åˆ™é€šè¿‡deferredImportSelectorHandlerè¿›è¡Œå¤„ç†</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span>selector <span class="token keyword">instanceof</span> <span class="token class-name">DeferredImportSelector</span> deferredImportSelector<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            <span class="token keyword">this</span><span class="token punctuation">.</span>deferredImportSelectorHandler<span class="token punctuation">.</span><span class="token function">handle</span><span class="token punctuation">(</span>configClass<span class="token punctuation">,</span> deferredImportSelector<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                        <span class="token keyword">else</span> <span class="token punctuation">{</span>
                        <span class="token comment">// å¦‚æœæ˜¯æ™®é€šçš„ImportSelectoråˆ™ç›´æ¥æ‰§è¡ŒselectImportsæ–¹æ³•å¾—åˆ°éœ€è¦é¢å¤–å¯¼å…¥çš„ç±»åç§°</span>
                            <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> importClassNames <span class="token operator">=</span> selector<span class="token punctuation">.</span><span class="token function">selectImports</span><span class="token punctuation">(</span>currentSourceClass<span class="token punctuation">.</span><span class="token function">getMetadata</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                            <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SourceClass</span><span class="token punctuation">&gt;</span></span> importSourceClasses <span class="token operator">=</span> <span class="token function">asSourceClasses</span><span class="token punctuation">(</span>importClassNames<span class="token punctuation">,</span> exclusionFilter<span class="token punctuation">)</span><span class="token punctuation">;</span>
                          	<span class="token comment">//é€’å½’å¤„ç†è¿™é‡Œå¾—åˆ°çš„å…¨éƒ¨ç±»</span>
                            <span class="token function">processImports</span><span class="token punctuation">(</span>configClass<span class="token punctuation">,</span> currentSourceClass<span class="token punctuation">,</span> importSourceClasses<span class="token punctuation">,</span> exclusionFilter<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>candidate<span class="token punctuation">.</span><span class="token function">isAssignable</span><span class="token punctuation">(</span><span class="token class-name">ImportBeanDefinitionRegistrar</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token comment">// åˆ¤æ–­æ˜¯å¦ä¸ºImportBeanDefinitionRegistrarç±»å‹ï¼ŒSSMé˜¶æ®µå·²ç»è®²è§£è¿‡äº†</span>
                        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> candidateClass <span class="token operator">=</span> candidate<span class="token punctuation">.</span><span class="token function">loadClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token class-name">ImportBeanDefinitionRegistrar</span> registrar <span class="token operator">=</span>
                                <span class="token class-name">ParserStrategyUtils</span><span class="token punctuation">.</span><span class="token function">instantiateClass</span><span class="token punctuation">(</span>candidateClass<span class="token punctuation">,</span> <span class="token class-name">ImportBeanDefinitionRegistrar</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>environment<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>resourceLoader<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>registry<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token comment">//å¾€configClassä¸¢ImportBeanDefinitionRegistrarä¿¡æ¯è¿›å»ï¼Œä¹‹åå†å¤„ç†</span>
                        configClass<span class="token punctuation">.</span><span class="token function">addImportBeanDefinitionRegistrar</span><span class="token punctuation">(</span>registrar<span class="token punctuation">,</span> currentSourceClass<span class="token punctuation">.</span><span class="token function">getMetadata</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                    <span class="token keyword">else</span> <span class="token punctuation">{</span>
                        <span class="token comment">// å¦‚æœä»¥ä¸Šç±»å‹éƒ½ä¸æ˜¯ï¼Œåˆ™ä¸ä½¿ç”¨ç‰¹æ®Šæœºåˆ¶ï¼Œå•çº¯å¯¼å…¥ä¸ºæ™®é€šçš„é…ç½®ç±»è¿›è¡Œå¤„ç†</span>
                        <span class="token keyword">this</span><span class="token punctuation">.</span>importStack<span class="token punctuation">.</span><span class="token function">registerImport</span><span class="token punctuation">(</span>
                                currentSourceClass<span class="token punctuation">.</span><span class="token function">getMetadata</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> candidate<span class="token punctuation">.</span><span class="token function">getMetadata</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token function">processConfigurationClass</span><span class="token punctuation">(</span>candidate<span class="token punctuation">.</span><span class="token function">asConfigClass</span><span class="token punctuation">(</span>configClass<span class="token punctuation">)</span><span class="token punctuation">,</span> exclusionFilter<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸éš¾æ³¨æ„åˆ°ï¼Œè™½ç„¶è¿™é‡Œç‰¹åˆ«å¤„ç†äº†<code>ImportSelector</code>å¯¹è±¡ï¼Œä½†æ˜¯è¿˜é’ˆå¯¹<code>ImportSelector</code>çš„å­æ¥å£<code>DeferredImportSelector</code>è¿›è¡Œäº†é¢å¤–å¤„ç†ï¼ŒDeferredæ˜¯å»¶è¿Ÿçš„æ„æ€ï¼Œå®ƒæ˜¯ä¸€ä¸ªå»¶è¿Ÿæ‰§è¡Œçš„<code>ImportSelector</code>ï¼Œå¹¶ä¸ä¼šç«‹å³è¿›å¤„ç†ï¼Œè€Œæ˜¯ä¸¢è¿›DeferredImportSelectorHandlerï¼Œå¹¶ä¸”åœ¨æˆ‘ä»¬ä¸Šé¢æåˆ°çš„<code>parse</code>æ–¹æ³•çš„æœ€åè¿›è¡Œå¤„ç†ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">parse</span><span class="token punctuation">(</span><span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">BeanDefinitionHolder</span><span class="token punctuation">&gt;</span></span> configCandidates<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>deferredImportSelectorHandler<span class="token punctuation">.</span><span class="token function">process</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//æ‰§è¡ŒDeferredImportSelectorçš„processæ–¹æ³•ï¼Œè¿™é‡Œä¾ç„¶ä¼šè¿›è¡Œä¸Šé¢çš„processImportsæ“ä½œï¼Œåªä¸è¿‡è¢«å»¶è¿Ÿåˆ°è¿™ä¸ªä½ç½®æ‰§è¡Œäº†</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬æ¥ç€æ¥çœ‹<code>DeferredImportSelector</code>æ­£å¥½å°±æœ‰ä¸€ä¸ª<code>process</code>æ–¹æ³•ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>ublic <span class="token keyword">interface</span> <span class="token class-name">DeferredImportSelector</span> <span class="token keyword">extends</span> <span class="token class-name">ImportSelector</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Nullable</span>
    <span class="token keyword">default</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">DeferredImportSelector<span class="token punctuation">.</span>Group</span><span class="token punctuation">&gt;</span></span> <span class="token function">getImportGroup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Group</span> <span class="token punctuation">{</span>
        <span class="token keyword">void</span> <span class="token function">process</span><span class="token punctuation">(</span><span class="token class-name">AnnotationMetadata</span> metadata<span class="token punctuation">,</span> <span class="token class-name">DeferredImportSelector</span> selector<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Iterable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DeferredImportSelector<span class="token punctuation">.</span>Group<span class="token punctuation">.</span>Entry</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectImports</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Entry</span> <span class="token punctuation">{</span>
          <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ€åç»è¿‡ConfigurationClassParserå¤„ç†å®Œæˆåï¼Œé€šè¿‡<code>parser.getConfigurationClasses()</code>å°±èƒ½å¾—åˆ°é€šè¿‡é…ç½®ç±»å¯¼å…¥é‚£äº›é¢å¤–çš„é…ç½®ç±»æˆ–æ˜¯ç‰¹æ®Šçš„ç±»ã€‚æœ€åå°†è¿™äº›é…ç½®ç±»å…¨éƒ¨æ³¨å†ŒBeanDefinitionï¼Œç„¶åå°±å¯ä»¥äº¤ç»™æ¥ä¸‹æ¥çš„Beanåˆå§‹åŒ–è¿‡ç¨‹å»å¤„ç†äº†ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">this</span><span class="token punctuation">.</span>reader<span class="token punctuation">.</span><span class="token function">loadBeanDefinitions</span><span class="token punctuation">(</span>configClasses<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æœ€åæˆ‘ä»¬å†å»çœ‹<code>loadBeanDefinitions</code>æ˜¯å¦‚ä½•è¿è¡Œçš„ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">loadBeanDefinitions</span><span class="token punctuation">(</span><span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ConfigurationClass</span><span class="token punctuation">&gt;</span></span> configurationModel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">ConfigurationClassBeanDefinitionReader<span class="token punctuation">.</span>TrackedConditionEvaluator</span> trackedConditionEvaluator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConfigurationClassBeanDefinitionReader<span class="token punctuation">.</span>TrackedConditionEvaluator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Iterator</span> var3 <span class="token operator">=</span> configurationModel<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>var3<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ConfigurationClass</span> configClass <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">ConfigurationClass</span><span class="token punctuation">)</span>var3<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loadBeanDefinitionsForConfigurationClass</span><span class="token punctuation">(</span>configClass<span class="token punctuation">,</span> trackedConditionEvaluator<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">loadBeanDefinitionsForConfigurationClass</span><span class="token punctuation">(</span><span class="token class-name">ConfigurationClass</span> configClass<span class="token punctuation">,</span> <span class="token class-name">ConfigurationClassBeanDefinitionReader<span class="token punctuation">.</span>TrackedConditionEvaluator</span> trackedConditionEvaluator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>trackedConditionEvaluator<span class="token punctuation">.</span><span class="token function">shouldSkip</span><span class="token punctuation">(</span>configClass<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>configClass<span class="token punctuation">.</span><span class="token function">isImported</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">registerBeanDefinitionForImportedConfigurationClass</span><span class="token punctuation">(</span>configClass<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//æ³¨å†Œé…ç½®ç±»è‡ªå·±</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">Iterator</span> var3 <span class="token operator">=</span> configClass<span class="token punctuation">.</span><span class="token function">getBeanMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>var3<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">BeanMethod</span> beanMethod <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">BeanMethod</span><span class="token punctuation">)</span>var3<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loadBeanDefinitionsForBeanMethod</span><span class="token punctuation">(</span>beanMethod<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//æ³¨å†Œ@Beanæ³¨è§£æ ‡è¯†çš„æ–¹æ³•</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//æ³¨å†Œ@ImportResourceå¼•å…¥çš„XMLé…ç½®æ–‡ä»¶ä¸­è¯»å–çš„beanå®šä¹‰</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loadBeanDefinitionsFromImportedResources</span><span class="token punctuation">(</span>configClass<span class="token punctuation">.</span><span class="token function">getImportedResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//æ³¨å†ŒconfigClassä¸­ç»è¿‡è§£æåä¿å­˜çš„æ‰€æœ‰ImportBeanDefinitionRegistrarï¼Œæ³¨å†Œå¯¹åº”çš„BeanDefinition</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loadBeanDefinitionsFromRegistrars</span><span class="token punctuation">(</span>configClass<span class="token punctuation">.</span><span class="token function">getImportBeanDefinitionRegistrars</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ ·ï¼Œæ•´ä¸ª<code>@Configuration</code>é…ç½®ç±»çš„åº•å±‚é…ç½®æµç¨‹æˆ‘ä»¬å°±å¤§è‡´äº†è§£äº†ã€‚æ¥ç€æˆ‘ä»¬æ¥çœ‹AutoConfigurationImportSelectoræ˜¯å¦‚ä½•å®ç°è‡ªåŠ¨é…ç½®çš„ï¼Œå¯ä»¥çœ‹åˆ°å†…éƒ¨ç±»AutoConfigurationGroupçš„processæ–¹æ³•ï¼Œå®ƒæ˜¯çˆ¶æ¥å£çš„å®ç°ï¼Œå› ä¸ºçˆ¶æ¥å£æ˜¯<code>DeferredImportSelector</code>ï¼Œæ ¹æ®å‰é¢çš„æ¨å¯¼ï¼Œå¾ˆå®¹æ˜“å¾—çŸ¥ï¼Œå®é™…ä¸Šæœ€åä¼šè°ƒç”¨<code>process</code>æ–¹æ³•è·å–æ‰€æœ‰çš„è‡ªåŠ¨é…ç½®ç±»ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">process</span><span class="token punctuation">(</span><span class="token class-name">AnnotationMetadata</span> annotationMetadata<span class="token punctuation">,</span> <span class="token class-name">DeferredImportSelector</span> deferredImportSelector<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">state</span><span class="token punctuation">(</span>deferredImportSelector <span class="token keyword">instanceof</span> <span class="token class-name">AutoConfigurationImportSelector</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;Only %s implementations are supported, got %s&quot;</span><span class="token punctuation">,</span> <span class="token class-name">AutoConfigurationImportSelector</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getSimpleName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> deferredImportSelector<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//è·å–æ‰€æœ‰çš„Entryï¼Œå…¶å®å°±æ˜¯è¯»å–æ¥æŸ¥çœ‹æœ‰å“ªäº›è‡ªåŠ¨é…ç½®ç±»</span>
    <span class="token class-name">AutoConfigurationImportSelector<span class="token punctuation">.</span>AutoConfigurationEntry</span> autoConfigurationEntry <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">AutoConfigurationImportSelector</span><span class="token punctuation">)</span>deferredImportSelector<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAutoConfigurationEntry</span><span class="token punctuation">(</span>annotationMetadata<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>autoConfigurationEntries<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>autoConfigurationEntry<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Iterator</span> var4 <span class="token operator">=</span> autoConfigurationEntry<span class="token punctuation">.</span><span class="token function">getConfigurations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">while</span><span class="token punctuation">(</span>var4<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> importClassName <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span>var4<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>entries<span class="token punctuation">.</span><span class="token function">putIfAbsent</span><span class="token punctuation">(</span>importClassName<span class="token punctuation">,</span> annotationMetadata<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  	<span class="token comment">//è¿™é‡Œç»“æŸä¹‹åï¼Œentriesä¸­å°±æœ‰ä¸Šé¢è·å–åˆ°çš„è‡ªåŠ¨é…ç½®ç±»äº†</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬æ¥ç€æ¥çœ‹<code>getAutoConfigurationEntry</code>æ–¹æ³•ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token class-name">AutoConfigurationImportSelector<span class="token punctuation">.</span>AutoConfigurationEntry</span> <span class="token function">getAutoConfigurationEntry</span><span class="token punctuation">(</span><span class="token class-name">AnnotationMetadata</span> annotationMetadata<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//è¿™é‡Œåˆ¤æ–­æ˜¯å¦å¼€å¯äº†è‡ªåŠ¨é…ç½®ï¼Œä½ æƒ³çš„æ²¡é”™ï¼Œè‡ªåŠ¨é…ç½®æ˜¯å¯ä»¥å…³çš„</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isEnabled</span><span class="token punctuation">(</span>annotationMetadata<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token constant">EMPTY_ENTRY</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">//æ ¹æ®æ³¨è§£å®šä¹‰è·å–ä¸€äº›å±æ€§</span>
        <span class="token class-name">AnnotationAttributes</span> attributes <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAttributes</span><span class="token punctuation">(</span>annotationMetadata<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//è·å–æ‰€æœ‰éœ€è¦è‡ªåŠ¨é…ç½®çš„ç±»</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> configurations <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getCandidateConfigurations</span><span class="token punctuation">(</span>annotationMetadata<span class="token punctuation">,</span> attributes<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//ç§»é™¤æ‰é‡å¤çš„è‡ªåŠ¨é…ç½®ç±»</span>
        configurations <span class="token operator">=</span> <span class="token function">removeDuplicates</span><span class="token punctuation">(</span>configurations<span class="token punctuation">)</span><span class="token punctuation">;</span>
      	<span class="token comment">//è·å–éœ€è¦æ’é™¤æ‰çš„è‡ªåŠ¨é…ç½®ç±»</span>
		    <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> exclusions <span class="token operator">=</span> <span class="token function">getExclusions</span><span class="token punctuation">(</span>annotationMetadata<span class="token punctuation">,</span> attributes<span class="token punctuation">)</span><span class="token punctuation">;</span>
	    	<span class="token function">checkExcludedClasses</span><span class="token punctuation">(</span>configurations<span class="token punctuation">,</span> exclusions<span class="token punctuation">)</span><span class="token punctuation">;</span>
	    	configurations<span class="token punctuation">.</span><span class="token function">removeAll</span><span class="token punctuation">(</span>exclusions<span class="token punctuation">)</span><span class="token punctuation">;</span>
      	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
	    	<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">AutoConfigurationEntry</span><span class="token punctuation">(</span>configurations<span class="token punctuation">,</span> exclusions<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬æ¥ç€å¾€é‡Œé¢çœ‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">getCandidateConfigurations</span><span class="token punctuation">(</span><span class="token class-name">AnnotationMetadata</span> metadata<span class="token punctuation">,</span> <span class="token class-name">AnnotationAttributes</span> attributes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  			<span class="token comment">//è¿™é‡Œç»§ç»­å¥—å¨ƒ</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> configurations <span class="token operator">=</span> <span class="token class-name">ImportCandidates</span><span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token class-name">AutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getBeanClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getCandidates</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆ°è¿™é‡Œç»ˆäºæ‰¾åˆ°äº†ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">ImportCandidates</span> <span class="token function">load</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> annotation<span class="token punctuation">,</span> <span class="token class-name">ClassLoader</span> classLoader<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">notNull</span><span class="token punctuation">(</span>annotation<span class="token punctuation">,</span> <span class="token string">&quot;&#39;annotation&#39; must not be null&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ClassLoader</span> classLoaderToUse <span class="token operator">=</span> <span class="token function">decideClassloader</span><span class="token punctuation">(</span>classLoader<span class="token punctuation">)</span><span class="token punctuation">;</span>
  			<span class="token comment">//è¿™é‡Œç›´æ¥è·å– META-INF/spring/æ³¨è§£ç±»å.imports ä¸­çš„æ‰€æœ‰å†…å®¹</span>
        <span class="token class-name">String</span> location <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;META-INF/spring/%s.imports&quot;</span><span class="token punctuation">,</span> annotation<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬å¯ä»¥ç›´æ¥æ‰¾åˆ°ï¼š</p><figure><img src="https://s2.loli.net/2023/07/25/9DI71nqt8JaK4Tl.png" alt="image-20230725234543027" tabindex="0" loading="lazy"><figcaption>image-20230725234543027</figcaption></figure><p>å¯ä»¥çœ‹åˆ°æœ‰å¾ˆå¤šè‡ªåŠ¨é…ç½®ç±»ï¼Œå®é™…ä¸ŠSpringBootçš„starteréƒ½æ˜¯ä¾é è‡ªåŠ¨é…ç½®ç±»æ¥å®ç°è‡ªåŠ¨é…ç½®çš„ï¼Œæˆ‘ä»¬å¯ä»¥éšä¾¿çœ‹ä¸€ä¸ªï¼Œæ¯”å¦‚ç”¨äºè‡ªåŠ¨é…ç½®Mybatisæ¡†æ¶çš„MybatisAutoConfigurationè‡ªåŠ¨é…ç½®ç±»ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@ConditionalOnClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">SqlSessionFactory</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">SqlSessionFactoryBean</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnSingleCandidate</span><span class="token punctuation">(</span><span class="token class-name">DataSource</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@EnableConfigurationProperties</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">MybatisProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@AutoConfigureAfter</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">DataSourceAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">MybatisLanguageDriverAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MybatisAutoConfiguration</span> <span class="token keyword">implements</span> <span class="token class-name">InitializingBean</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
      
    <span class="token annotation punctuation">@Bean</span>
    <span class="token annotation punctuation">@ConditionalOnMissingBean</span>
    <span class="token keyword">public</span> <span class="token class-name">SqlSessionFactory</span> <span class="token function">sqlSessionFactory</span><span class="token punctuation">(</span><span class="token class-name">DataSource</span> dataSource<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token annotation punctuation">@ConditionalOnMissingBean</span>
    <span class="token keyword">public</span> <span class="token class-name">SqlSessionTemplate</span> <span class="token function">sqlSessionTemplate</span><span class="token punctuation">(</span><span class="token class-name">SqlSessionFactory</span> sqlSessionFactory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span>

  	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹åˆ°é‡Œé¢ç›´æ¥å°†SqlSessionFactoryå’ŒSqlSessionTemplateæ³¨å†Œä¸ºBeanäº†ï¼Œç”±äºè¿™ä¸ªè‡ªåŠ¨é…ç½®ç±»åœ¨ä¸Šé¢çš„ä¸€å¥—æµç¨‹ä¸­å·²ç»åŠ è½½äº†ï¼Œè¿™æ ·å°±ä¸éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨è¿›è¡Œæ³¨å†Œè¿™äº›Beanäº†ã€‚ä¸è¿‡è¿™é‡Œæœ‰ä¸€ä¸ªéå¸¸æœ‰æ„æ€çš„ @Conditional æ³¨è§£ï¼Œå®ƒå¯ä»¥æ ¹æ®æ¡ä»¶æ¥åˆ¤æ–­æ˜¯å¦æ³¨å†Œè¿™ä¸ªBeanï¼Œæ¯”å¦‚ @ConditionalOnMissingBean æ³¨è§£å°±æ˜¯å½“è¿™ä¸ªBeanä¸å­˜åœ¨çš„æ—¶å€™ï¼Œæ‰ä¼šæ³¨å†Œï¼Œå¦‚æœè¿™ä¸ªBeanå·²ç»è¢«å…¶ä»–é…ç½®ç±»ç»™æ³¨å†Œäº†ï¼Œé‚£ä¹ˆè¿™é‡Œå°±ä¸è¿›è¡Œæ³¨å†Œã€‚</p><p>ç»è¿‡è¿™ä¸€å¥—æµç¨‹ï¼Œç®€è€Œè¨€ä¹‹å°±æ˜¯SpringBootè¯»å–<code>META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports</code>æ–‡ä»¶æ¥ç¡®å®šè¦åŠ è½½å“ªäº›è‡ªåŠ¨é…ç½®ç±»æ¥å®ç°çš„å…¨è‡ªåŠ¨åŒ–ï¼ŒçœŸæ­£åšåˆ°æ·»åŠ ä¾èµ–å°±èƒ½å¤Ÿç›´æ¥å®Œæˆé…ç½®å’Œè¿è¡Œï¼Œè‡³æ­¤ï¼ŒSpringBootçš„åŸç†éƒ¨åˆ†å°±æ¢ç©¶å®Œæ¯•äº†ã€‚</p><h3 id="è‡ªå®šä¹‰starteré¡¹ç›®" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰starteré¡¹ç›®" aria-hidden="true">#</a> è‡ªå®šä¹‰Starteré¡¹ç›®</h3><p>æˆ‘ä»¬ä»¿ç…§Mybatisæ¥ç¼–å†™ä¸€ä¸ªè‡ªå·±çš„starterï¼ŒMybatisçš„starteråŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis.spring.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-spring-boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!--  starteræœ¬èº«åªåšä¾èµ–é›†ä¸­ç®¡ç†ï¼Œä¸ç¼–å†™ä»»ä½•ä»£ç   --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>mybatis-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module.name</span><span class="token punctuation">&gt;</span></span>org.mybatis.spring.boot.starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>module.name</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-jdbc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--  ç¼–å†™çš„ä¸“ç”¨é…ç½®æ¨¡å—   --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis.spring.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-spring-boot-autoconfigure<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-spring<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å› æ­¤æˆ‘ä»¬ä¹Ÿå°†æˆ‘ä»¬è‡ªå·±çš„starterè¿™æ ·è®¾è®¡ï¼Œæˆ‘ä»¬è®¾è®¡ä¸‰ä¸ªæ¨¡å—ï¼š</p><ul><li>spring-boot-helloï¼šåŸºç¡€ä¸šåŠ¡åŠŸèƒ½æ¨¡å—</li><li>spring-boot-starter-helloï¼šå¯åŠ¨å™¨</li><li>spring-boot-autoconifgurer-helloï¼šè‡ªåŠ¨é…ç½®ä¾èµ–</li></ul><p>é¦–å…ˆæ˜¯åŸºç¡€ä¸šåŠ¡åŠŸèƒ½æ¨¡å—ï¼Œè¿™é‡Œæˆ‘ä»¬éšä¾¿åˆ›å»ºä¸€ä¸ªç±»å°±å¯ä»¥äº†ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloWorldService</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯åŠ¨å™¨ä¸»è¦åšä¾èµ–ç®¡ç†ï¼Œè¿™é‡Œå°±ä¸å†™ä»»ä½•ä»£ç ï¼Œåªå†™pomæ–‡ä»¶ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.example<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-autoconifgurer-hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>0.0.1-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.example<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>0.0.1-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯¼å…¥autoconfigureræ¨¡å—ä½œä¸ºä¾èµ–å³å¯ï¼Œæ¥ç€æˆ‘ä»¬å»ç¼–å†™autoconfigureræ¨¡å—ï¼Œé¦–å…ˆå¯¼å…¥ä¾èµ–ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-autoconfigure<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-configuration-processor<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.example<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>0.0.1-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ¥ç€åˆ›å»ºä¸€ä¸ªHelloWorldAutoConfigurationä½œä¸ºè‡ªåŠ¨é…ç½®ç±»ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnWebApplication</span>
<span class="token annotation punctuation">@EnableConfigurationProperties</span><span class="token punctuation">(</span><span class="token class-name">HelloWorldProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloWorldAutoConfiguration</span> <span class="token punctuation">{</span>

    <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">Logger</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token class-name">HelloWorldProperties</span> properties<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Bean</span>
  	<span class="token annotation punctuation">@ConditionalOnMissingBean</span>
    <span class="token keyword">public</span> <span class="token class-name">HelloWorldService</span> <span class="token function">helloWorldService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;è‡ªå®šä¹‰starteré¡¹ç›®å·²å¯åŠ¨ï¼&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;è¯»å–åˆ°è‡ªå®šä¹‰é…ç½®ï¼š&quot;</span><span class="token operator">+</span>properties<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">HelloWorldService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯¹åº”çš„é…ç½®è¯»å–ç±»ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span><span class="token string">&quot;hello.world&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloWorldProperties</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> value<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setValue</span><span class="token punctuation">(</span><span class="token class-name">String</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ¥ç€å†ç¼–å†™<code>META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports</code>æ–‡ä»¶ï¼Œå¹¶å°†æˆ‘ä»¬çš„è‡ªåŠ¨é…ç½®ç±»æ·»åŠ å³å¯ï¼š</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code>com.test.autoconfigure.HelloWorldAutoConfiguration
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æœ€åå†Mavenæ ¹é¡¹ç›®æ‰§è¡Œ<code>install</code>å®‰è£…åˆ°æœ¬åœ°ä»“åº“ï¼Œå®Œæˆã€‚æ¥ç€å°±å¯ä»¥åœ¨å…¶ä»–é¡¹ç›®ä¸­ä½¿ç”¨æˆ‘ä»¬ç¼–å†™çš„è‡ªå®šä¹‰starteräº†ã€‚</p></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/vuepress-theme-hope/vuepress-theme-hope/edit/main/docs/other/spring/3.md" rel="noopener noreferrer" target="_blank" aria-label="åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item git-info"><!----><!----></div></footer><nav class="page-nav"><a href="/other/spring/2.html" class="nav-link prev" aria-label="spring"><div class="hint"><span class="arrow left"></span>ä¸Šä¸€é¡µ</div><div class="link"><span class="font-icon icon iconfont icon-page" style=""></span>spring</div></a><a href="/other/spring/4.html" class="nav-link next" aria-label="spring"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow right"></span></div><div class="link">spring<span class="font-icon icon iconfont icon-page" style=""></span></div></a></nav><div class="giscus-wrapper input-top" id="comment" style="display:block;"><div style="text-align:center">Loading...</div></div><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer">è¿™æ˜¯æµ‹è¯•æ˜¾ç¤ºçš„é¡µè„š</div><div class="copyright">æ— ç‰ˆæƒ</div></footer></div><!--]--><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app-65819ca9.js" defer></script>
  </body>
</html>
