import{h as e,defineComponent as y,ref as g,computed as r,onMounted as v,TransitionGroup as k}from"vue";import{useRoute as l,useRouter as S}from"vue-router";import{isLinkHttp as w}from"@vuepress/shared";import{IconBase as L,isAbsoluteUrl as C}from"vuepress-shared/client";import"../styles/notice.scss";const p=()=>e(L,{name:"close"},()=>e("path",{d:"m925.468 822.294-303.27-310.288L925.51 201.674c34.683-27.842 38.3-75.802 8.122-107.217-30.135-31.37-82.733-34.259-117.408-6.463L512.001 399.257 207.777 87.993C173.1 60.197 120.504 63.087 90.369 94.456c-30.179 31.415-26.561 79.376 8.122 107.217L401.8 512.005l-303.27 310.29c-34.724 27.82-38.34 75.846-8.117 107.194 30.135 31.437 82.729 34.327 117.408 6.486L512 624.756l304.177 311.22c34.68 27.84 87.272 24.95 117.408-6.487 30.223-31.348 26.56-79.375-8.118-107.195z"}));p.displayName="CloseIcon";var I=y({name:"NoticeItem",props:{path:{type:String,default:""},match:{type:String,default:""},title:{type:String,required:!0},content:{type:String,required:!0},actions:{type:Array,default:()=>[]},noticeKey:{type:String,default:""},showOnce:Boolean,confirm:Boolean,fullscreen:Boolean},setup(t){const i=l(),c=S(),o=g(!1),u=r(()=>t.noticeKey?`notice-${t.noticeKey}`:`${t.title}${t.content}`),m=r(()=>t.match?new RegExp(t.match).test(i.path):i.path.startsWith(t.path));v(()=>{const n=(t.showOnce?localStorage:sessionStorage).getItem(u.value);o.value=!n});const a=()=>{o.value=!1,(t.showOnce?localStorage:sessionStorage).setItem("v2-notice","true")},f=n=>{n&&(C(n)?c.push(n):w(n)&&window.open(n)),a()};return()=>e(k,{name:"notice-fade"},()=>m.value&&o.value?[t.fullscreen?e("div",{key:"mask",class:"notice-mask",onClick:()=>{t.confirm||a()}}):null,e("div",{key:"popup",class:["notice-wrapper",{fullscreen:t.fullscreen}]},[e("header",{class:"notice-title"},[t.confirm?null:e(p,{onClick:()=>a()}),e("span",{innerHTML:t.title})]),e("div",{class:"notice-content",innerHTML:t.content}),e("div",{class:"notice-footer"},t.actions.map(({text:n,link:d,type:h=""})=>e("button",{class:["notice-footer-action",h],onClick:()=>f(d),innerHTML:n})))])]:[])}});const s=({config:t})=>{const i=l(),c=t.find(o=>"match"in o?new RegExp(o.match).test(i.path):i.path.startsWith(o.path));return c?e(I,c):null};s.displayName="Notice",s.props={config:{type:Array,required:!0}};export{s as default};
//# sourceMappingURL=Notice.js.map
